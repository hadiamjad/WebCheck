/*! permutive-javascript-sdk v19.102.0 (web) (built 2023-12-08T16:15:38.633Z) */(()=>{"use strict";var __webpack_modules__={2688:(e,t,r)=>{function n(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}r.d(t,{w:()=>n})},787:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(3735),i=r(6567);function o(e){return(0,n.zG)((0,i.Y3)((()=>JSON.parse(e))),(0,i.fS)(n.gn))}},7183:(e,t,r)=>{r.d(t,{h:()=>n});const n=e=>new i(e);class i{constructor(e){const t=this;this._worker=e,this._callbacks={},this._id=0,e.addEventListener("message",(function(e){i.onMessage(t,e)}))}set id(e){this._id=e}get id(){return this._id}newId(){const e=this.id;return this.id=this.id+1,e}static onMessage(e,t){if(r=t.data,!(Array.isArray(r)&&r.length>=2))return;var r;const[n,i,o]=t.data,s=e._callbacks[n];s&&(delete e._callbacks[n],s(i,o))}static isServiceWorker(e){return void 0!==e.controller}postMessage(e){const t=this,r=this.newId(),n=[r,e];return new Promise((function(e,o){var s;if(t._callbacks[r]=function(t,r){if(t)return o(new Error(t.message));e(r)},i.isServiceWorker(t._worker)){const e=new MessageChannel;e.port1.onmessage=function(e){i.onMessage(t,e)},null===(s=t._worker.controller)||void 0===s||s.postMessage(n,[e.port2])}else t._worker.postMessage(n)}))}}},3992:(e,t,r)=>{r.d(t,{GL:()=>o,HJ:()=>s,SF:()=>c,UM:()=>a,ho:()=>d,iE:()=>l,t_:()=>u});let n=[],i=!1;const o=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return s((()=>e(...r)))},s=(e,t)=>{if(!i){const r=window.setTimeout(e,t);return()=>window.clearTimeout(r)}let r;const o=()=>{void 0!==r&&i&&n.length<1e4&&n.push([r,performance.now()]),r=void 0},s=[window.blockme(                                                                    ),window.setTimeout(o,t)];return()=>{void 0===r&&s.forEach((e=>window.clearTimeout(e)))}},a=(e,t)=>{if(!i){const r=window.setInterval(e,t);return()=>window.clearInterval(r)}let r=!1,n=()=>{};const o=window.setInterval((()=>{n=s((()=>{r||e()}))}),t);return()=>{r=!0,n(),window.clearInterval(o)}},u=e=>new Promise(((t,r)=>e.then(o(t),o(r)))),c=e=>{const t=(r=e,()=>u(r()));var r;return()=>new Promise((e=>s((()=>e(t())))))},l=()=>{const e=n;return n=[],e},d=e=>{i=e}},2851:(e,t,r)=>{r.d(t,{oQ:()=>P,a9:()=>g,Ue:()=>p,D8:()=>E,BT:()=>S,VS:()=>_,xH:()=>v,g_:()=>b,p4:()=>k,UI:()=>m,vP:()=>y,bw:()=>D,YP:()=>h});var n=r(2688),i=r(365),o=r(3735),s=r(6567),a=r(3328),u=r(2652);function c(e){let t=e,r=[],n=!1;return{addListener(e){if(n)return()=>{};let i=t;const o=()=>{Object.is(t,i)||(i=t,e(t))};r=[...r,o];return()=>{r=r.filter((e=>e!==o))}},notify(e){if(n)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,r.forEach((e=>e())))},terminate(){n=!0,r=[]}}}function l(e,t){let r=0;return function(){try{if(r++>0)throw new Error(e);return t(...arguments)}finally{r--}}}function d(e,t){let r=[...new Set(e)].filter((e=>"final"!==e.state));if(0===r.length)return{state:"final",onStateChange:()=>()=>{}};const n=()=>0===r.length?"final":r.some((e=>"might_change"===e.state))?"might_change":"nominal",[i,o]=f(n(),(e=>"might_change"!==e&&t())),s=()=>o(n());return r.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":r=e.filter((e=>"final"!==e.state)),s();break;case"might_change":o("might_change");break;case"nominal":s();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),i}function f(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:r,notify:n,addListener:i}=c(e),o={state:e,onStateChange:i},s=l("Disallowed recursion in Branch.",(e=>{if("final"===o.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{null==t||t(e),o.state=e,n(e)}finally{"final"===e&&r()}}));return[o,s]}function p(e){const[t,r,n]=function(){const[e,t]=f("nominal"),r=l("Disallowed recursion in Branch.",(r=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const n=e.state;try{t("might_change"),r()}finally{t(n)}}));return[e,r,()=>t("final")]}(),[i,o]=I(t,e);return[i,e=>r((()=>o(e))),n]}function g(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function h(e){return t=>{const r=t.onChange(e);return e(t.current),r}}function m(e,t){if(t){const[r,n]=I(t.branch,e(t.current));return t.onChange((t=>n(e(t)))),r}return t=>m(e,t)}function _(e,t){return t?v(m(e,t)):t=>v(m(e,t))}function v(e){if("final"===e.branch.state)return e.current;const[t,r]=function(e,t){let r=t;const n=[e.state,r.state].includes("might_change")?"might_change":"nominal",[i,o]=f(n),s=e=>t=>{switch(t){case"final":o(e().state);break;case"might_change":o("might_change");break;case"nominal":"might_change"===e().state?o("might_change"):o("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(s((()=>r)));const a=s((()=>e));let u=r.onStateChange(a);return[i,e=>{r=e,u(),u=e.onStateChange(a),a(r.state)}]}(e.branch,e.current.branch),[n,i]=I(t,e.current.current);let o=e.current.onChange(i);return e.onChange((e=>{o(),o=e.onChange(i),r(e.branch),i(e.current)})),n}function b(e,t,r){if(!r)return r=>b(e,t,r);let n=e;return m((e=>(n=t(n,e),n)),r)}function y(){if(0===arguments.length||O(arguments.length<=0?void 0:arguments[0]))return w(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,o.zG)(Object.values(e),(e=>w(...e)),m((0,o.ls)(a.Su(((e,r)=>[t[e],r])),Object.fromEntries)))}function w(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return g([]);if(1===t.length)return m((e=>[e]))(t[0]);let n=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");n=!0}))));const i=t.map((0,u.vg)("branch")),o=()=>{n&&(n=!1,c(t.map((e=>e.current))))},s=d(i,o),[a,c]=I(s,t.map((e=>e.current)));return a}function k(e){const[t,r,a]=p(s.YP);return e.then(i.F2).catch((0,o.ls)(n.w,i.t$)).then((0,o.ls)(s.G,r,a)),t}function E(e){const t=e.hasOwnProperty("equals")?e.equals:e;return function(e){return t=>{if("final"===t.branch.state)return t;let r=s.YP;return m((t=>{if(s.Wi(r))return r=s.G(t),t;const n=e(r.value,t);return r=s.G(n),n}),t)}}(((e,r)=>t(e,r)?e:r))}function S(e){return t=>{const[r,n]=function(e){const[t,r]=f(e.state),n=e.onStateChange(r);return[t,()=>{n(),r("final")}]}(t.branch),[i,a]=I(r,t.current);let u=s.G(t.onChange(a));return e((()=>(0,o.zG)(u,s.UI((e=>{u=s.YP,e(),n()}))))),i}}function P(e){return O(e)?e:g(e)}function D(e){return t=>(h(e)(t),t)}function I(e,t){if("final"===e.state)return[g(t),()=>{}];const r=c(t);e.onStateChange((e=>{"final"===e&&r.terminate()}));let n=t;return[{get current(){return n},onChange:r.addListener,branch:e},l("Disallowed recursion in Ref.",(e=>{n=e,r.notify(n)}))]}function O(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},2116:(e,t,r)=>{r.d(t,{K4:()=>u,UI:()=>d,VS:()=>p,YO:()=>m,ak:()=>h,bw:()=>f,dQ:()=>c,of:()=>l,vP:()=>g});var n=r(7582),i=r(2851),o=r(3735),s=r(2652),a=r(4923);const u=e=>(0,o.ls)((t=>{var{previousState:r}=t,i=(0,n._T)(t,["previousState"]);return e(i)}),(e=>({value:e,state:i.a9(void 0)}))),c=o.yR,l=(0,o.ls)(o.a9,u),d=e=>t=>(0,o.ls)(t,(0,s.rO)({value:e})),f=e=>t=>(0,o.ls)(t,(0,s.rO)({value:(0,s.bw)(e)}));function p(e){return t=>r=>{var{previousState:o,onServiceStop:s}=r,a=(0,n._T)(r,["previousState","onServiceStop"]);const u=b(),c=t(Object.assign({previousState:Array.isArray(o)?o[0]:void 0,onServiceStop:u.onServiceStop},a)),l=b(),d=e(c.value)(Object.assign({previousState:Array.isArray(o)?o[1]:void 0,onServiceStop:l.onServiceStop},a));return s(u.stop),s(l.stop),{value:d.value,state:i.vP(c.state,d.state)}}}function g(e){return t=>{var{previousState:r}=t,s=(0,n._T)(t,["previousState"]);const u=v(r)?r:{},c=(0,o.zG)(e,a.Su(((e,t)=>t(Object.assign({previousState:u[e]},s)))));return{value:(0,o.zG)(c,a.UI((e=>e.value))),state:(0,o.zG)(c,a.UI((e=>e.state)),(e=>i.vP(e)))}}}function h(e,t){return r=>(0,o.ls)((0,s.rO)({previousState:_}),(s=>{var{onServiceStop:a}=s,u=(0,n._T)(s,["onServiceStop"]);const c=b(),l=r(Object.assign({onServiceStop:c.onServiceStop},u)),d=b(),f=t(l.value)(Object.assign(Object.assign({onServiceStop:d.onServiceStop},u),{previousState:u.previousState[e]}));return a(c.stop),a(d.stop),{value:(0,o.zG)([l.value,f.value],(t=>{let[r,n]=t;if(!v(r))throw new Error;return Object.assign(Object.assign({},r),{[e]:n})})),state:(0,o.zG)(i.vP(l.state,f.state),i.UI((t=>{let[r,n]=t;if(!v(r))throw new Error;return Object.assign(Object.assign({},r),{[e]:n})})))}}))}function m(e){return t=>(0,o.ls)((0,s.rO)({previousState:(0,o.ls)(_,(t=>t[e]))}),t,(0,s.rO)({value:t=>({[e]:t}),state:i.UI((t=>({[e]:t})))}))}function _(e){return v(e)?e:{}}function v(e){return"object"==typeof e&&null!==e}function b(){const e=[];return{stop:()=>{for(;e.length>0;)e.shift()()},onServiceStop:t=>e.push(t)}}},6967:(e,t,r)=>{r(2497),r(5165)},8612:(e,t,r)=>{r.d(t,{lg:()=>h,Bt:()=>_});var n=r(7582),i=r(1500),o=r(3735),s=r(6567),a=r(2751),u=r(2652);class c{constructor(e,t,r,n){this.userId=e,this.network=t,this.api=r,this.logger=n,this.tag="appnexus",this.ttlInSeconds=86400,this.usedForThirdPartyData=!0,this.url="https://ib.adnxs.com/getuidj",this.invalidAliases=["","0","-1"]}getId(){return this.logger.debug("identities[appnexus]: start HTTP request"),(0,u.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.blockme(         ).then((e=>(this.logger.debug("identities[appnexus]: end HTTP request"),{type:"attempted",result:(0,o.zG)((0,s.DT)((e=>this.isValidAlias(e.uid)))(e),(0,s.UI)((e=>e.uid)))})),(e=>({type:"attempted",result:s.YP})))}reset(){return Promise.resolve()}isValidAlias(e){return!!e&&-1===this.invalidAliases.indexOf(e)}}class l{constructor(e,t,r,n,i){this.config=e,this.network=t,this.api=r,this.userId=n,this.logger=i,this.tag="pxid",this.ttlInSeconds=86400,this.usedForThirdPartyData=!1,this.url=`https://05f14972-530d-4235-a941-d79be44f229b.${this.config.pxidHost}/${this.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}getId(){return this.logger.debug("identities[pxid]: start HTTP request"),(0,u.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.blockme(     ).then((e=>(this.logger.debug("identities[pxid]: end HTTP request"),{type:"attempted",result:(0,s.ij)(e.uid)})),(e=>({type:"attempted",result:s.YP})))}reset(){return(0,u.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}var d=r(2851),f=r(4923),p=r(2197);const g=p.ff((e=>void 0===e));class h{constructor(e,t,r,n,i){this.metrics=e,this.trace=t,this.permutiveData=r,this.identityProviderEnv=n,this.logger=i,this.providers={};const s=this.getCachedIdentitiesAndMigrateIfRequired(),[c,l]=d.Ue(s);this.identityMapRef=c,this.setIdentityMap=l,c.onChange((0,o.ls)(f.z7((e=>!m.has(e))),(0,u.bw)((e=>{this.logger.debug("[identities] Persisting",e),this.permutiveData.setData("identities",e)})))),this.ref=(0,o.zG)(c,d.UI((0,o.ls)(f.UI((e=>e.value)),f.hX(g))),d.D8(f.Eh(a.Eq))),this.thirdParty=this.blockme(                    )}get identities(){return this.identityMapRef.current}prepareThirdPartyIdentities(){this.logger.debug("[Identities]","loading 3rd party identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=this.trace.startSpan("load_tpd_ids"),r=[{load:e=>{return t=e.config,r=e.network,n=e.api,i=e.userId,o=e.logger,(0,s.G)(new l(t,r,n,i,o));var t,r,n,i,o}},{load:e=>{return t=e.userId,r=e.network,n=e.api,i=e.logger,(0,s.G)(new c(t,r,n,i));var t,r,n,i}},{load:e=>(e.cookies,e.messages,s.YP)},{load:e=>(e.cookies,s.YP)},{load:e=>(e.metrics,e.permutiveData,e.permutive,e.messages,s.YP)}],n=(0,i.oA)(r.map((e=>e.load(this.identityProviderEnv)))).blockme(                                                                                                                       );return Promise.all(n).then((e=>e.map((e=>{let[t,r]=e;return this.providers[t.tag]=t,this.mapTPDIdentityIfPresent(t.tag,r,t.ttlInSeconds)})))).then((e=>this.setIdentities(e))).then((0,u.bw)((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),t.finish()})))}getPrioritizedIdentities(e){const t={default:0,appnexus:1,pxid:1},r=Object.entries(e).map((e=>{let[t,{id:r,expiry:n,priority:i}]=e;return Object.assign(Object.assign(Object.assign({tag:t},r?{id:r}:{}),n?{expiry:n}:{}),void 0!==i?{priority:i}:{})})),n=r.filter((e=>((e,t)=>!!e.id&&!(0,i.t9)(a.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),o=r.filter((e=>((e,t)=>!!e.id&&!!(0,i.t9)(a.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),u=(0,i.DZ)((e=>(0,s.ij)(e.priority)))(n),c=u.length>0?Math.max(...u):0,l=n.map((e=>void 0!==e.priority?Object.assign(Object.assign({},e),{priority:e.priority}):Object.assign(Object.assign({},e),{priority:c+1}))),d=o.map((e=>void 0===t[e.tag]?{tag:e.tag,id:e.id,priority:c+v}:{tag:e.tag,id:e.id,priority:c+b}));return l.concat(d)}getIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>!!t.value))}parseCustomerDefinedIdentities(e){const t=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,r=e=>{throw new Error(e)},n=e=>(e.forEach((e=>{(e=>"string"==typeof e.id&&"string"==typeof e.tag)(e)||r(t),(e=>"email_sha256"!==e.tag||h.emailSHA256Regex.test(e.id))(e)||r("Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")})),e);return"string"==typeof e?(i=e).length>0?[{id:i,tag:"default"}]:r(t):Array.isArray(e)?n(e):r(t);var i}extractIdentifyFromQueue(e){let{global:t}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=()=>t.q.findIndex((e=>"identify"===e.functionName)),i=(e,r)=>{if(e<0)return r;const o=t.q.splice(e,1)[0],s=this.parseCustomerDefinedIdentities(o.arguments[0]);return i(n(),r.concat(s))};return i(n(),r)}setIdentities(e){const t=e.reduce(((e,t)=>{let{tag:r,id:n,expiry:i,priority:o}=t;return void 0===this.identities[r]&&this.logger.debug(`identities[${r}]: added`),e[r]=Object.assign(Object.assign(Object.assign({},n?{value:n}:{}),i?{expiry:i}:{}),void 0!==o?{priority:o}:{}),e}),{}),r=this.ref.current;this.setIdentityMap(Object.assign(Object.assign({},this.identities),t));const n=this.ref.current;return{identifyRequestRequired:()=>!f.xb(n)&&!f.Eh(a.Eq).equals(r,n)}}reset(){return(0,n.mG)(this,void 0,void 0,(function*(){this.setIdentityMap({}),yield Promise.all(Object.values(this.providers).map((e=>e.reset())))}))}getFilteredIdentities(e){return(0,u.m8)(...Object.entries(this.identities).filter((t=>{let[r,n]=t;return e(r,n)})).map((e=>{let[t,{value:r,expiry:n,priority:i}]=e;return(0,o.bc)(t,Object.assign(Object.assign({id:r},n?{expiry:n}:{}),void 0!==i?{priority:i}:{}))})))}shouldAskForNewIdentity(e){var t;const r=(0,s.ij)(null===(t=this.identities)||void 0===t?void 0:t[e.tag]);return(0,s.g_)((()=>!0),this.isIdentityExpired)(r)}getCachedTPDIdentity(e){return this.identities[e]?(0,s.ij)(this.identities[e].value):s.YP}mapTPDIdentityIfPresent(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:86400;const n=()=>Date.now()+Math.floor(1e3*r);return(0,s.g_)((()=>({tag:e,expiry:n()})),(t=>({tag:e,id:t,expiry:n()})))(t)}retrieveIdentity(e){return e.block().then((t=>"skipped"===t.type?(0,o.bc)(e,s.YP):(0,o.zG)(t.result,(t=>this.metrics.track({name:(0,s.pC)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(r=>(0,o.bc)(e,t.result)))))}isIdentityExpired(e){return"number"==typeof e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(e=>(0,u.m8)(...Object.entries(e).filter((e=>{let[t,r]=e;return!this.isIdentityExpired(r)&&!m.has(t)}))))(this.permutiveData.getData("identities")||{})}}h.emailSHA256Regex=/^[a-f0-9]{64}$/;const m=new Set(["public","email","email_md5","email_sha256","ip_address"]),_=(e,t,r,n,o)=>{const s=(e,t)=>{const r=["(null)"];return r.indexOf(e)>-1||!!w[e]||(0,i.jV)(a.Eq)(t,r).length>0},u=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,c={"be668577-07f5-444d-98e0-222b990951b1":s,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,r)=>["thestudentroom.co.uk"].some((e=>r.indexOf(e)>-1))&&(0,i.jV)(a.Eq)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":s,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":u,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":u,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e},l={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!y[e]},d=c[e]||l[t];return!!d&&d(o,r,n)},v=2,b=3,y={},w={}},7658:(e,t,r)=>{r.d(t,{z:()=>n});class n{ingestIfEligible(e){return Promise.resolve()}}},922:(e,t,r)=>{r.d(t,{CL:()=>l,D0:()=>i,ED:()=>o,EW:()=>d,MU:()=>g,PH:()=>c,Uy:()=>a,eV:()=>s,jH:()=>f,mL:()=>p,t2:()=>u});var n=r(9853);const i=(0,n.MU)("engagement_edge_only",!0),o=(0,n.MU)("segment_transition_edge_only",!0),s=(0,n.MU)("track_form_submission",!0),a=(0,n.MU)("track_pageview_complete",!0),u=(0,n.MU)("track_pageview_engagement",!0),c=((0,n.$S)("sync_segments_cookie",!1),(0,n.$S)("track_slot_clicked",!0)),l=(0,n.$S)("track_slot_rendered",!0),d=(0,n.$S)("track_slot_viewable",!1),f=(0,n.$S)("track_targeting_keys",!1),p="_psegs",g=6e5},4673:(e,t,r)=>{r.d(t,{U:()=>n});const n={$ip_address:"$ip_address",$ip_address_hash:"$ip_address_hash",$ip_geo_info_city:"$ip_geo_info_city",$ip_geo_info_continent:"$ip_geo_info_continent",$ip_geo_info_country:"$ip_geo_info_country",$ip_geo_info_postal_code:"$ip_geo_info_postal_code",$ip_geo_info_province:"$ip_geo_info_province",$ip_isp_info_autonomous_system_organization:"$ip_isp_info_autonomous_system_organization",$ip_isp_info_isp:"$ip_isp_info_isp",$ip_isp_info_organization:"$ip_isp_info_organization"}},8975:(e,t,r)=>{r.d(t,{v:()=>o});class n{constructor(e,t,r,n,i,o,s){this.logger=e,this.permutive=t,this.id=r,this.segmentCode=n,this.triggerType=i,this.config=o,this.workspaceLevelConfig=s,this.prefix="[Activation]"}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const r={reaction_id:this.id,type:e};this.logger.warn(this.prefix,"Tracking is disabled",r)}}var i=r(9853);class o{constructor(e,t,r){this.logger=e,this.permutive=t,this.clientContext=r,this.optimisedActivationsConfig={dfp:{dfp:[167830,87804,89637,149139,154203,71320,137517,73318,153911,74638,153917,75265,71357,64282,104930,157386,71359,75256,74637,71363,71335,108465,175305,106262,72655,114024,71362,64285,87790,77003,167819,71331,105788,108467,70823,157387,97629,175306,130174,71322,71330,165424,71334,71326,162862,162291,71373,106369,162859,77686,84921,121319,144227,167833,75759,172706,71350,75261,71351,75257,70830,163344,107366,71340,89720,172701,106846,141942,104900,72364,71323,150863,71372,75692,121314,87789,165425,117846,64284,77004,71333,71364,107952,71370,87794,107944,107181,166275,71355,74641,175339,107955,71328,66079,175441,71369,85169,71352,149158,70826,75259,107934,70822,153918,167818,99463,71339,83662,167813,157486,106367,107349,173313,84919,153914,70820,71332,70755,84920,71341,87799,99552,71356,153377,153919,133537,106359,75263,107953,70819,84918,99551,175326,163437,92375,71329,175407,140190,86187,146377,107956,153913,158455,70818,108466,73725,67259,105786,84684,127999,106260,71365,167815,71319,70732,145050,127662,163345,130172,87800,153915,172563,117840,107935,107930,71366,107933,107945,71360,154204,107185,172703,105789,72145,71336,114027,89487,71367,70744,77241,100759,70828,92370,87797,166117,136664,150865,107937,108468,153916,157381,175340,107943,75258,166270,87798,158299,98735,77002,121318,175308,130773,87788,166272,71318,98736,162860,108464,146967,166273,107587,84914,71353,70821,83289,71327,71361,97630,157389,131062,131063,84691,141170,113666,162865,106363,107325,172702,166528,146379,107940,75262,141172,77e3,105742,71354,75230,71321,70825,87801,71324,83663,172704,166838,150874,71325,110125,153718,71343,141086,104901,87796,106247,105785,84932,166696,157383,122778,162863,109747,67262,117844,117841,153488,149159,84693,84692,162864,75267,71337,67201,157388,105783,157326,89635,158302,172708,73727,163434,106372,167829,113243,71358,167834,89638,107950,87791,166276,162391,65230,162861,130765,167816,84929,140612,117842,71371,175310,107345,130179,84915,167832,106263,107951,67256,67257,71342,89485,142630,87803,71345,74640,107942,166268,172705,71349,87792,66482,117849,175338,71368,107837,67264,124432,153912,166271,73313,84689,105792,175408,93357,84930,89484,150875,109745,83291,130180,87793,87795,108463,167831,71344,157390,158457,110124,106849,142631,175307,172707,107904,109746,130772,75266,146380,107186,162867,75260,153380,105782,77001,134494,157384,107067,141169,107954,77244,163349,71338,89634,104928,75264,73724,106938,107588,89486,176851],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[],freewheel:[]}}getSpecializedActivations(e){return this.optimisedActivationsConfig[e]}getActivations(e){return(0,i.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new n(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,r=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(n=t).operator?n.criteria.every(r):n.criteria.some(r));var n}}},9853:(e,t,r)=>{r.d(t,{$S:()=>s,Hn:()=>i,MU:()=>o});const n={piano:{auto_init:!1,activationConfigs:[]},web:{auto_init:!1,activationConfigs:[]},dfp:{auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]}},i=e=>{const t=n[e];return(e,r)=>{var n;return null!==(n=null==t?void 0:t[e])&&void 0!==n?n:r}},o=i("web"),s=i("dfp");i("facebook_pixel_v2")},2836:(e,t,r)=>{r.d(t,{z:()=>o});var n=r(3030);class i{constructor(e){this.context=e}getContext(){return this.context}updateContext(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((e=>{let[t,r]=e;this.context[t]=r}))}}class o extends i{constructor(e){super(e)}getClient(){var e;const t=null!==(e=document.title)&&void 0!==e?e:"";return Promise.resolve({type:"web",user_agent:navigator.userAgent||"",url:(0,n.bk)(window.location.href),domain:window.location.hostname||"",title:t,referrer:(0,n.bk)(document.referrer)})}}},389:(e,t,r)=>{r.d(t,{p:()=>o});var n=r(3577);const i="permutive-pvc";class o extends((0,n.h)(i)){constructor(e){super(e)}}},5865:(e,t,r)=>{r.d(t,{J:()=>i});var n=r(3577);class i extends((0,n.h)("permutive-unprocessed-pba")){constructor(e){super(e)}}},3577:(e,t,r)=>{r.d(t,{h:()=>a});var n=r(3735),i=r(6567),o=r(7554);const s=e=>t=>class extends t{constructor(){super(...arguments),this.key=e}put(e){return this.db.then((t=>t.put(e,this.key))).then(n.Q1)}getIfPresent(){return this.db.then((e=>e.get(this.key))).then(i.ij)}reset(){return this.db.then((e=>e.delete(this.key)))}},a=e=>(0,n.zG)(class{constructor(e){this.db=Promise.resolve((0,o.E)(e.namespace,e.logger,e.consentTracking))}},s(e))},5700:(e,t,r)=>{r.d(t,{LP:()=>o,dG:()=>n,eP:()=>i});const n=4096,i=`Cookie exceeds maximum supported size of ${n} bytes for most browsers.`,o="Cookie is missing required parameters."},5461:(e,t,r)=>{r.d(t,{S:()=>u});var n=r(3735),i=r(5700);class o{constructor(e,t,r){this.namespace=e,this.config=t,this.logger=r}makeCookie(e,t,r){return[encodeURIComponent(this.namespace.getNamespacedStorageKey(e)),"=",t?encodeURIComponent(t):"","; expires=",r,"; domain=",this.config.cookieDomain,"; path=/; samesite=none; secure"].join("")}setCookie(e,t){var r;if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:n,cookieDomain:o}=null!==(r=this.config)&&void 0!==r?r:{};throw this.logger.warn(`Unable to set cookie. ${i.LP}`,{value:t,cookieName:e,cookieExpiry:n,cookieDomain:o}),new Error(i.LP)}const n=this.makeCookie(e,t,this.config.cookieExpiry);if(n.length>i.dG)throw this.logger.warn(`Unable to set cookie ${this.namespace.getNamespacedStorageKey(e)}. ${i.eP}`),new Error(i.eP);return this.logger.debug(`Setting cookie ${n}`),document.cookie=n,!0}getCookie(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e:this.namespace.getNamespacedStorageKey(e),r=new RegExp("\\b"+encodeURIComponent(t)+"=([^;]+)").exec(document.cookie);return null!==r?decodeURIComponent(r[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.makeCookie(e,void 0,"Thu, 01 Jan 1970 00:00:00 UTC");return this.logger.debug(`Deleting cookie ${t}`),document.cookie=t,!0}}var s=r(4769);const a=e=>{const{logger:t,consentTracking:r}=e,n=e=>(t.debug(`Cookie: Failed to set cookie ${e} as consent is revoked`),!1);return e=>class extends e{constructor(){super(...arguments),this.setCookie=(0,s.v)(super.setCookie.bind(this),n,r.isRevoked)}}},u=(e,t,r,i)=>new((0,n.zG)(o,a({consentTracking:i,logger:r})))(e,t,r)},9773:(e,t,r)=>{r.d(t,{S:()=>l});var n=r(3735),i=r(2688),o=r(787),s=r(365);class a{constructor(e){this.namespace=e}getExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);return window.localStorage.getItem(t)}getExternalJsonData(e){const t=this.getExternalData(e);return null===t?null:(0,o.A)(t)}setExternalData(e,t){const r=this.namespace.getNamespacedStorageKey(e);try{window.localStorage.setItem(r,t)}catch(e){}}setExternalJsonData(e,t){return(0,n.zG)((r=t,(0,s.Y3)((function(){var e=JSON.stringify(r);if("string"!=typeof e)throw new Error("Converting unsupported structure to JSON");return e}),n.yR)),(0,s.UI)((t=>this.setExternalData(e,t))),(0,s.g_)((e=>{throw(0,i.w)(e)}),n.Q1));var r}removeExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);window.localStorage.removeItem(t)}}var u=r(4769);const c=e=>{const{logger:t,consentTracking:r}=e,n=e=>{t.debug(`External Data: Failed to set key ${e} as consent is revoked`)},i=n,o=n;return e=>class extends e{constructor(){super(...arguments),this.setExternalData=(0,u.v)(super.setExternalData.bind(this),i,r.isRevoked),this.setExternalJsonData=(0,u.v)(super.setExternalJsonData.bind(this),o,r.isRevoked)}}},l=(e,t,r)=>new((0,n.zG)(a,c({consentTracking:r,logger:t})))(e)},342:(e,t,r)=>{r.d(t,{SX:()=>o});class n{constructor(){this.prefix="[Permutive]",this.debugStyle=["color: blue"].join(";")}log(){return console.log.bind(window.console,this.prefix)(...arguments)}debug(){return console.debug.bind(window.console,"%c%s",this.debugStyle,this.prefix)(...arguments)}warn(){return console.warn.bind(window.console,this.prefix)(...arguments)}error(){return console.error.bind(window.console,this.prefix)(...arguments)}}class i{log(){}debug(){}warn(){}error(){}}const o=e=>{var t;return e.loggingEnabled&&void 0!==(null===(t=window.console)||void 0===t?void 0:t.log)?new n:new i}},8491:(e,t,r)=>{r.d(t,{Q:()=>o});var n=r(3735);const i="[MESSAGES]";class o{constructor(e){this.logger=e,this.messageListenerMap={},this.replayQueue={},this.onceTracker={},this.defaultMessageOptions={withReplay:!1,once:!1}}on(e,t,r){const n=this.mergeMessageOptions(r);n.withReplay&&this.processReplayQueue(e,t);const i=s(e,this.messageListenerMap).push(t)-1;return n.once&&this.addToOnceTracker(e,i),i}once(e,t){return this.on(e,t,{once:!0})}off(e,t){if(null==t)return this.messageListenerMap[e]=[],void(this.replayQueue[e]=[]);t<0?this.logError('Index for "off" fell out of range',{index:t}):s(e,this.messageListenerMap)[t]=n.Q1}emit(e,t,r){const n=this.mergeMessageOptions(r);s(e,this.messageListenerMap).length>0?(this.logDebug(`Emitting Event: ${e}`),this.emitMessageWithPayload(e,t)):n.withReplay&&this.addToReplayQueue(e,t)}addToReplayQueue(e,t){s(e,this.replayQueue).push(t)}processReplayQueue(e,t){var r;null===(r=this.replayQueue[e])||void 0===r||r.forEach((e=>t(e)))}emitMessageWithPayload(e,t){var r;null===(r=this.messageListenerMap[e])||void 0===r||r.forEach(((r,n)=>{r(t),this.removeListenerIfSetToFireOnlyOnce(e,n)}))}addToOnceTracker(e,t){s(e,this.onceTracker).push(t)}removeListenerIfSetToFireOnlyOnce(e,t){var r;(null===(r=this.onceTracker[e])||void 0===r?void 0:r.includes(t))&&this.off(e,t)}mergeMessageOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Object.assign({},this.defaultMessageOptions),e)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(i,...t)}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(i,...t)}}const s=(e,t)=>{var r;return null!==(r=t[e])&&void 0!==r?r:t[e]=[]}},5619:(e,t,r)=>{r.d(t,{Eq:()=>d,X:()=>f,b:()=>l});var n=r(2851),i=r(2116),o=r(4268),s=r(2751),a=r(4011),u=r(3735),c=r(6567);const l=()=>({environment:"",events_count:0,os:"",sdk_version:"",segments_count:0,session_count:0,session_init_count:0,session_view_count:0}),d=o.n_({environment:s.Eq,events_count:a.Eq,os:s.Eq,sdk_version:s.Eq,segments_count:a.Eq,session_count:a.Eq,session_init_count:a.Eq,session_view_count:a.Eq}),f=e=>{const t=g(e.userId),r=(0,u.zG)(n.vP(e.userId,e.sessionId),n.UI((e=>{let[t,r]=e;return`${t},${r}`})),g),o=String(Math.random()),s=(0,u.zG)(e.sdkVariant,c.UI((e=>`-${e}`)),c.fS((()=>""))),a={environment:"web",events_count:0,os:p(window.navigator.userAgent||""),sdk_version:"v19.102.0"+s,segments_count:0};return(0,u.zG)(i.vP({session_count:t(e.sessionId),session_init_count:r(n.a9(o)),session_view_count:r(e.viewId)}),i.UI((0,u.ls)((e=>n.vP(e)),n.UI((e=>Object.assign(Object.assign({},a),e))))))},p=e=>{const t=e.toLowerCase();return t.includes("windows")?"windows":t.includes("iphone")||t.includes("ipad")?"ios":t.includes("android")?"android":t.includes("macintosh")?"macos":t.includes("linux")?"linux":"unknown"},g=e=>t=>i.dQ((r=>{let{previousState:i}=r;const c=(0,u.zG)(n.vP(e,t),n.g_(function(e){if(null!==e&&"object"==typeof e&&"scope"in e&&"lastValue"in e&&"count"in e)return e;return{scope:"",lastValue:"",count:1}}(i),((e,t)=>{let[r,n]=t;return{scope:r,lastValue:n,count:r!==e.scope?1:n!==e.lastValue?e.count+1:e.count}})),n.D8(o.n_({scope:s.Eq,lastValue:s.Eq,count:a.Eq})));return{state:c,value:(0,u.zG)(c,n.UI((e=>e.count)))}}))},7594:(e,t,r)=>{r.d(t,{p:()=>P});var n=r(7582),i=r(2688),o=r(3735),s=(r(7341),r(9384)),a=function(e,t){return function(){return t(e())}},u=function(e){return function(t){return a(t,e)}},c=o.a9,l=(o.yR,o.yR,s.F4,s.Xl,function(){return Math.random()});function d(e,t){return(0,o.zG)(l,u((function(r){return Math.floor((t-e+1)*r+e)})))}u((function(e){return e<.5}));var f=r(7927),p=r(4673),g=r(2652),h=r(5619),m=r(3328),_=r(7241),v=r(4268);function b(e){return e[0]}function y(e){return e[1]}var w=function(e){return function(t){return[e(b(t)),y(t)]}},k=r(6934),E=r(7407),S=r(3992);const P=e=>{let t=[];const r=e=>{t=[...t,...e]},s=t=>{(0,o.zG)(e.metrics.consume(),D(t),r)};let a=e.context.current;e.context.onChange((e=>{s(a),a=e}));const u="[Metrics Reporter]",c=t=>(0,o.zG)({},(0,o.ls)((0,f.dx)("continent",p.U.$ip_geo_info_continent),(t=>e.enrichers.enrich(t,!0).output)),(e=>Object.assign(Object.assign({},t),e))),l=l=>{let{beacon:d}=l;s(a);const f=t;t=[];const p=(0,o.zG)(f,_.ru((0,o.zG)(v.Uz((e=>e[0]))(h.Eq))),m.UI((0,o.ls)(_.Ri,w((0,o.ls)(_.YM,c)))),E.uU((t=>{let[r,o]=t;return k.Y3((()=>((t,r)=>(0,n.mG)(void 0,void 0,void 0,(function*(){if(!t)return e.api.metrics(r);if(!e.api.metricsBeacon(r))throw new Error("Failed to send beacon.")})))(d,{context:r,items:o})),(t=>(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.logger.error(u,...r)}(`Failed to publish metrics ${(0,i.w)(t).message}`,o),D(r)(o))))})),E.UI((0,o.ls)(m.bj,m.xH,(0,g.bw)(r),m.xb)));return p()};e.messages.on("permutive:ready",(()=>{const e=d(3e4,9e4),t=r=>(0,S.HJ)((()=>(0,n.mG)(void 0,void 0,void 0,(function*(){const r=(yield l({beacon:!1}))?5e3:e();t(r)}))),r);t(5e3),(0,g.Bf)((()=>l({beacon:!0})),{capture:!1})}))},D=e=>t=>(0,o.zG)(t,m.UI((t=>[e,t])))},4074:(e,t,r)=>{function n(e,t,r,n,s){var a;return(null!==(a=r.getData("metricsEnabled"))&&void 0!==a?a:(()=>{const e=Math.random()<=t.metricsSamplingPercentage/100;return r.setData("metricsEnabled",e),e})())?new i(e,n,s):new o}r.d(t,{g:()=>n});class i{constructor(e,t,r){this.sdkInitTimestamp=e,this.messages=t,this.logger=r,this.prefix="[Metrics]",this.pendingMetrics=[],this.pendingTimers={},this.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}})}isEnabled(){return!0}consume(){const e=this.pendingMetrics;return this.pendingMetrics=[],e}track(e){this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackTimeSinceInit(e,t){const r=(performance.now()-this.sdkInitTimestamp)/1e3;this.logDebug("timer stopped",e,r),this.track({name:e,value:r,labels:t})}startTimer(e,t){const r=performance.now(),n=this.generateRandomKey(e);return this.pendingTimers[n]={startTime:r,labels:t},n}stopTimer(e,t){const r=this.pendingTimers[t];if(r){const n=(performance.now()-r.startTime)/1e3;this.logDebug("timer stopped",e,n),this.track({name:e,value:n,labels:r.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}}class o{isEnabled(){return!1}consume(){return[]}track(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}},8317:(e,t,r)=>{r.d(t,{S:()=>s});var n=r(7582),i=r(3735),o=r(2652);class s{constructor(e,t){this.db=e,this.options=t}getSessionId(){return this.options.session_id}sessionHasChanged(){return this.options.hasChanged}static decodeSessionData(e){return e&&"object"==typeof e&&e.hasOwnProperty("session_id")&&e.hasOwnProperty("last_updated")?Object.assign(Object.assign({},e),{last_updated:new Date(e.last_updated)}):null}reset(){return this.db.delete(this.options.session_data_key)}persistSessionData(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=e.last_updated.toISOString();yield this.db.put(Object.assign(Object.assign({},e),{last_updated:t}),this.options.session_data_key)}))}static generateNewSession(e){return{session_id:(0,o.k$)(),last_updated:e}}static hasExpired(e,t,r){if(isNaN(t.getTime()))return!0;return e>new Date(t.getTime()+1e3*r)}static initialise(e,t,r){return(0,n.mG)(this,void 0,void 0,(function*(){const n={timeout_seconds:1800,session_data_key:"permutive-session",hasChanged:!1,logger:r};e.deleteCookie(n.session_data_key);const a=new Date,u=yield t.get(n.session_data_key).catch(i.gn),c=s.decodeSessionData(u),l=null===c||s.hasExpired(a,c.last_updated,n.timeout_seconds)?Object.assign(Object.assign({},s.generateNewSession(a)),{hasChanged:!0}):Object.assign(Object.assign({},c),{last_updated:a,hasChanged:!1}),d=new s(t,(0,o.PM)(n,l));return yield d.persistSessionData(l),d}))}}},4026:(e,t,r)=>{r.d(t,{S:()=>_});var n=r(3735),i=r(2688),o=r(787),s=r(365),a=r(2652),u=r(4730),c=r(926);class l{constructor(e,t,r){this.config=e,this.namespace=t,this.logger=r,this.prefix="[Data Store]",this.permutiveData={},this.permutiveDataSize=0,this.localStorageQueue=new Set,this.localStorageScheduler=new u.b(e.localStorageWriteDelay,e.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(e.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(e){return this.permutiveData[e]}setData(e,t){this.permutiveData[e]=t,this.requestWrite(e)}deleteKey(e){delete this.permutiveData[e],this.requestWrite(e)}requestWrite(e){this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writeData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writeData(e);this.localStorageQueue.clear()}buildData(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.getDataChunk("misc")),this.getDataChunk("models")),this.getDataChunk("queries")),this.getDataChunk("enrichers"))}getDataChunk(e){const t=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),r=window.localStorage.getItem(t),n=null===r?null:(0,o.A)(r);return r&&n?(this.permutiveDataSize+=2*r.length,n):{}}chunkKeyToStorageKey(e){switch(e){case"models":return this.config.permutiveDataModelsKey;case"queries":return this.config.permutiveDataQueriesKey;case"enrichers":return this.config.permutiveDataEnrichersKey;case"misc":return this.config.permutiveDataMiscKey;default:throw new Error(`Unhandled chunk key "${e}"`)}}writeData(e){this.logger.debug(`Data Store: Writing ${e} to localStorage`);const[t,r]=this.dataKeyToChunkInfo(e);return s.Y3((()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(t),JSON.stringify(r))),(t=>{const r=(0,i.w)(t);return this.logError(`Failed to set ${e}. Got ${r}`),r}))}dataKeyToChunkInfo(e){const t=e=>(0,a.eu)(this.permutiveData,e);switch(e){case"models_data":case"models_last_updated":return[this.chunkKeyToStorageKey("models"),t(d)];case"query_states":case"internal_query_states":case"external_query_states":case"state_offset":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),t(f)];case"enricher:geoip":return[this.chunkKeyToStorageKey("enrichers"),t(p)];case c.Kd:case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),t(g)];default:throw new Error(`Unhandled data key "${e}"`)}}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}const d=["models_data","models_last_updated"],f=["query_states","internal_query_states","external_query_states","state_offset","event-source-id"],p=["enricher:geoip"],g=[c.Kd,"identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"];var h=r(4769);const m=e=>{const{logger:t,consentTracking:r}=e,n=e=>(t.debug(`Data Store: Failed to write ${e} as consent is revoked`),s.F2(void 0));return e=>class extends e{constructor(){super(...arguments),this.writeData=(0,h.v)(super.writeData.bind(this),n,r.isRevoked)}}},_=(e,t,r,i)=>new((0,n.zG)(l,m({consentTracking:i,logger:r})))(e,t,r)},569:(e,t,r)=>{r.d(t,{L:()=>n});class n{constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}},7575:(e,t,r)=>{r.d(t,{u:()=>n});class n{constructor(e,t){this.metrics=e,this.messages=t,this._isRealtime=!1,this._isReady=!1}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(e){this._isRealtime=!0,this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{}),this.metrics.track({name:"sdk_user_segments_count",value:e,labels:{}})}setAsReady(){this._isReady=!0,this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{}),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},7256:(e,t,r)=>{r.d(t,{a:()=>s});var n=r(7582),i=r(3735),o=r(7927);class s{constructor(e,t,r,n,i,o,s){this.config=e,this.localStorage=t,this.logger=r,this.permutiveData=n,this.eventSourceId=i,this.cookies=o,this.externalData=s}reset(){return(0,n.mG)(this,void 0,void 0,(function*(){return this.logger.log("Resetting State"),(0,i.zG)(this.cookies.deleteCookie(this.config.cookieName),(e=>this.externalData.removeExternalData(this.config.cookieName)),(e=>(0,o.XP)({_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,_pdfps:!0,_pfws:!0,_pnativo:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-id":!0,"permutive-loaded":!0,"permutive-prebid-rtd":!0,"permutive-events-cache":!0,_pssps:!0}).forEach((e=>this.externalData.removeExternalData(e)))),(e=>this.permutiveData.reset()),(e=>this.eventSourceId.generateAndSet()),(e=>Promise.all([this.localStorage.delete(this.config.permutiveDataModelsKey),this.localStorage.delete(this.config.permutiveDataQueriesKey),this.localStorage.delete(this.config.permutiveDataEnrichersKey),this.localStorage.delete(this.config.permutiveDataMiscKey)])),i.Q1)}))}}},7274:(e,t,r)=>{r.d(t,{u:()=>n});class n{constructor(e,t,r,n,i){this.permutiveData=e,this.permutiveReset=t,this.userId=r,this.viewId=n,this.eventCollection=i}getPermutiveData(e){return this.permutiveData.getData(e)}setPermutiveData(e,t){return this.permutiveData.setData(e,t)}getStateSizeInBytes(){return this.permutiveData.getDataSize()+this.eventCollection.getStateSizeInBytes()}reset(){return this.permutiveReset.reset()}}},9117:(e,t,r)=>{r.d(t,{M:()=>a});var n=r(3735),i=r(6567),o=r(2851),s=r(2652);class a{constructor(e,t,r,i){this.config=e,this.clientContext=t,this.cookies=r,this.externalData=i;const[s,a]=o.Ue(this.getOrGenerateUserId());this.ref=s,this.setUserId=a,(0,n.zG)(s,o.YP((e=>{this.cookies.setCookie(this.config.cookieName,e),this.externalData.setExternalData(this.config.cookieName,e),this.clientContext.updateContext(["user_id",e])})))}isEqual(e){return this.ref.current===e}get(){return this.ref.current}set(e){this.setUserId(e)}getOrGenerateUserId(){return(0,i.fS)((()=>(0,i.fS)(s.k$)(this.getUserIdFromLocalStorage())))(this.getUserIdFromCookie())}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(e){const t=(0,i.DT)(s.Gz);return(0,n.zG)("cookie"===e?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),i.ij,(0,i.tS)(t))}}},9880:(e,t,r)=>{r.d(t,{W:()=>o});var n=r(2851),i=r(2652);class o{constructor(e){this.config=e;const t=e.viewId&&(0,i.Gz)(e.viewId)?e.viewId:(0,i.k$)(),[r,o]=n.Ue(t);this.ref=r,this.set=o}get(){return this.ref.current}generateAndSet(){const e=(0,i.k$)();return this.set(e),e}}},7554:(e,t,r)=>{r.d(t,{E:()=>i});var n=r(8259);const i=(e,t,r)=>{const i=window.localStorage;return(0,n.rK)(i,"[Local Storage]",e,t,r)}},9332:(e,t,r)=>{r.d(t,{u:()=>i});r(6640);var n=r(8259);const i=(e,t,r)=>{const i=window.sessionStorage;return(0,n.rK)(i,"[Session Storage]",e,t,r)}},8259:(e,t,r)=>{r.d(t,{_z:()=>l,oP:()=>c,rK:()=>f});var n=r(7582),i=r(2688),o=r(787),s=r(365),a=r(3735),u=r(4769);class c{constructor(e,t){this.storage=e,this.namespace=t}put(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const r=this.namespace.getNamespacedStorageKey(t.toString());return this.storage.setItem(r,JSON.stringify(e)),t}))}get(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=this.namespace.getNamespacedStorageKey(e.toString()),r=this.storage.getItem(t);return null===r?null:(0,o.A)(r)}))}delete(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=this.namespace.getNamespacedStorageKey(e.toString());this.storage.removeItem(t)}))}deleteStore(){return(0,n.mG)(this,void 0,void 0,(function*(){}))}}const l=e=>{const{logger:t,consentTracking:r,prefix:n}=e,i=(e,r)=>(t.debug(`${n} Failed to write ${String(r)} as consent is revoked`),Promise.resolve(r));return e=>class extends e{constructor(){super(...arguments),this.put=(0,u.v)(super.put.bind(this),i,r.isRevoked)}}},d=e=>{const{logger:t,prefix:r,storage:o}=e;return e=>class extends e{constructor(){super(...arguments),this.isSupported=null}isStorageSupported(){return null!==this.isSupported||(this.isSupported=s.Y3((()=>{const e="_permutive_ls_test";return o.setItem(e,e),o.getItem(e),o.removeItem(e),!0}),i.w),(0,a.zG)(this.isSupported,s.EQ((e=>{t.warn(`${r} Is NOT supported`,e)}),(()=>{t.debug(`${r} Is supported`)})))),this.isSupported}put(e,t){const r=Object.create(null,{put:{get:()=>super.put}});return(0,n.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ((e=>{throw e}),(()=>r.put.call(this,e,t))))}))}get(e){const t=Object.create(null,{get:{get:()=>super.get}});return(0,n.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ((()=>null),(()=>t.get.call(this,e))))}))}delete(e){const t=Object.create(null,{delete:{get:()=>super.delete}});return(0,n.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ(a.Q1,(()=>t.delete.call(this,e))))}))}deleteStore(){const e=Object.create(null,{deleteStore:{get:()=>super.deleteStore}});return(0,n.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ(a.Q1,(()=>e.deleteStore.call(this))))}))}}},f=(e,t,r,n,i)=>new((0,a.zG)(c,d({logger:n,prefix:t,storage:e}),l({logger:n,consentTracking:i,prefix:t})))(e,r)},2497:(e,t,r)=>{r.d(t,{Ec:()=>s,_8:()=>o});var n=r(6567),i=r(2652);const o=e=>{const t=e.__tcfapi,r={type:"aborted"},o=["tcloaded","useractioncomplete"];return t?(0,i.a4)((()=>a(t,"getTCData")),(()=>a(t,"getTCData").then((e=>"loaded"===(null==e?void 0:e.cmpStatus)&&o.includes(null==e?void 0:e.eventStatus))))).then((0,n.g_)((()=>r),(e=>({type:"loaded",data:e})))):Promise.resolve({type:"missing"})},s=e=>e.gdprApplies?(0,n.G)(e.vendor.consents):n.YP,a=(e,t)=>new Promise((r=>{e(t,2,(e=>{r(e)}))}))},5165:(e,t,r)=>{r.d(t,{D:()=>n});const n={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468}},6037:(e,t,r)=>{r.d(t,{C:()=>u});var n=r(7582),i=r(1500),o=r(3735);const s=(a=[[{name:"dfp",import:Promise.resolve().then(r.bind(r,4388))}],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[{name:"piano",import:Promise.resolve().then(r.bind(r,7517))}],[],[],[],[],[],[],[],[],[],[],[{name:"web",import:Promise.resolve().then(r.bind(r,4400))}],[],[],[]],(0,o.zG)((0,i.xH)(a),(0,i.u4)({},((e,t)=>Object.assign(Object.assign({},e),{[t.name]:t.import})))));var a;const u=e=>{const t=Object.entries(s).map((t=>{let[r,i]=t;return(0,n.mG)(void 0,void 0,void 0,(function*(){return e.logger.log(`Loading addon ${r}`),(yield i).load(e)}))}));return Promise.all(t)}},9658:(e,t,r)=>{r.r(t),r.d(t,{createAddon:()=>E,getCachedDFPSegments:()=>w});var n=r(7582),i=r(2688),o=r(365),s=r(3735),a=r(6567),u=r(2851),c=r(9853),l=r(2652);const d="_pdfps";r(5700);var f=r(1500),p=r(2751);let g=!1;let h=null;const m=(e,t)=>{const{logger:r}=t;(0,s.zG)(e,a.UI((e=>{!0!==g&&e.pubadsReady&&(null!=h||(h=n=>{let{slot:i}=n;const{getContentUrl:o}=i;if(!o||"function"!=typeof o)return;(0,s.zG)(o(),(0,p.pn)("&trunc=1"))&&(r.debug("DFP content URL has been truncated!"),(e=>{let{metrics:t,logger:r}=e;g||(t.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),g=!0,r.debug("DFP has exceeded targeting limit"))})(t),h&&e.pubads().removeEventListener("slotRenderEnded",h),h=null)}),e.pubads().addEventListener("slotRenderEnded",h))})))},_=(e,t,r,n)=>{const{logger:i}=t;m(e,t);(0,s.zG)(e,a.UI((e=>(e=>{e.cmd.push((()=>{const{getTargeting:t,setTargeting:o}=e.pubads(),s=t("permutive")||[],a=Object.values(r.eligibleSegments).map(String).concat(r.cloudCohorts).concat("rts"),u=(0,f.uK)((e=>a.includes(e))),{left:c}=u(s),l=n.concat(c).concat("rts");i.debug("DFP setting GPT targeting to",l),o("permutive",l)}))})(e))))};var v=r(4388);const b={liveSegments:[],cloudCohorts:[],eligibleSegments:{}},y={segments:b,getGAMKeyValues:()=>({permutive:""})},w=e=>e.getExternalJsonData(d)||[],k=(e,t,r)=>{const{logger:n,externalData:o,api:s}=t;let a=r.map(String).concat(b.cloudCohorts);n.debug("DFP is updating with targeting values",a),_(e,t,b,a);try{o.setExternalJsonData(d,a)}catch(e){const t=(0,i.w)(e),r="DFP failed to set data. Got:";n.error(r,t),s.reportError(`${r} ${t.message}`)}return((e,t)=>{let{api:r,logger:n}=e;(0,c.$S)("sync_segments_cookie",!1)?(n.debug("DFP syncing segment cookie _pdfps"),r.segmentSync({key:d,value:t})):n.debug("DFP sync segments cookie not enabled, skipping sync")})(t,JSON.stringify(a)),n.debug("DFP live segments updated to",r),r},E=e=>(0,n.mG)(void 0,void 0,void 0,(function*(){const{api:t,logger:r,activationManager:n,messages:i,externalData:c,nextGenOutput:f,userId:p,cookies:g}=e,h=yield(0,l.a4)((()=>window.googletag),(()=>!!window.googletag),{waitTimeInMs:10,maxAttempts:200,exponentialBackOff:!1});a.Wi(h)&&r.error("[DFP]: unable to find google tag script on the page"),(0,s.zG)(h,a.UI((e=>(e=>e.cmd.push((()=>e.pubads().setTargeting("prmtvsdk","web"))))(e))));y.getGAMKeyValues=()=>Object.assign(Object.assign({},(0,s.zG)((0,v.generateProjectSpecificKVs)(e),o.Vn((e=>{var r;return r=e,t.reportError(`[DFP] ${r}`,p.get()),e})),o.fS((()=>({}))))),{permutive:y.segments.liveSegments.join(",")}),b.eligibleSegments=(e=>{const t=e.getSpecializedActivations("dfp"),r={};for(const e of t.dfp)r[e]=e;for(const e of Object.keys(t.dfp_legacy)){const n=Number(e);r[n]=t.dfp_legacy[n]}return r})(n);const m=(0,s.zG)(f.queryLanguageCohorts.all,u.UI((e=>(r.debug("DFP received QL segments",{qlSegments:e}),((e,t)=>e.filter((e=>e in t)).map((e=>t[e])))(e,b.eligibleSegments)))),u.D8(l.cO));return(0,s.zG)(u.vP(m,f.cloudCohorts.gam),u.YP((0,l.Z_)(t,p,(t=>{let[n,i]=t;r.debug("DFP received updated cohorts",{filteredQlSegments:n,cloudCohorts:i}),b.cloudCohorts=i,b.liveSegments=k(h,e,n)})))),r.debug("DFP initialised with segments",b),i.on("permutive:reset",(0,l.Z_)(t,p,(()=>{r.debug("DFP received 'permutive:reset' event"),c.removeExternalData(d),g.deleteCookie(d)}))),i.emit("permutive:dfp:ready"),y}))},4388:(e,t,r)=>{r.r(t),r.d(t,{generateProjectSpecificKVs:()=>P,load:()=>d});var n=r(2688),i=r(365),o=r(3735),s=r(922),a=r(9853),u=r(2652),c=r(9658);const l={},d=e=>{(0,a.Hn)("dfp")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["dfp",{}]}),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>f(e)))},f=e=>{e.permutive.ready((0,u.Z_)(e.api,e.userId,(()=>w(e.metrics))),"realtime");k(e.externalData);(0,o.zG)(P(e),i.tS((e=>i.Y3((()=>(0,u.qh)(e).forEach((e=>{let[t,r]=e;googletag.pubads().setTargeting(t,r)}))),n.w))),i.Vn((t=>e.api.reportError(`[DFP:load], ${t}`,e.userId.get())))),_(e.permutive),googletag.cmd.push((()=>{v(e.permutive),b(e.permutive)})),window.addEventListener("message",g(e.permutive),!1)},p=e=>{let{advertiserId:t,campaignId:r,lineItemId:n,creativeId:i}=e;return{advertiser_id:(0,u.rH)(t),campaign_id:(0,u.rH)(r),line_item_id:(0,u.rH)(n),creative_id:(0,u.rH)(i)}},g=e=>t=>{var r;try{const n=JSON.parse(t.data);if(!n.permutive_type||"google_ad_click"!==n.permutive_type)return;const{ad_unit_path:i,creative_id:o,advertiser_id:s,order_id:a,line_item_id:u}=null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},c=p({lineItemId:u,advertiserId:s,campaignId:a,creativeId:o});let d;Object.keys(l).some((e=>{const{slot:t,creative_id:r}=l[e];if((null==t?void 0:t.ad_unit_path)===i&&r===c.creative_id)return d=l[e],!0})),d=null!=d?d:Object.assign(Object.assign({},c),{is_empty:!1}),h(e,d)}catch(e){}},h=(e,t)=>{s.PH&&t&&e.track("SlotClicked",t)},m=(e,t,r)=>{l[t]=r,y(e,r),S(e,t)},_=e=>{const t=googletag.pubadsReady&&googletag.pubads().getSlots();t&&t.forEach((t=>{const r=t.getResponseInformation();if(!r)return;const n=Object.assign(Object.assign({},p(r)),{is_empty:!1,service_name:"publisher_ads",slot:E(t)}),i=t.getSlotElementId();m(e,i,n)}))},v=e=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{const r=Object.assign(Object.assign({},p(t)),{is_empty:t.isEmpty,service_name:t.serviceName,slot:E(t.slot)});if(t.size){const[e,n]=t.size;"number"==typeof e&&"number"==typeof n&&(r.width=e,r.height=n)}const n=t.slot.getSlotElementId();m(e,n,r)}))},b=e=>{s.EW&&googletag.pubads().addEventListener("impressionViewable",(t=>{let{slot:r,serviceName:n}=t;const i=r.getResponseInformation();if(!i)return;const o=Object.assign(Object.assign({},p(i)),{service_name:n,slot:E(r)});e.track("SlotViewable",o)}))},y=(e,t)=>{if(!s.CL)return;var r;r=Object.assign(Object.assign({},t),{rendered_timestamp:Date.now()}),e.track("SlotRendered",r)},w=e=>{let t=0;const r=googletag.pubadsReady&&googletag.pubads().getSlots();r&&r.forEach((e=>e.getResponseInformation()&&t++));const n=0===t?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";e.track({name:n,value:1,labels:{target:"dfp"}})},k=e=>{const t=(0,c.getCachedDFPSegments)(e);googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:r}=googletag.pubads(),n=e("permutive")||[];r("permutive",[...new Set([...t.map(String),...n])])}))},E=e=>{const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return s.jH?Object.assign(Object.assign({},t),(()=>{const t={},r=[];let n=[];const i=(e,i)=>{const o="slot"===e?e=>t[e]=1:()=>{},s=i.getTargetingKeys();n=s;for(let s=0;s<n.length;s++){const a=n[s];if(void 0!==t[a]&&"service"===e)continue;const u=[],c=i.getTargeting(a);for(let e=0;e<c.length;e++)u.push(c[e].toString());u.length>0&&(o(a),r.push({key:a,value:u}))}};return i("slot",e),i("service",googletag.pubads()),{targeting_keys:r}})()):t},S=(e,t)=>{let r=!1;const n=()=>{r&&"hidden"===document.visibilityState&&h(e,l[t])},i=()=>{r=!0},o=()=>{r=!1};try{document.addEventListener("visibilitychange",n);const e=document.getElementById(t);e&&(e.addEventListener("mouseover",i),e.addEventListener("mouseout",o))}catch(e){}},P=e=>{let{userId:t,viewId:r}=e;return i.Y3((()=>({})),n.w)}},7517:(e,t,r)=>{r.r(t),r.d(t,{load:()=>i});var n=r(2652);const i=e=>{{const t=t=>{const{permutive:r}=e,i={loginRequired:function(e){r.track("PianoLoginRequired",{template_id:e.templateId,offer_id:e.offerId,term_id:e.termId,container_selector:e.containerSelector,experience:{id:e.experienceId,execution_id:e.experienceExecutionId,action_id:e.experienceActionId},start_screen:e.startScreen},{useBeacon:!0})},showTemplate:function(e){const t=e.activeMeters?JSON.parse(e.activeMeters):[];r.track("PianoShowTemplate",{template_id:e.templateId,offer_id:e.offerId,container_selector:e.containerSelector,experience:{id:e.experienceId,execution_id:e.experienceExecutionId,action_id:e.experienceActionId},meters:t.map((e=>({name:e.meterName,max_views:e.maxViews,views:e.views,views_left:e.viewsLeft,total_views:e.totalViews})))})},showOffer:function(e){r.track("PianoShowOffer",{template_id:e.templateId,offer_id:e.offerId,container_selector:e.containerSelector,experience:{id:e.experienceId,execution_id:e.experienceExecutionId,action_id:e.experienceActionId}})},startCheckout:function(e){r.track("PianoCheckoutStart",{template_id:e.templateId,offer_id:e.offerId,term_id:e.termId,container_selector:e.containerSelector,experience:{id:e.experienceId},iframe_id:e.iframeId})},checkoutComplete:function(e){r.track("PianoCheckoutComplete",{user_id:e.uid,term_id:e.termId,term_conversion_id:e.termConversionId,resource_id:e.rid,charge_amount:e.chargeAmount,charge_currency:e.chargeCurrency,started_at:"string"==typeof e.startedAt?new Date(e.startedAt).toISOString():void 0,expires_at:"number"!=typeof e.expires||Number.isNaN(e.expires)?void 0:new Date(1e3*e.expires).toISOString()},{useBeacon:!0})},checkoutClose:function(e){r.track("PianoCheckoutClose",{state:e.state})},meterActive:function(e){r.track("PianoMeterActive",{name:e.meterName,max_views:e.maxViews,views:e.views,views_left:e.viewsLeft,total_views:e.totalViews})},meterExpired:function(e){r.track("PianoMeterExpired",{name:e.meterName,max_views:e.maxViews,views:e.views,views_left:e.viewsLeft,total_views:e.totalViews})}}[t]||function(){};return(0,n.Z_)(e.api,e.userId,i)},r=function(){window.tp=window.tp||[];["loginRequired","showTemplate","showOffer","startCheckout","checkoutComplete","checkoutClose","meterActive","meterExpired"].forEach((function(e){window.tp.push(["addHandler",e,t(e)])}))};(0,n.Z_)(e.api,e.userId,(function(){window.__permutive=window.__permutive||{},window.__permutive.pianoEvents=window.__permutive.pianoEvents||[],window.__permutive.pianoEvents.forEach((function(e){t(e.name)(e.e)})),r()}))()}}},4400:(e,t,r)=>{r.r(t),r.d(t,{WebAddon:()=>P,load:()=>S});var n=r(7582),i=r(2688),o=r(365),s=r(3735),a=r(4011),u=r(6567),c=r(7209),l=r(6341),d=r(922),f=r(9853),p=r(2652);const g=(0,f.MU)("add_alchemy_entities",!1),h=(0,f.MU)("add_alchemy_taxonomy",!1);function m(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object.assign(Object.assign(Object.assign({},e&&h?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{}),e&&g?{entity_names:"$alchemy_entity_names"}:{}),{})}function _(e,t,r,n){const i=Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},{}),e),t);r.track("Pageview",i).then((e=>{e&&n.emit("permutive:event:pageview",e)}))}function v(e,t,r,n,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:u.YP;const c=b(e,t,r,n,i),l=(0,u.fS)((()=>null))(a);let d={useBeacon:s};return null!==l&&(d=Object.assign(Object.assign({},d),{unprocessedData:l})),o.track("PageviewComplete",c,d)}function b(e,t,r,n,i){return Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},n),r),{aggregations:Object.assign({PageviewEngagement:Object.assign({engaged_time:e},{completion:t})},d.ED?{SegmentEntry:Array.from(i.segmentEntryQueryCodes),SegmentExit:Array.from(i.segmentExitQueryCodes),CohortEntry:Array.from(i.cohortEntryQueryCodes),CohortExit:Array.from(i.cohortExitQueryCodes)}:{})})}var y=r(3992);const w=["mousemove","click","scroll"],k=["email","tel","submit","reset","button","file","password","radio","checkbox"],E=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],S=e=>{(0,f.Hn)("web")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["web",{auto_init:!0}]})};class P{constructor(e){this.dirtyState=!1,this.cancelEngagementTimer=()=>{},this.totalCompletion=0,this.totalEngagedTime=0,this.cancelPageviewCompleteTimer=()=>{},this.hasPageviewCompleteFired=!1,this.cleanupPageEngagementDetection=s.Q1,this.permutive=e.permutive,this.options=e,this.api=e.api,this.clientContext=e.clientContext,this.logger=e.logger,this.unprocessedPVC=e.unprocessedEvents.PageviewComplete,this.options.customProperties.overrideCustomProps(e.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0,d.Uy&&this.resetTimeout()}).bind(this),_(m(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),d.t2&&(this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval())),d.Uy&&(this.setPageviewCompleteTimeout(d.MU),(0,p.aT)((()=>{this.hasPageviewCompleteFired||v(this.totalEngagedTime,this.totalCompletion,m(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive)})))}sendFormSubmissionEvent(e){{const t=e.currentTarget,r={form:Object.assign(Object.assign(Object.assign({method:t.method||"GET",properties:this.serializeForm(t)},"string"==typeof t.id?{id:t.id}:{}),t.name&&"string"==typeof t.name?{name:t.name}:{}),t.action&&"string"==typeof t.action?{action:t.action}:{})};this.permutive.track("FormSubmission",r)}}trackEngagementInterval(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=this.updateState(e);!function(e,t,r,n,i,o){const s=Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,total_engaged_time:t},i),{completion:r,total_completion:n});o.track("PageviewEngagement",s)}(t.engaged_time,t.total_engaged_time,t.completion,t.total_completion,this.options.customProperties.getCustomProps(),this.permutive),this.hasPageviewCompleteFired||(yield function(e,t,r,n,i,o,s,a,u){const c=b(e,t,s,a,u);return i.then((e=>{const t={props:c,sessionId:r,viewId:n,client:e};o.put(t)}))}(this.totalEngagedTime,this.totalCompletion,this.options.sessionManager.getSessionId(),this.options.viewId.get(),this.clientContext.getClient(),this.unprocessedPVC,m(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager))}))}reset(e){var t;return(0,n.mG)(this,void 0,void 0,(function*(){if(this.disablePageEngagementDetection(),d.Uy){const e=yield this.unprocessedPVC.getIfPresent();this.hasPageviewCompleteFired=!1,yield v(this.totalEngagedTime,this.totalCompletion,m(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive,!1,e)}this.dirtyState=!1,this.options.state.viewId.generateAndSet(),this.totalCompletion=0,this.totalEngagedTime=0,this.updateWebOptions(e),this.options.customProperties.overrideCustomProps(this.options.page||{}),this.enablePageEngagementDetection();const r={logger:this.logger,config:Object.assign(Object.assign({},this.options.config),{watson:null!==(t=this.options.watson)&&void 0!==t?t:this.options.config.watson}),clientContext:this.clientContext,api:this.api,permutiveData:this.options.permutiveData,metrics:this.options.metrics,sessionManager:this.options.sessionManager,enrichers:this.options.enrichers,network:this.options.network};(0,l.H)(r)().then((()=>{_(m(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),d.t2&&(this.cancelEngagementTimer(),this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}))}))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==k.indexOf(e.type.toLowerCase())||-1!==E.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}registerEngagementInterval(e){return(0,y.UM)((()=>{this.dirtyState&&this.trackEngagementInterval(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=e=>e instanceof Element,r=t=>e(t)?(0,u.G)(t):t.parentElement?e(t.parentElement)?(0,u.G)(t.parentElement):r(t.parentElement):u.YP;d.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>e.addEventListener("submit",(0,s.ls)(u.DT(this.canTrackPermutiveEvent("FormSubmission")),u.UI((0,p.Z_)(this.options.api,this.options.userId,this.sendFormSubmissionEvent.bind(this)))))));(0,f.MU)("track_link_click",!0)&&document.body.addEventListener("click",(0,s.ls)(u.DT(this.canTrackPermutiveEvent("LinkClick")),u.UI((e=>({event:e,anchor:(0,s.zG)(e.target,u.ij,u.tS(u.DT(t)),u.tS(r))}))),u.DZ((e=>{let{event:t,anchor:r}=e;return u.pC(r)?u.G({event:t,anchor:r.value}):u.YP})),u.UI((e=>{let{event:t,anchor:r}=e;return D(this.permutive,r,(n=t,!("_blank"===r.target||n.metaKey||n.ctrlKey||n.shiftKey||2===n.which||3===n.which)));var n}))),{capture:!0})}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),r=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:r,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,s.zG)((0,o.Y3)((0,s.ls)(this.options.getPageCompletion,Number,(e=>isNaN(e)?0:e),(0,c.uZ)(a.Df)(0,1)),i.w),(0,o.EQ)((e=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",e),0)),(e=>(this.logger.debug("Web: invoking getPageCompletion returned",e),e))));return(()=>{const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e})()}setPageviewCompleteTimeout(e){return(0,y.HJ)((()=>{this.hasPageviewCompleteFired||(v(this.totalEngagedTime,this.totalCompletion,m(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive,!1),this.hasPageviewCompleteFired=!0)}),e)}resetTimeout(){this.cancelPageviewCompleteTimer(),this.cancelPageviewCompleteTimer=this.setPageviewCompleteTimeout(d.MU)}registerPageEngagementCleanup(e){"function"==typeof e?this.cleanupPageEngagementDetection=()=>(0,o.Y3)((()=>{e(),this.cleanupPageEngagementDetection=s.Q1}),(e=>this.logger.warn("Page detection cleanup threw an error",(0,i.w)(e)))):this.logger.warn("No page detection cleanup was registered")}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,s.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(e=>this.registerPageEngagementCleanup(e))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(e,t){const r=e?window.addEventListener:window.removeEventListener;return t.forEach((e=>r(e,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||w}getEventInterval(){return this.options.eventInterval||5}canTrackPermutiveEvent(e){return t=>{var r,n;return(0,s.zG)(null===(n=null===(r=this.options)||void 0===r?void 0:r.filterPermutiveEvent)||void 0===n?void 0:n[e],u.DT((e=>"function"==typeof e)),u.tS((0,s.ls)((e=>o.Y3((()=>e(t)),(e=>new Error(`Threw an unexpected error: ${(0,i.w)(e)}`)))),o.tS(o.DT((e=>"boolean"==typeof e),(()=>new Error("Did not return a boolean")))),(0,p.bw)(o.Vn((t=>this.logger.error(`Filter predicate for "${e}" event failed`,t)))),u.Uo)),u.fS((()=>!0)))}}updateWebOptions(e){e.watson&&"object"==typeof e.watson&&"enabled"in e.watson&&"boolean"==typeof e.watson.enabled||delete e.watson,"object"==typeof e.filterPermutiveEvent&&null!==e.filterPermutiveEvent||delete e.filterPermutiveEvent;const t={addPageEngagementDetection:void 0,dirtyEvents:void 0,eventInterval:void 0,filterPermutiveEvent:void 0,getPageCompletion:void 0,page:void 0,watson:void 0};return this.options=Object.assign(Object.assign(Object.assign({},this.options),t),e)}}const D=(e,t,r)=>{if(window.location.href&&t.href){const n=0===t.href.indexOf("data:")?"NOT_URL":t.href;e.track("LinkClick",{dest_url:n},{useBeacon:r})}}},9078:(e,t,r)=>{r.d(t,{a:()=>n});class n{constructor(e){var t;this.messages=e,this.handlers={},this.messageQueue={};null===(t=window.addEventListener)||void 0===t||t.call(window,"message",(e=>{var t;"permutive"===(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.origin)&&this.handle(e)}),!1),this.messages.once("permutive:api:ready",(function(){var e;null===(e=window.postMessage)||void 0===e||e.call(window,{origin:"permutive",type:"sdk-init"},"*")}))}listen(e,t){if(e in this.handlers||(this.handlers[e]=[]),this.handlers[e].push(t),e in this.messageQueue){const t=this.messageQueue[e];if(void 0===t)return;for(let e=0;e<t.length;e++){const r=t[e];this.handle(r)}}}handle(e){var t,r,n;if(e.data.type in this.handlers)this.handlers[e.data.type].forEach((t=>{t(e)}));else{(null!==(t=(r=this.messageQueue)[n=e.data.type])&&void 0!==t?t:r[n]=[]).push(e)}}}},533:(e,t,r)=>{r.d(t,{o:()=>n,s:()=>i});class n extends Error{constructor(){super(n.defaultMessage),this.name=n.errorName}static get defaultMessage(){return"Network request failed"}}n.errorName="NetworkRequestFailedError";class i extends Error{constructor(){super(i.defaultMessage),this.name=i.errorName}static get defaultMessage(){return"Network request timed out"}}i.errorName="NetworkRequestTimeoutError"},7423:(e,t,r)=>{r.d(t,{F:()=>l});var n=r(7582),i=r(2688),o=r(3735),s=r(6567),a=r(3328),u=r(3030),c=r(533);class l{constructor(e,t,r,n,i){this.urls=e,this.config=t,this.network=r,this.metricsCollector=n,this.logger=i,this.prefix="[API]"}identify(e,t,r){const n=()=>this.blockme(                                                                                                                                                                                                                          );return this.identifyPromise?this.identifyPromise=this.identifyPromise.then(n):this.identifyPromise=b()}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",s.G(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}metricsBeacon(e){return this.network.reqWithBeacon({url:this.urls.getEndpointUrl("/internal/metrics",s.G(this.config.apiVersion)),payload:e})}track(e,t,r){const n=this.getTrackUrl(t,{isFullyEnriched:r,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:n,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBatch(e,t){const r=this.getTrackUrl(t,{isFullyEnriched:!0,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:r,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBeacon(e,t){const r=this.getTrackUrl(e,{isFullyEnriched:t,useBeacon:!0});return this.network.reqWithBeacon({url:r,payload:e})}trackBatchBeacon(e){const t=this.getTrackUrl(e,{isFullyEnriched:!0,useBeacon:!0});return this.network.reqWithBeacon({url:t,payload:e})}reset(e){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/reset",s.G(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}modelsBinary(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1})}modelsJson(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})}state(e,t,r,n,i,o){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/state",s.G("v1.0"),[["fetch_unseen",JSON.stringify(o)]]),method:"POST",payload:{group_id:t,event_source_id:r,state:JSON.stringify(n),last_seen_offset:i},contentType:"text/plain",dataType:"json",withCredentials:!1})}appnexus(e){return this.network.blockme(                                                                                        )}pxid(e){return this.network.blockme(                                                                                                                        )}queries(){const e={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],subexpressionsLookup:[],stateSyncReplays:[],propertiesLookup:[]},queries_metadata:{}},t=`${this.config.cdnBaseUrl.startsWith("dev.local:")?"http":"https"}://${this.config.cdnBaseUrl}/queries/05f14972-530d-4235-a941-d79be44f229b-amp.json`;return this.network.req({url:t,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>e))}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}uploadCohortMemberships(e,t){return this.reqWithMetrics(e,"sdk_http_upload_cohort_memberships_seconds",{url:this.urls.getCCSCohortMembershipEndpointUrl("/amp/cohorts",s.G("alpha"),[["i",t.user_id]]),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}reqWithMetrics(e,t,r){const n=e.startTimer(t,{});return this.network.bloc().then((r=>(0,o.zG)(e.stopTimer(t,n),(e=>r))))}reportError(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;return(0,n.mG)(this,void 0,void 0,(function*(){const l=(0,i.w)(e);if(this.logError("Reporting error:\n",l),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const d=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",s.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),f=e=>{this.metricsCollector.track({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};yield(0,o.zG)([c.o,c.s],a.Ew((e=>l.name===e.errorName||l.message.indexOf(e.errorName)>=0||l.message.indexOf(e.defaultMessage)>=0)),s.g_((()=>{const e=(()=>{var e,n,i,o,s,a,c,d;const f={error_message:null!==(n=null===(e=null==l?void 0:l.message)||void 0===e?void 0:e.toString())&&void 0!==n?n:"",stack_trace:null===(i=null==l?void 0:l.stack)||void 0===i?void 0:i.split("\n")},p=t?{user_id:t}:{};return Object.assign({platform:"web",sdk_version:"v19.102.0",ql_runtime_version:"v10.0.2",timestamp:r,domain:null!==(s=null===(o=null===window||void 0===window?void 0:window.location)||void 0===o?void 0:o.hostname)&&void 0!==s?s:"",url:(0,u.bk)(null===(a=null===window||void 0===window?void 0:window.location)||void 0===a?void 0:a.href),referrer:(0,u.bk)(null===document||void 0===document?void 0:document.referrer),user_agent:null!==(c=null===navigator||void 0===navigator?void 0:navigator.userAgent)&&void 0!==c?c:"",error_message:null!==(d=f.error_message)&&void 0!==d?d:String(l),stack_trace:f.stack_trace},p)})();return d(e).catch((0,o.ls)(i.w,(e=>this.logError(e))))}),(e=>(0,n.mG)(this,void 0,void 0,(function*(){return f(e.errorName)})))))}))}getTrackUrl(e,t){const{isFullyEnriched:r,useBeacon:n}=t,i=Array.isArray(e),o=!r;return this.urls.getEndpointUrl(i?"/batch/events":"/events",s.G(this.config.apiVersion),[["enrich",JSON.stringify(o)],["sdkp",JSON.stringify(!n)]])}getModelsUrl(e){const t=`https://${this.config.cdnBaseUrl}`;switch(e){case"binary":return`${t}/models/v2/05f14972-530d-4235-a941-d79be44f229b-models.bin`;case"json":return`${t}/models/05f14972-530d-4235-a941-d79be44f229b-models.json`}}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}},4586:(e,t,r)=>{r.d(t,{E:()=>a});var n=r(365),i=r(3735),o=r(533),s=r(3992);class a{constructor(){}req(e){return this.blockme( ).then((e=>(0,i.MZ)(e)))}reqWithBeacon(e){let{url:t,payload:r}=e;return null===navigator||void 0===navigator?void 0:navigator.sendBeacon(t,JSON.stringify(r))}reqImpl(e){const{url:t,dataType:r,contentType:i,method:a,withCredentials:u,timeout:c}=e;return blockme(                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      )}}},310:(e,t,r)=>{r.d(t,{s:()=>i});var n=r(6567);class i{constructor(e){this.config=e,this.PATH_JOINER_Q="?",this.PATH_JOINER_A="&"}getEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,r)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,r)}getClassificationModelsEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,r)}getAudienceMatchingEndpointUrl(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i=`${e}/${r}/audiences`;return this.getUrl("audience-matching",i,t,n)}getCCSCohortMembershipEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,r)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,r,i){const o=this.getUrlPrefix(e),s=(0,n.g_)((()=>""),(e=>`/${e}`))(r),a=`${this.config.apiProtocol}://${this.config.apiHost}${o}${s}${t}`;return this.makeUrlWithQueryParams(a,i.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const r=t.map((e=>{let[t,r]=e;return`${t}=${r}`})).join(this.PATH_JOINER_A),n=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${n}${r}`}}},2322:(e,t,r)=>{r.r(t),r.d(t,{nextGenWeb:()=>Vt,runNextGenFeaturesWeb:()=>Qt});var n=r(7582),i=r(2116);class o{constructor(){this.events=[],this.listeners=[]}newEvent(e,t){this.events.push([e,t]),[...this.listeners].forEach((r=>{this.handle(e,t,r)}))}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,r){const n="string"==typeof r.name&&e.name===r.name,i=r.name.test&&r.name.test(e.name),o=n||i;if(o)try{r.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}o&&r.once&&this.remove(r)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let r=0;r<this.events.length&&t;r++)this.handle(this.events[r][0],this.events[r][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}var s=r(2688),a=r(3735);const u=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),c=e=>({id:e.id,name:e.name,time:(f(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),l=(e,t)=>({id:e.id,time:new Date(e.time),name:t.name,properties:t.properties,session_id:t.session_id,view_id:t.view_id}),d=e=>void 0!==e.request_id,f=e=>isFinite(e)&&e instanceof Date;var p=r(4730);class g{constructor(e,t,r,n,i){this.eventHandler=e,this.api=t,this.metrics=r,this.userId=n,this.eventsCache=i,this.DEBOUNCE_TIME=500,this.MAX_DEBOUNCE_TIME=5e3,this.batch={requestData:[],requestOptions:[],processingStrategies:[]},this.scheduler=new p.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedFlushIfNotEmpty=this.scheduler.schedule(this.flush.bind(this)),this.scheduler.scheduleForPageUnload((()=>this.flushWithBeacon.bind(this)(this.batch)))}add(e,t,r){return this.batch.requestData.push(e),this.batch.requestOptions.push(t),this.batch.processingStrategies.push(r),this.debouncedFlushIfNotEmpty(this.batch),Promise.resolve()}flush(e){return this.flushIfNotEmpty(e,!1)}flushWithBeacon(e){return this.flushIfNotEmpty(e,!0)}flushIfNotEmpty(e,t){const{requestData:r,requestOptions:n,processingStrategies:i}=e,o=e=>this.api.reportError(`Error sending events batch. Got ${(0,s.w)(e)}`,this.userId.get()),u=t?(0,a.ls)((e=>this.api.trackBatchBeacon(e)),(e=>Promise.resolve())):e=>this.api.trackBatch(this.metrics,e);return r.length>0?(0,a.zG)(this.resetBatch(),(e=>this.trackMetrics(r)),(e=>u(r).then((e=>this.isBatchResponse(e)?this.onBatchResponseSuccess(e,r,n,i):(0,a.Q1)())).catch(o))):Promise.resolve()}onBatchResponseSuccess(e,t,r,n){const i=(e,t)=>{"never"!==t&&(this.eventHandler.newEvent(c(e),null),this.eventsCache.add(e,{persistOnDisk:!0}))},o=(e,t,r)=>{const n={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,time:(new Date).toISOString()};r&&r(e.error.message),console.error(e),this.eventHandler.newEvent(n,e)};return e.forEach(((e,s)=>{let{body:a}=e;const u=t[s],c=r[s],f=n[s];return d(a)?o(a,u,c.error):((e,t,r,n)=>{const o=l(e,t);return n&&n(o),i(o,r)})(a,u,f,c.success)}))}resetBatch(){this.batch={requestData:[],requestOptions:[],processingStrategies:[]}}trackMetrics(e){this.metrics.track({name:"sdk_events_batch_size_total",value:e.length,labels:{}}),this.metrics.track({name:"sdk_events_batch_size_bytes",value:2*JSON.stringify(e).length,labels:{}})}isBatchResponse(e){return!!e}}var h=r(6567),m=r(7407),_=r(1828),v=r(922);const b=(e,t,r)=>r?"deferred":y(e.name,t),y=(e,t)=>T.has(e)?"memoryOnly":x.has(e)?"never":t?"immediate":"response",w=e=>{let{event:t,requestData:r,requestOptions:n,queryManager:i,eventsBatch:o,stateSync:s,metrics:u,logger:c}=e;const l=(e,t)=>{const r=new Set(e);for(const e of t)r.delete(e);return r};return(0,a.zG)(M(t,u,i,c),m.YO("update"),m.ak("updatedSegments",(e=>{let{update:[,t]}=e;return m.tD((()=>l(new Set([...r.segments,...t.segmentsEntered]),t.segmentsExited)))})),m.ak("updatedCohorts",(e=>{let{update:[,t]}=e;return m.tD((()=>l(new Set([...r.cohorts,...t.cohortsEntered]),t.cohortsExited)))})),m.At((e=>{let{updatedCohorts:r,updatedSegments:n}=e;return()=>c.debug(`Batching ${t.name} with`,{segments:n,cohorts:r})})),m.tS((e=>{let{update:[t],updatedSegments:i,updatedCohorts:a}=e;return _.gz(m.Hi)((()=>o.add(Object.assign(Object.assign({},r),{segments:[...i],cohorts:[...a]}),n,"immediate")),(()=>s.sync(t)))})),m.UI(a.Q1))},k=e=>{let{event:t,metrics:r,queryManager:n,logger:i}=e;return(0,a.zG)(M(t,r,n,i),m.UI(a.Q1))},E=e=>{let{requestData:t,requestOptions:r,queryManager:n,eventsCache:i,eventHandler:o,api:s,metrics:u,logger:c}=e;return(0,a.zG)((()=>s.track(u,t,!1)),m.tS((e=>D(e,t,r,i,u,n,c))),m.UI((e=>C(o,e.event,e.error))))},S=e=>{let{event:t,isEventFullyEnriched:r,requestData:n,api:i,eventHandler:o}=e;return m.tD((()=>{i.trackBeacon(n,r),C(o,t,h.YP)}))},P=e=>{let{requestData:t,requestOptions:r,eventsBatch:n}=e;return()=>n.add(t,r,"never")},D=(e,t,r,n,i,o,s)=>d(e)?I(e,t,r):O(e,t,r,n,i,o,s),I=(e,t,r)=>{const n=new Date;return m.tD((()=>{const i={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,time:n};return"function"==typeof r.error&&r.error(e.error.message),{event:i,error:(0,h.G)(e)}}))},O=(e,t,r,n,i,o,s)=>(0,a.zG)(m.tD((()=>(e=>void 0!==e.properties)(e)?u(Object.assign(Object.assign({},e),{session_id:t.session_id,view_id:t.view_id})):l(e,t))),m.mU((e=>M(e,i,o,s))),m.At((e=>()=>{"function"==typeof r.success&&r.success(e)})),m.mU((e=>()=>n.add(e,{persistOnDisk:!0}))),m.UI((e=>({event:e,error:h.YP})))),M=(e,t,r,n)=>{const i=m.tD((()=>(0,a.bc)({},{segmentsEntered:new Set,segmentsExited:new Set,cohortsEntered:new Set,cohortsExited:new Set}))),o="sdk_events_querylanguage_seconds",s=(0,a.zG)(m.tD((()=>t.startTimer(o,{}))),m.YO("qlMetricKey"),m.ak("update",(()=>r.process(e,!0))),m.UI((r=>{let{qlMetricKey:i,update:s}=r;return t.stopTimer(o,i),n.debug("[Processing]","Processing event",e,"caused the following update",s),s})));return q.has(e.name)?s:i},C=(e,t,r)=>{e.newEvent(c(t),(0,a.zG)(r,h.fS((()=>null))))},x=new Set(["ThirdPartySegments","SlotRendered"]),T=new Set([...v.D0?["PageviewEngagement"]:[],...v.ED?["SegmentEntry","SegmentExit"]:[]]),A=new Set(["PageviewComplete"]),q=new Set(["!UpdateSecondPartyData","!UpdateThirdPartyData","AffiliateLinkClick","LinkClick","Pageview","SlotClicked"]);function U(e,t,r){const{api:s,enrichers:u,logger:c,metrics:l,queryManager:d,stateSync:f,unprocessedPVC:p,userId:_}=e;return i.K4((()=>{const e=new o,i=new g(e,s,l,_,r);return{allEvents:()=>r.all(),getStateSizeInBytes:()=>r.getStateSizeInBytes(),on:(t,r)=>e.addListener({name:t,callback:r,once:!1}),once:(t,r)=>e.addListener({name:t,callback:r,once:!0}),reset:e=>r.reset(e),track:o=>{var{client:g,event:_,useBeacon:v}=o,y=(0,n._T)(o,["client","event","useBeacon"]);const{output:D,isFullyEnriched:I}=u.enrich(_.properties,T.has(_.name)),O=Object.assign(Object.assign({},D),{client:g});l.track({name:I?"sdk_event_enrichment_success_count":"sdk_event_enrichment_fail_count",value:1,labels:{}});const M=(0,a.zG)(t.nonQlCohorts.current,h.fS((()=>[]))),C={user_id:t.userId.current,name:_.name,cohorts:[...M,...t.qlCohorts.current.map(String)],segments:t.qlCohorts.current,properties:O,session_id:_.session_id,view_id:_.view_id};return((e,t)=>(0,a.zG)(b(e.event,e.isEventFullyEnriched,t),(t=>{switch(t){case"immediate":return w(e);case"memoryOnly":return k(e);case"response":return E(e);case"deferred":return S(e);case"never":return P(e)}}),m.tS((()=>A.has(e.event.name)?()=>e.unprocessedPVC.reset():m.of(void 0)))))(Object.assign(Object.assign({},y),{api:s,event:Object.assign(Object.assign({},_),{properties:O}),eventsBatch:i,eventsCache:r,eventHandler:e,isEventFullyEnriched:I,logger:c,metrics:l,queryManager:d,requestData:C,stateSync:f,unprocessedPVC:p}),v)()},__deprecated_eventsCache:r}}))}var G=r(3992);class R{constructor(){this.crypto=window.crypto||window.msCrypto,this.ALG_NAME="AES-GCM"}isAvailable(){var e;return!!(null===(e=this.crypto)||void 0===e?void 0:e.subtle)}generateKey(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,G.t_)(this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},e,["encrypt","decrypt"]))}encrypt(e,t){const[r,n]=this._encrypt(e,this.str2bytes(t));return r.then((e=>{const t=new Uint8Array(16+e.byteLength);return t.set(n,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))}decrypt(e,t){const r=new Uint8Array(t,0,12),n=new Uint32Array(t,12,1)[0],i=t.slice(16,16+n);return this._decrypt(e,r,i).then(this.bytes2str)}_encrypt(e,t){const r=this.crypto.getRandomValues(new Uint8Array(12));return[(0,G.t_)(this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:r},e,t)),r]}_decrypt(e,t,r){return(0,G.t_)(this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:t},e,r))}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}var j=r(365),L=r(6934);var z=r(7554);class B extends Error{constructor(e){super(e),this.name="StoreClosingError"}}class K{constructor(e,t,n,i,o,s,a,u,c,l){this.version=3;{const d=r(2546);this.db=d.make(e,t,n,i,o,s,a,u,this.version,c,l)().then((0,j.fS)((e=>(0,z.E)(t,c,l))))}}shouldThrowStoreClosingError(e){return"NotFoundError"===e.name||"InvalidStateError"===e.name}makeStoreClosingDuringOpertationError(e){return new B(`Attempted ${e} when the current store is closing.`)}put(e,t){return(0,L.Y3)((()=>this.db.then((r=>r.put(e,t)))),(e=>{const t=(0,s.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("put"):t}))}get(e){return(0,L.Y3)((()=>this.db.then((t=>t.get(e))).then(h.ij)),(e=>{const t=(0,s.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("get"):t}))}delete(e){return(0,L.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,L.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}var W=r(3328),N=r(2652);const F="permutive-events-cache",$="permutive-events-for-page",Y="[EVENTSCACHE]",Q=e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name;class V{constructor(e,t,r,n,i,o,s,u){this.config=e,this.namespace=t,this.logger=r,this.api=n,this.trace=i,this.metrics=o,this.userId=s,this.makeEventsStore=u,this.eventsCache=this.makeEventsRepository(F),this.eventsForPage=this.makeEventsRepository($),this.debouncedReportError=(()=>new p.b(5e3,5e3).schedule((e=>this.api.reportError(e.errorMessage,e.userId))))(),this.eventStore=u(),this.eventsTTLInMilliseconds=(0,a.zG)((0,h.ij)(this.config.eventsTTLInDays),(0,h.tS)((e=>"number"==typeof e&&e>0?(0,h.G)(24*e*3600):h.YP))),this.eventsCache.events=(0,N.HP)((()=>(0,N.PQ)((0,a.zG)(m.tD((()=>this.trace.startSpan("load_event_cache"))),m.tS((e=>(0,a.zG)(this.loadFromDisk(),m.At((t=>()=>{e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`)}))))))))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents()))}migratePreviousPagesEvents(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,m.pE)((e=>(0,L.Y3)((()=>e.flush()),s.w)));return(0,a.zG)([this.eventsForPage,this.eventsCache],t,(0,m.UI)((t=>{const r=W.bj(t);return r.length>0&&this.api.reportError(`Migrate previous events failed. Got:\n${r.join("\n ")}`,this.userId.get()),e.finish()})),(e=>e()))}))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then(W.xH)}add(e,t){let{persistOnDisk:r}=t;return(0,n.mG)(this,void 0,void 0,(function*(){return this.logDebug("Adding to cache",e),this.eventsForPage.events=(0,a.zG)(this.eventsForPage.events,m.UI((t=>[...t,e])),N.HP),r&&this.readiness.then((()=>this.eventsForPage.flush())),e}))}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(r<=0||t<=r)return this.logDebug(`Event size of ${t} less than limit of ${r}`),{events:e,sizeInBytes:t};this.logDebug("Events before pruning",{count:e.length,sizeInBytes:t,byteLimit:r});let n=1,i=[...e];for(;t>r;)i.splice(0,n),n*=2,t=2*JSON.stringify(i).length;return this.logDebug("Events after pruning",{count:i.length,sizeInBytes:t}),{events:i,sizeInBytes:t}}loadFromDisk(){const e=()=>[],t=(0,a.zG)(this.eventsTTLInMilliseconds,h.EQ((()=>a.yR),(e=>W.hX((t=>e>Date.now()-t.time.getTime())))));return(0,a.zG)(m.tD((()=>(this.logLog("Loading event cache..."),this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{})))),m.YO("loadEventsCacheTask"),m.ak("eventsFromDisk",(()=>(0,a.zG)(W.nI([this.eventStore.get(F),this.eventStore.get($)]),W.UI(L.LV((0,N.lo)([[e=>e instanceof B,(0,a.ls)(e,m.of)],t=>(0,a.zG)((()=>this.api.reportError(`Error fetching data from store. Got ${t}`,this.userId.get())),m.tS((()=>()=>this.reset("historical"))),m.UI(e))]),(0,a.ls)(h.fS(e),m.of))),W.vP(m.qA)))),m.At((e=>{let{eventsFromDisk:t,loadEventsCacheTask:r}=e;return()=>{this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",r)}})),m.UI((0,a.ls)((0,N.vg)("eventsFromDisk"),W.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&(this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})),e.events)),W.UI(u),t)))}reset(e){return(0,n.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(m.tD((()=>this.logDebug("Resetting Events Cache"))),m.tS((()=>this.eventStore.deleteStore())),L.Zl((()=>(this.eventStore=this.makeEventsStore(),"historical"===e?_.gz(L.Ij)(this.eventsCache.reset,this.eventsForPage.flush):_.gz(L.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),L.wE((()=>()=>this.all())),L.fS((()=>m.of(H()))),(e=>e()))}))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=(()=>{let e=Promise.resolve(j.F2((0,a.Q1)()));return t=>e=e.then(t)})(),r=e=>(0,a.zG)(m.tD((()=>this.logDebug(`Writing ${e.length} events to ${p.key}`))),m.tS((()=>this.eventStore.put(e.map(c),p.key))),L.UI(a.Q1)),n=(0,a.zG)(m.tD((()=>this.logDebug(`Deleting events for ${p.key}`))),m.tS((()=>this.eventStore.delete(p.key))),L.Vn(s.w)),i=(0,a.ls)(m.of,m.At((e=>()=>this.logError(`Events cache failed to put ${p.key}. Got ${e}`))),m.tS((0,N.lo)([[e=>Q(e)&&p.retryAttempts<9,()=>(0,a.zG)(m.tD((()=>{p.retryAttempts+=1,this.logDebug(`Attempt #${p.retryAttempts} to write ${p.key} to EventsStore`)})),m.tS((()=>f)),m.tS((()=>u)))],[e=>Q(e),e=>(0,a.zG)(m.tD((()=>this.logDebug(`Attempted ${p.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),m.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${p.key}. Got ${e}`,userId:this.userId.get()}))),m.tS((()=>L.t$(e))))],L.t$]))),o=e=>L.tD((()=>{this.logDebug(`Successfully wrote events for ${p.key} after ${p.retryAttempts} attempts`),p.retryAttempts=0,p.sizeInBytes=2*JSON.stringify(e).length,p.sizeInBytesLastSuccessfulWrite=p.sizeInBytes})),u=(0,a.zG)((()=>p.events()),m.tS((e=>(0,a.zG)(r(e),m.mU(j.EQ(i,(()=>o(e)))))))),l=(e,t)=>(0,a.zG)(e.events,m.UI((r=>{const n=2*JSON.stringify(r).length,i=this.pruneEventsToSizeLimit(r,n,t);return e.events=m.of(i.events),e.sizeInBytes=i.sizeInBytes,t-e.sizeInBytes}))),d=(e,t)=>{let[r,...n]=e;return r&&0!==t?(0,a.zG)(l(r,t),m.tS((e=>(this.logDebug(`${e} left after pruning ${r.key}`),d(n,e))))):m.of((0,a.Q1)())},f=(0,a.zG)(L.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),L.fX(j.DT((e=>e>0),(e=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`)))),L.tS((e=>{const t=1.2*e,r=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${t} bytes from`,r),(0,a.zG)(d(r,t),L.fF)}))),p={key:e,events:m.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,a.zG)(m.tD((()=>this.trace.startSpan(`write_${p.key}`))),m.tS((e=>(0,a.zG)(u,m.At((()=>()=>e.finish()))))),t),reset:()=>(0,a.zG)(m.tD((()=>{p.events=m.of([]),p.sizeInBytes=0,p.sizeInBytesLastSuccessfulWrite=0})),m.tS((()=>n)),t)};return p}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(Y,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warn(Y,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(Y,...t)}logLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log(Y,...t)}}const H=()=>[];class J extends V{constructor(e,t,r,n,i,o,s,a){super(e,t,r,n,i,o,s,(()=>new K(e,t,o,new R,"05f14972-530d-4235-a941-d79be44f229b",`events_${s.get()}`,`keys_${s.get()}`,"events",r,a)))}}function X(e,t){return U(e,t,new J(e.config,e.namespace,e.logger,e.api,e.trace,e.metrics,e.userId,e.consentTracking))}var Z=r(2851);const ee="[PrebidJS]";function te(e){const t=(()=>{const e=["pbjs",...window._pbjsGlobals||[]];return[...new Set(e)]})();e.logger.debug(ee,"Found keys",t);return i.K4((()=>(0,a.zG)(t,W.UI((0,a.ls)((e=>(e=>{const t={maxAttempts:100,waitTimeInMs:50};let r;return{windowPropertyKey:e,pbjs:(0,N.a4)((()=>r),(()=>{const t=(0,a.zG)(window,(0,N.vg)(e));return!(!(null==t?void 0:t.que)||"function"!=typeof(null==t?void 0:t.getEvents)||(r=t,0))}),t)}})(e)),(t=>(0,a.zG)(Z.p4(t.pbjs),Z.UI((r=>{const n=j.pF((r=>(r.message=`Failed to resolve key "${t.windowPropertyKey}". ${r.message}`,e.reportError(`[PrebidJS] ${r.toString()}`),h.YP)));return(0,a.zG)(r,(0,N.bw)(h.UI((r=>e.logger.debug(ee,`Completed check for key "${t.windowPropertyKey}"`,{result:r})))),h.UI(n),h.UI(h.UI((e=>({windowPropertyKey:t.windowPropertyKey,pbjs:e})))))})))))),(e=>Z.vP(...e)),Z.UI((e=>({completedChecks:e.every(h.pC),pbjsKeyPairs:e.map(h.xH)}))),Z.UI((e=>{let{pbjsKeyPairs:t,completedChecks:r}=e;const n=t.filter(h.pC),[i,...o]=n;return{completedChecks:r,mainPair:null!=i?i:h.YP,otherPairs:(0,a.zG)(o,W.DZ(a.yR))}})))))}var re=r(9853);const ne="_pnativo",ie=function(e){let{externalData:t}=e;return i.K4((()=>{t.removeExternalData(ne)}))};var oe=r(4011),se=r(7927),ae=r(6017);function ue(e,t){const r=function(e){const t=function(e){let{logger:t,messages:r,queryManager:n}=e;const i="[Ref: QL segments]",o=()=>[...n.userSegments.getAllAsList()],[s,u]=Z.Ue(o());return t.debug(i,"initialised",{segments:s.current}),r.on("permutive:segments:updated",(()=>{const e=o();t.debug(i,"updated",{segments:e}),u(e)})),r.on("permutive:reset",(()=>{const e=o();t.debug(i,"reset"),u(e)})),(0,a.zG)(s,Z.D8(W.Eh(oe.Eq)))}(e);return(0,a.zG)(t,Z.UI((0,a.ls)(W.uK((e=>e<1e7)),(e=>{let{left:t,right:r}=e;return{custom:r,standard:t}}))),(e=>({all:t,custom:(0,a.zG)(e,Z.UI((e=>{let{custom:t}=e;return t}))),standard:(0,a.zG)(e,Z.UI((e=>{let{standard:t}=e;return t})))})))}(e),n=function(e){let{messages:t,queryManager:r}=e;const[n,i]=Z.Ue(h.YP);return t.on("permutive:segments:updated",(()=>{i(h.G(r.stateMap.value))})),t.on("permutive:reset",(()=>i(h.YP))),Z.UI(h.UI(ce),n)}(e);return e.queryManager.setLalRef(t.lookalikeModels),e.queryManager.setTpdRef(t.thirdPartyData),i.K4((()=>({cohorts:r,tpdUsage:n})))}const ce=(0,a.ls)(se.UI((e=>{var t;return null!==(t=e.activations)&&void 0!==t?t:{}})),se.hX((0,a.zG)(Boolean,(0,ae.xD)((0,ae.ff)(se.xb)))));var le,de,fe,pe,ge,he=-1,me=function(e){addEventListener("pageshow",(function(t){t.persisted&&(he=t.timeStamp,e(t))}),!0)},_e=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},ve=function(){var e=_e();return e&&e.activationStart||0},be=function(e,t){var r=_e(),n="navigate";return he>=0?n="back-forward-cache":r&&(document.prerendering||ve()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},ye=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch(e){}},we=function(e,t,r,n){var i,o;return function(s){t.value>=0&&(s||n)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,r),e(t))}},ke=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Ee=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},Se=function(e){var t=!1;return function(r){t||(e(r),t=!0)}},Pe=-1,De=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Ie=function(e){"hidden"===document.visibilityState&&Pe>-1&&(Pe="visibilitychange"===e.type?e.timeStamp:0,Me())},Oe=function(){addEventListener("visibilitychange",Ie,!0),addEventListener("prerenderingchange",Ie,!0)},Me=function(){removeEventListener("visibilitychange",Ie,!0),removeEventListener("prerenderingchange",Ie,!0)},Ce=function(){return Pe<0&&(Pe=De(),Oe(),me((function(){setTimeout((function(){Pe=De(),Oe()}),0)}))),{get firstHiddenTime(){return Pe}}},xe=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},Te=[1800,3e3],Ae=[.1,.25],qe=function(e,t){t=t||{},function(e,t){t=t||{},xe((function(){var r,n=Ce(),i=be("FCP"),o=ye("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-ve(),0),i.entries.push(e),r(!0)))}))}));o&&(r=we(e,i,Te,t.reportAllChanges),me((function(n){i=be("FCP"),r=we(e,i,Te,t.reportAllChanges),ke((function(){i.value=performance.now()-n.timeStamp,r(!0)}))})))}))}(Se((function(){var r,n=be("CLS",0),i=0,o=[],s=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],r=o[o.length-1];i&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,o.push(e)):(i=e.value,o=[e])}})),i>n.value&&(n.value=i,n.entries=o,r())},a=ye("layout-shift",s);a&&(r=we(e,n,Ae,t.reportAllChanges),Ee((function(){s(a.takeRecords()),r(!0)})),me((function(){i=0,n=be("CLS",0),r=we(e,n,Ae,t.reportAllChanges),ke((function(){return r()}))})),setTimeout(r,0))})))},Ue={passive:!0,capture:!0},Ge=new Date,Re=function(e,t){le||(le=t,de=e,fe=new Date,ze(removeEventListener),je())},je=function(){if(de>=0&&de<fe-Ge){var e={entryType:"first-input",name:le.type,target:le.target,cancelable:le.cancelable,startTime:le.timeStamp,processingStart:le.timeStamp+de};pe.forEach((function(t){t(e)})),pe=[]}},Le=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var r=function(){Re(e,t),i()},n=function(){i()},i=function(){removeEventListener("pointerup",r,Ue),removeEventListener("pointercancel",n,Ue)};addEventListener("pointerup",r,Ue),addEventListener("pointercancel",n,Ue)}(t,e):Re(t,e)}},ze=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,Le,Ue)}))},Be=[100,300],Ke=0,We=1/0,Ne=0,Fe=function(e){e.forEach((function(e){e.interactionId&&(We=Math.min(We,e.interactionId),Ne=Math.max(Ne,e.interactionId),Ke=Ne?(Ne-We)/7+1:0)}))},$e=function(){return ge?Ke:performance.interactionCount||0},Ye=function(){"interactionCount"in performance||ge||(ge=ye("event",Fe,{type:"event",buffered:!0,durationThreshold:0}))},Qe=[200,500],Ve=0,He=function(){return $e()-Ve},Je=[],Xe={},Ze=function(e){var t=Je[Je.length-1],r=Xe[e.interactionId];if(r||Je.length<10||e.duration>t.latency){if(r)r.entries.push(e),r.latency=Math.max(r.latency,e.duration);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};Xe[n.id]=n,Je.push(n)}Je.sort((function(e,t){return t.latency-e.latency})),Je.splice(10).forEach((function(e){delete Xe[e.id]}))}},et=[2500,4e3],tt={};const rt=function(e){let t=0;const r=r=>{if(0===t)return;const n=nt(r);n&&e.metrics.track({name:`sdk_web_vitals_${n.suffix}`,labels:{},value:n.value})},n=(0,N.HP)((()=>{qe(r),function(e,t){t=t||{},xe((function(){var r,n=Ce(),i=be("LCP"),o=function(e){var t=e[e.length-1];t&&t.startTime<n.firstHiddenTime&&(i.value=Math.max(t.startTime-ve(),0),i.entries=[t],r())},s=ye("largest-contentful-paint",o);if(s){r=we(e,i,et,t.reportAllChanges);var a=Se((function(){tt[i.id]||(o(s.takeRecords()),s.disconnect(),tt[i.id]=!0,r(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,a,!0)})),Ee(a),me((function(n){i=be("LCP"),r=we(e,i,et,t.reportAllChanges),ke((function(){i.value=performance.now()-n.timeStamp,tt[i.id]=!0,r(!0)}))}))}}))}(r),function(e,t){t=t||{},xe((function(){var r,n=Ce(),i=be("FID"),o=function(e){e.startTime<n.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),r(!0))},s=function(e){e.forEach(o)},a=ye("first-input",s);r=we(e,i,Be,t.reportAllChanges),a&&Ee(Se((function(){s(a.takeRecords()),a.disconnect()}))),a&&me((function(){var n;i=be("FID"),r=we(e,i,Be,t.reportAllChanges),pe=[],de=-1,le=null,ze(addEventListener),n=o,pe.push(n),je()}))}))}(r),function(e,t){t=t||{},xe((function(){Ye();var r,n=be("INP"),i=function(e){e.forEach((function(e){e.interactionId&&Ze(e),"first-input"===e.entryType&&!Je.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&Ze(e)}));var t,i=(t=Math.min(Je.length-1,Math.floor(He()/50)),Je[t]);i&&i.latency!==n.value&&(n.value=i.latency,n.entries=i.entries,r())},o=ye("event",i,{durationThreshold:t.durationThreshold||40});r=we(e,n,Qe,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Ee((function(){i(o.takeRecords()),n.value<0&&He()>0&&(n.value=0,n.entries=[]),r(!0)})),me((function(){Je=[],Ve=$e(),n=be("INP"),r=we(e,n,Qe,t.reportAllChanges)})))}))}(r)}));return i.K4((r=>{let{onServiceStop:i}=r;t++,i((()=>{t--})),e.metrics.isEnabled()&&n()}))};const nt=e=>(e=>"CLS"===e.name)(e)?{value:e.value,suffix:`${e.name.toLowerCase()}_score`}:(e=>["INP","FID","LCP"].includes(e.name))(e)?{value:e.value/1e3,suffix:`${e.name.toLowerCase()}_seconds`}:void 0;var it=r(926),ot=r(4923);const st=(e,t)=>((e,t,r)=>{const{activationManager:o,externalData:s,metrics:u,permutiveData:c,queryManager:l,stateSync:d,trace:f}=e;return(0,a.zG)(ue(e,{lookalikeModels:t.lookalikeModels,thirdPartyData:(0,a.zG)(t.thirdPartyData,Z.UI(h.UI(ot.UI((e=>{const t={};for(const r of e)t[r]=!0;return t})))))}),i.YO("queryLanguage"),i.ak("webVitals",(()=>rt(e))),i.ak("eventCollection",(n=>{let{queryLanguage:i}=n;return r(e,{nonQlCohorts:t.nonQlCohorts,qlCohorts:i.cohorts.all,userId:t.userId})})),i.ak("nativo",(e=>{let{queryLanguage:r}=e;return ie(Object.assign({activationManager:o,externalData:s,metrics:u,queryLanguageCohorts:r.cohorts.all},t))})),i.ak("twitterPixel",(e=>{let{queryLanguage:r}=e;return(0,it.eJ)(Object.assign({activationManager:o,metrics:u,permutiveData:c,queryLanguageCohorts:r.cohorts.all},t))})),i.ak("prebidJS",(()=>te(e))),i.ak("reset",(e=>{let{eventCollection:t}=e;return i.of((e=>(0,n.mG)(void 0,void 0,void 0,(function*(){l.reset();const r=e.preserveEventsFromCurrentView?"historical":void 0,n=yield t.reset(r),i=f.startSpan("ss_reset_sync");e.downloadState?yield d.resetSync():d.reset(),yield l.bootstrap(n)(),i.finish()}))))})))})(e,t,X);function at(e){return"consentTracking"in e?e.consentTracking.consentRef:Z.a9(!0)}function ut(e){let{messages:t}=e;const[r,n]=Z.Ue(new Set);return t.on("permutive:addon:preinit",(e=>n(new Set([...r.current,e])))),r}function ct(e){let{messages:t,realtime:r}=e;var n;const[i,o]=Z.Ue(null!==(n=r.isRealtime())&&void 0!==n&&n);return t.on("permutive:realtime",(()=>o(!0))),i}function lt(){const e=()=>Math.floor(Date.now()/1e3),[t,r]=Z.Ue(e());return(0,G.UM)((()=>r(e())),1e3),t}function dt(e,t){const r=function(e){const{activationManager:t,api:r,config:n,enrichers:i,externalData:o,logger:s,messages:a,metrics:u,permutiveData:c,namespace:l,network:d,queryManager:f,stateSync:p,trace:g,track:h,unprocessedPVC:m,urls:_,userId:v}=e,b="consentTracking"in e?e.consentTracking:{consentRef:Z.a9(!0),listenForConsent:()=>0,isRevoked:()=>!1,isGiven:()=>!0};return{activationManager:t,api:r,config:n,consentTracking:b,enrichers:i,externalData:o,logger:s,messages:a,metrics:u,permutiveData:c,namespace:l,permutiveApi:d,permutiveUrls:_,queryManager:f,reportError:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.reportError(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)},stateSync:p,trace:g,track:h,unprocessedPVC:m,userId:v}}(e),i=function(e){return{addonsLoaded:e.addonsLoaded,consent:at(e),currentTimestampSecs:lt(),enabledAddons:ut(e),identities:e.identities,realtime:ct(e),sdkVariant:h.ij(e.sdkVariant),sessionId:Z.a9(e.sessionManager.getSessionId()),userId:e.userId.ref,viewId:e.viewId.ref}}(e);return function(e,t,r){const i=5e3;return(0,a.zG)(e,(o=i,e=>t=>{var{onServiceStop:r}=t,i=(0,n._T)(t,["onServiceStop"]);let s=[];const{value:a,state:u}=e(Object.assign(Object.assign({},i),{onServiceStop:e=>s.push(e)})),[c,l]=Z.Ue(u.current),d=()=>l(u.current),f=(0,G.UM)(d,o);let p=!1;return(0,N.aT)((()=>!p&&d()),navigator.userAgent),r((()=>{p=!0,s.forEach((e=>e())),d(),f()})),{value:a,state:c}}),ft,function(e){return t=>(0,a.ls)((0,N.rO)({previousState:t=>e.current?t:void 0}),t,(0,N.rO)({state:(0,a.ls)((t=>Z.vP(e,t)),Z.UI((e=>{let[t,r]=e;return t?r:void 0})))}))}(r),function(e){return t=>(0,a.ls)((0,N.rO)({previousState:()=>localStorage.getItem(e)}),t,(0,N.rO)({state:(0,N.bw)(Z.YP((t=>{switch(typeof t){case"string":localStorage.setItem(e,t);break;case"undefined":localStorage.removeItem(e);break;case"object":if(null===t){localStorage.removeItem(e);break}throw new Error("Permutive app raised an invalid state.");default:throw new Error("Permutive app raised an invalid state.")}})))}))}(t))({onServiceStop:a.Q1}).value;var o}(t(r,i),e.namespace.getNamespacedStorageKey("permutive-app"),i.consent)}function ft(e){return(0,a.ls)((0,N.rO)({previousState:e=>{if("string"!=typeof e)return{};try{return JSON.parse(e)}catch(e){return{}}}}),e,(0,N.rO)({state:Z.UI(JSON.stringify)}))}const pt=e=>i.dQ((t=>{let{onServiceStop:r,previousState:n}=t;const i=function(e){if("object"!=typeof e||null===e)return{validityKey:"",inFlight:h.YP,lastSuccess:h.YP};return e}(n),o=(0,a.zG)(e,Z.BT(r),Z.UI((e=>"currentTimestampSecs"in e&&"freshness"in e&&"validity"in e?e:{currentTimestampSecs:0,validity:{key:e.validityKey,maxAge:Number.MAX_SAFE_INTEGER},freshness:{key:e.freshnessKey,maxAge:Number.MAX_SAFE_INTEGER},refresh:e.refresh})),Z.g_(Z.a9(i),((e,t)=>{const r=t.validity.key(),n=h.hX((e=>t.currentTimestampSecs-e.timestamp<=t.validity.maxAge)),i=(0,N.HP)(t.freshness.key),o=h.hX((e=>t.currentTimestampSecs-e.timestamp<=t.freshness.maxAge&&e.freshnessKey===i())),s=(0,a.zG)(e,Z.UI((0,a.ls)(h.DT((e=>e.validityKey===r)),h.EQ((()=>({validityKey:r,inFlight:h.YP,lastSuccess:h.YP})),(0,N.rO)({inFlight:n,lastSuccess:n})))),Z.D8(gt));if((0,a.zG)(s.current,(e=>(0,a.zG)(e.inFlight,h.wp((()=>e.lastSuccess)),o,h.pC))))return s;const u=()=>({timestamp:t.currentTimestampSecs,freshnessKey:i(),output:h.YP});return(0,a.zG)(t.refresh(),h.EQ((()=>s),(0,a.ls)(Z.p4,Z.VS(h.EQ((()=>(0,a.zG)(s,Z.UI((e=>Object.assign(Object.assign({},e),{inFlight:h.G(u())}))))),j.EQ((e=>s),(e=>Z.a9({validityKey:r,inFlight:h.YP,lastSuccess:h.G(Object.assign(Object.assign({},u()),{output:h.G(e)}))}))))))))})),Z.xH,Z.D8(gt));return{value:Z.UI((0,a.ls)((0,N.vg)("lastSuccess"),h.tS((0,N.vg)("output"))),o),state:Z.UI((e=>Object.assign(Object.assign({},e),{inFlight:h.YP})),o)}}));const gt=(e,t)=>e.validityKey===t.validityKey&&e.inFlight===t.inFlight&&e.lastSuccess===t.lastSuccess;function ht(e){return t=>(0,a.zG)(Z.oQ(e),Z.UI((0,N.rO)({backoffAfterErrorMs:e=>null!=e?e:0,backoffAfterSuccessMs:e=>null!=e?e:0})),(e=>i.dQ((r=>{let{previousState:n}=r;const[i,o]=Z.Ue(function(e){if("object"!=typeof e||null===e)return{lastSuccess:0,lastError:0};return e}(n)),s=(0,a.zG)(Z.vP(i,e),Z.UI((e=>{let[t,r]=e;return Math.max(t.lastError+r.backoffAfterErrorMs,t.lastSuccess+r.backoffAfterSuccessMs)})));return{state:i,value:(0,a.ls)(h.DT((()=>Date.now()>=s.current)),h.UI(t),h.UI((0,N.bw)((e=>e.then((()=>o(Object.assign(Object.assign({},i.current),{lastSuccess:Date.now()}))),(()=>o(Object.assign(Object.assign({},i.current),{lastError:Date.now()}))))))))}}))))}const mt="clean_room";const _t=function(e,t){return i.K4((()=>({segments:{all:Z.a9([]),direct_buy:Z.a9([]),programmatic:Z.a9([])}})))};var vt=r(7241),bt=r(2197),yt=r(4870);const wt="[Prebid Monitoring]",kt=(e,t)=>{e.metrics.track({name:"sdk_prebid_monitoring_key_flag_count_total",labels:t,value:1})},Et=(e,t)=>{e.metrics.track({name:"sdk_prebid_monitoring_key_bidder_flag_count_total",labels:t,value:1})},St=function(e,t){const r=Pt(e);return i.K4((()=>(0,a.zG)(t,Z.UI((0,a.ls)(h.DT((e=>e.consent)),h.UI((e=>e.prebidJS)))),Z.D8(h.Eh((0,N.Or)())),Z.bw((0,a.ls)(h.tS((e=>e.completedChecks?e.mainPair:h.YP)),h.UI((t=>kt(e,{flag:"prebid_main_key",prebid_key:t.windowPropertyKey}))))),Z.UI(h.UI((e=>(0,a.zG)(e.mainPair,h.UI((t=>[t,...e.otherPairs])),h.fS((()=>e.otherPairs)))))),Z.g_(new Set,((t,n)=>(0,a.zG)(n,h.UI(W.hX((e=>!t.has(e.windowPropertyKey)))),h.hX(W.Od),(0,N.bw)(h.EQ((()=>e.logger.debug(wt,"Nothing to report")),(t=>e.logger.debug(wt,"Reporting",t)))),h.fS((()=>[])),W.UI((t=>(0,a.zG)((t=>(0,a.zG)(j.Y3((function(){var r,n;const{pbjs:i,windowPropertyKey:o}=t;e.logger.log(wt,`Reporting on "${o}"`,t);const s=Dt(i);e.logger.debug(wt,`Version ${i.version} parsed as`,s);const u="function"==typeof(c=i).readConfig?c.readConfig():c.getConfig();var c;e.logger.debug(wt,"Read config",u);const l=(0,a.zG)(null!==(n=null===(r=u.realTimeData)||void 0===r?void 0:r.dataProviders)&&void 0!==n?n:[],W.Ew((e=>"permutive"===e.name)));return e.logger.debug(wt,"Read data provider config",l),{pbjs:i,config:u,dataProviderConfig:l,installedModules:i.installedModules||[],version:s,windowPropertyKey:o}}),s.w),j.ak("bidders",(e=>r.acBidders(e))),j.ak("permutiveRTDProvider",(e=>r.permutiveRTDProvider(e))),j.ak("consent",(e=>r.consent(e))),j.ak("targeting",(e=>r.targeting(e)))))(t),j.Pd((r=>e.reportError(`[Prebid Monitoring] Failed to report pair "${t.windowPropertyKey}", ${r.message}`)),(()=>t.windowPropertyKey))))),W.hp,(e=>new Set([...t,...e]))))),(e=>({reportedKeys:e})))))};const Pt=e=>({acBidders:t=>j.Y3((()=>{(0,re.Hn)("prebid")("data_provider_config",{ac_bidders:[]});const r=[],n=(0,a.zG)(t.dataProviderConfig,h.UI((e=>{var t,r;return null!==(r=null===(t=null==e?void 0:e.params)||void 0===t?void 0:t.acBidders)&&void 0!==r?r:[]})),h.fS((()=>[]))),i=[...new Set([...r,...n])];return e.logger.debug(wt,"Determined acBidders as",{acBidders:i,dynamicBidders:r,staticBidders:n}),i.forEach((r=>{Et(e,{flag:"prebid_ac_bidder",prebid_key:t.windowPropertyKey,prebid_bidder:r})})),{acBidders:i,dynamicBidders:r,readBidders:n}}),s.w),consent:t=>j.Y3((()=>{var r,n,i,o,s,a;const u=t.windowPropertyKey;t.config.consentManagement&&"object"==typeof t.config.consentManagement&&kt(e,{prebid_key:u,flag:"prebid_has_consent_management"});const c=t.installedModules.includes("gdprEnforcement");c&&kt(e,{prebid_key:u,flag:"prebid_gdpr_enforcement_module"});const l=(null===(a=null===(s=null===(o=null===(i=null===(n=null===(r=t.config)||void 0===r?void 0:r.consentManagement)||void 0===n?void 0:n.gdpr)||void 0===i?void 0:i.rules)||void 0===o?void 0:o.find((e=>"storage"===(null==e?void 0:e.purpose))))||void 0===s?void 0:s.vendorExceptions)||void 0===a?void 0:a.includes("permutive"))||!1;return l&&kt(e,{prebid_key:u,flag:"prebid_storage_exception"}),{hasGDPREnforcementModule:c,addedAsStorageException:l}}),s.w),permutiveRTDProvider:t=>j.Y3((()=>{const r=t.installedModules.includes("permutiveRtdProvider");return r&&kt(e,{prebid_key:t.windowPropertyKey,flag:"prebid_permutive_rtd"}),r}),s.w),targeting:t=>{const r=(0,a.ls)(W.UI((e=>[e,null])),ot.sq),n=(t,r)=>(0,a.zG)(t,(0,N.bw)((t=>e.logger.debug(wt,`Processing ${t.length} bidder request(s)`,t))),W.hX((e=>r.hasOwnProperty(e.bidderCode)&&null===r[e.bidderCode])),vt.vM((e=>e.bidderCode)),ot.DZ(W.f2((0,N.lo)([[e=>(e=>{var t,r,n;const i=null===(r=null===(t=null==e?void 0:e.user)||void 0===t?void 0:t.data)||void 0===r?void 0:r.find((e=>"permutive.com"===e.name));return!!(null===(n=null==i?void 0:i.segment)||void 0===n?void 0:n.length)})(e.ortb2),()=>h.G("ortb2")],[e=>{return t=e.params,["permutive","p_standard"].some((e=>{var r,n,i,o;return(null===(n=null===(r=null==t?void 0:t.visitor)||void 0===r?void 0:r[e])||void 0===n?void 0:n.length)||(null===(o=null===(i=null==t?void 0:t.keywords)||void 0===i?void 0:i[e])||void 0===o?void 0:o.length)}));var t},()=>h.G("params")],()=>h.YP]))),(0,N.bw)((t=>e.logger.debug(wt,"Bidders targeting method's updated",t)))),i=i=>{e.logger.debug(wt,"Bidders found with no targeting method",i);let o=r(i);const s=r=>(0,a.zG)(n([r],o),(0,N.bw)((e=>{o=Object.assign(Object.assign({},o),e)})),(0,N.bw)(ot.Su(((r,n)=>Et(e,{flag:`prebid_${n}_targeting_success`,prebid_key:t.windowPropertyKey,prebid_bidder:r})))),(0,N.bw)((()=>{Object.values(o).includes(null)||(e.logger.debug(wt,`Cleaning up "bidRequested" listener for ${t.windowPropertyKey}`),t.pbjs.offEvent("bidRequested",s))})));t.pbjs.onEvent("bidRequested",s)};return j.Y3((()=>{const o=(0,a.zG)(t.pbjs.getEvents(),W.DZ((0,a.ls)(h.DT((e=>"bidRequested"===e.eventType)),h.UI((0,N.vg)("args")))));return(0,a.zG)(t.bidders.acBidders,h.DT(W.Od),h.EQ((()=>e.logger.debug(wt,"No bidders for targeting")),(0,a.ls)(r,(e=>Object.assign(Object.assign({},e),n(o,e))),ot.uK(bt.ff((e=>null===e))),yt.Pd((0,a.ls)(ot.XP,h.DT(W.Od),h.UI(i)),ot.Su(((r,n)=>Et(e,{prebid_bidder:r,prebid_key:t.windowPropertyKey,flag:`prebid_${n}_targeting_success`})))))))}),s.w)}}),Dt=e=>{const[t,r,n]=e.version.split("-")[0].replace("v","").split(".").map((e=>parseInt(e)));return{major:t,minor:r,patch:n}},It=(e,t)=>(0,a.zG)(function(e,t){return(0,a.zG)(t,Z.UI((e=>{var{initdAddons:t}=e,r=(0,n._T)(e,["initdAddons"]);return Object.assign(Object.assign({},r),{isInitd:t.has(mt)})})),(t=>_t(e,t)))}(e,Z.vP(t)),i.YO("segmentation"),i.ak("prebidMonitoring",(()=>St(e,Z.vP({consent:t.consent,prebidJS:t.prebidJS})))),i.UI((e=>e.segmentation))),Ot=function(e,t){return i.K4((()=>(e.removeExternalData(Mt),Z.a9({cohorts:[],ssps:[],gamTargetingValues:[]}))))};const Mt="_pssps",Ct=function(e,t){const r=(0,a.zG)(t.pbjs,Z.VS((0,a.ls)(h.tS(h.KQ((e=>{var t;return null===(t=e.getUserIdsAsync)||void 0===t?void 0:t.call(e).then((()=>{var t,r;return null!==(r=null===(t=e.getUserIdsAsEids)||void 0===t?void 0:t.call(e))&&void 0!==r?r:[]}))}))),h.UI(Z.p4),h.fS((()=>Z.a9(h.YP))))),Z.UI(h.tS(h.Uo)),Z.bw(h.mU((t=>(t.length>0?t.forEach((t=>{e.metrics.track({name:"sdk_prebid_alternative_identifiers_count_total",labels:{alternative_user_id_name:t.source},value:1})})):e.metrics.track({name:"sdk_prebid_alternative_identifiers_count_total",labels:{identifier:"NONE"},value:1}),h.YP))))),n=(0,a.zG)(t.pbjs,Z.UI(h.tS(h.KQ((e=>{var t;return null===(t=e.getUserIdsAsEids)||void 0===t?void 0:t.call(e)})))));return i.K4((()=>(0,a.zG)(Z.vP(r,n),Z.UI((e=>{let[t,r]=e;return(0,a.zG)(t,h.wp((()=>r)))})),Z.UI((0,a.ls)(h.UI(W.DZ((e=>{var t,r;return"string"==typeof(null===(r=null===(t=e.uids)||void 0===t?void 0:t[0])||void 0===r?void 0:r.id)?h.G((0,a.bc)(e.source,{id:e.uids[0].id})):h.YP}))),h.tS(vt.c2),h.UI(ot.sq))),Z.bw((t=>{h.pC(t)&&e.logger.debug("[Prebid Identifiers]","Found identifiers",t.value)})))))};const xt=function(e){let{externalData:t}=e;return i.K4((()=>{t.removeExternalData(Tt)}))};const Tt="_pfws";const At=()=>({allCohorts:[],gam:[],xandrSsp:[]}),qt=function(e,t){return i.K4((()=>Z.a9(At())))},Ut=function(e){return i.K4((()=>Z.a9(h.YP)))};const Gt=(e,t)=>(0,a.zG)(i.vP({classificationModels:qt(e,t)}),i.UI((e=>e.classificationModels))),Rt=function(e,t){return(0,a.zG)(jt(e),ht({backoffAfterErrorMs:6e5}),i.VS((e=>pt(Z.UI((t=>{let{tpdUsage:r,userId:n}=t;return{validityKey:()=>n,freshnessKey:(0,a.ls)((()=>r),h.EQ((()=>0),(0,a.ls)(JSON.stringify,N.vp))),refresh:(0,a.ls)((()=>r),h.hX((e=>Object.keys(e).length>0)),h.tS((t=>e({user_id:n,time:new Date,tpd_segments:t}))))}}),t)))),i.UI(a.Q1))};const jt=e=>t=>{const{config:r,metrics:n,permutiveApi:i,permutiveUrls:o}=e,s=n.startTimer("sdk_http_tpd_usage_seconds",{});return i.req({url:o.getEndpointUrl("/tpd/usage",h.G(r.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_tpd_usage_seconds",s),e)))};function Lt(e,t){const[r,n]=Z.Ue(0);let o=!1;const s=()=>{try{o=!0,n(r.current+1)}finally{o=!1}},u=["amp","gigya","pxid","sailthru"],c=(0,a.zG)(t.identities,Z.UI(ot.z7((e=>!u.includes(e)))));return(0,a.zG)(i.vP({fetchFromNewEndpoint:(0,a.zG)(zt(e),ht({backoffAfterErrorMs:6e5})),fetchFromLegacyEndpoint:(0,a.zG)(Bt(e),ht({backoffAfterErrorMs:6e5}))}),i.VS((n=>{let{fetchFromNewEndpoint:i,fetchFromLegacyEndpoint:s}=n;const u=t=>(0,a.zG)(i(t),h.UI((e=>e.catch((()=>(0,a.zG)(s(t.identities),h.fS((()=>e))))))),h.wp((()=>s(t.identities))),h.UI((0,N.bw)((t=>{const r=e.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{});t.catch(a.Q1).then((()=>{e.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",r)}))}))));return pt((0,a.zG)(Z.vP(r,t.userId,t.sessionId,c),Z.UI((e=>{let[t,r,n,i]=e;return{validityKey:()=>r,freshnessKey:()=>`${Kt(i)},${n}`,refresh:()=>(0,a.zG)({userId:r,identities:i},h.DT((e=>{let{identities:t}=e;return o&&!ot.xb(t)})),h.tS(u))}}))))})),i.UI((e=>({refresh:s,data:e}))))}const zt=e=>t=>(0,n.mG)(void 0,void 0,void 0,(function*(){return(yield e.api.reqWithMetrics(e.metrics,"sdk_http_audience_matching_seconds",{url:e.permutiveUrls.getAudienceMatchingEndpointUrl("/id",h.G("v1"),t.userId),payload:{identities:(0,a.zG)(t.identities,ot.Yz,W.UI((e=>{let[t,r]=e;return{tag:t,id:r}})))},method:"POST",withCredentials:!1,dataType:"json"})).items})),Bt=e=>t=>e.api.reqWithMetrics(e.metrics,"sdk_http_tpd_seconds",{url:e.permutiveUrls.getEndpointUrl("/tpd",h.G(e.config.apiVersion)),method:"POST",payload:{user_id:t},contentType:"text/plain",dataType:"json",withCredentials:!1}),Kt=(0,a.ls)(JSON.stringify,N.vp);const Wt=(e,t)=>(0,a.zG)(i.vP({data:Lt(e,{identities:t.identities,sessionId:t.sessionId,userId:t.userId}),usageReporting:Rt(e,Z.vP({tpdUsage:t.tpdUsage,userId:t.userId})),removeLegacyDataFromLocalStorage:i.dQ((t=>{let{previousState:r}=t;if(!r){const t=e.namespace.getNamespacedStorageKey("permutive-data-tpd");localStorage.removeItem(t)}return{value:null,state:Z.a9(!0)}}))}),i.ak("analytics",(r=>{let{data:{data:n}}=r;return function(e,t){return i.dQ((r=>{let{previousState:n}=r;var i;return{state:(0,a.zG)(Z.vP(t.userId,t.providerSegments),Z.g_(null!==(i=n)&&"object"==typeof i?i:{userId:"",providerHashes:{}},((t,r)=>{let[n,i]=r;const o=(0,a.zG)(i,h.fS((()=>({})))),s=(0,a.zG)(o,ot.UI((0,N.SL)(N.vp))),u=(0,a.zG)(t,h.DT((e=>e.userId===n)),h.UI((e=>e.providerHashes)),h.fS((()=>({}))));return(0,a.zG)(o,ot.z7((e=>s[e]!==(u[e]||0))),ot.Su(((t,r)=>{e("ThirdPartySegments",{data_provider:t,segments:[...r]})}))),{userId:n,providerHashes:s}}))),value:void 0}}))}(e.track,{providerSegments:n,userId:t.userId})})),i.UI((e=>{let{data:t}=e;return{data:t.data,refreshData:t.refresh}})));var Nt=r(5619);const Ft=function(e,t){return i.K4((()=>({addon:()=>({}),cohorts:Z.a9(h.YP)})))};const $t=(e,t)=>i.vP({contextual:Ft(e,t)});Z.a9([]),Z.a9([]),Z.a9([]),Z.a9([]),Z.a9([]),Z.a9([]),Z.a9(Nt.b()),Z.a9(h.YP),Z.a9(h.YP);function Yt(e,t,r){const{addonsLoaded:n,consent:o,currentTimestampSecs:s,enabledAddons:u,identities:c,realtime:l,sdkVariant:d,sessionId:f,userId:p,viewId:g}=t,[m,_]=(0,a.zG)(Z.Ue(h.YP),(e=>{let[t,r]=e;return[(0,a.zG)(t,Z.VS(h.EQ((()=>Z.a9(h.YP)),Z.UI(h.G)))),r]})),[v,b]=(0,a.zG)(Z.Ue(Z.a9(h.YP)),(e=>{let[t,r]=e;return[Z.xH(t),r]}));return(0,a.zG)(i.vP({lookalikeModels:Ut(e),metricContext:Nt.X({sdkVariant:d,sessionId:f,userId:p,viewId:g}),computeTimeMetrics:(y=e.metrics,i.K4((e=>{let{onServiceStop:t}=e;const r=(0,G.HJ)((()=>{(0,a.zG)((0,G.iE)(),(0,N.bw)((()=>(0,G.ho)(!1))),W.UI((e=>{let[t,r]=e;return(r-t)/1e3})),(e=>{y.track({name:"sdk_ui_thread_compute_first10s_total_seconds",value:e.reduce(((e,t)=>e+t),0),labels:{}}),y.track({name:"sdk_ui_thread_compute_first10s_total_task_overrun_seconds",value:(0,a.zG)(e,W.hX((e=>e>.05)),W.UI((e=>e-.05)),W.u4(0,((e,t)=>e+t))),labels:{}}),y.track({name:"sdk_ui_thread_compute_first10s_longest_task_seconds",value:Math.max(0,...e),labels:{}})}))}),1e4);t(r)}))),audiences:$t(e,t)}),i.ak("sdkql",(t=>{let{lookalikeModels:i}=t;return r(e,{addonsLoaded:n,consent:o,initdAddons:u,lookalikeModels:i,nonQlCohorts:m,thirdPartyData:v,userId:p,viewId:g})})),i.ak("strategicPartnerships",(t=>{let{sdkql:r}=t;return((e,t)=>i.vP({prebid_identifiers:Ct(e,t)}))(e,{pbjs:(0,a.zG)(r.prebidJS,Z.UI((e=>(0,a.zG)(e.mainPair,h.UI((e=>e.pbjs))))))})})),i.ak("demandPartners",(t=>{let{sdkql:{queryLanguage:r}}=t;return((e,t)=>(0,a.zG)(i.vP({ssp:Ot(e.externalData,t)}),i.UI((e=>{let{ssp:t}=e;return t}))))(e,{addonsLoaded:n,consent:o,initdAddons:u,standardCohorts:r.cohorts.standard})})),i.ak("mediaAndEntertainment",(t=>{let{sdkql:{queryLanguage:r}}=t;return((e,t)=>(0,a.zG)(i.vP({freewheel:xt(Object.assign({activationManager:e.activationManager,externalData:e.externalData},t))}),i.UI((0,a.a9)({}))))(e,{addonsLoaded:n,consent:o,initdAddons:u,queryLanguageCohorts:r.cohorts.all})})),i.ak("publishers",(t=>{let{sdkql:{queryLanguage:r}}=t;return((e,t)=>(0,a.zG)(i.vP({addressability:Gt(e,Z.vP(t)),audienceMatching:Wt(e,{identities:t.identities,sessionId:t.sessionId,tpdUsage:t.tpdUsage,userId:t.userId})}),i.UI((e=>{let{addressability:t,audienceMatching:r}=e;return{cohorts:{all:Z.UI((e=>e.allCohorts),t),gam:Z.UI((e=>e.gam),t),xandrSsp:Z.UI((e=>e.xandrSsp),t)},refreshThirdPartyData:r.refreshData,thirdPartyData:r.data}}))))(e,{addonsLoaded:n,consent:o,currentTimestampSecs:s,identities:c,initdAddons:u,queryLanguageCohorts:r.cohorts.all,realtime:l,sessionId:f,tpdUsage:r.tpdUsage,userId:p})})),i.ak("advertisers",(t=>{let{demandPartners:r,sdkql:i}=t;return It(e,{addonsLoaded:n,consent:o,currentTimestampSecs:s,customCohorts:i.queryLanguage.cohorts.custom,demandPartnerCohorts:Z.UI((e=>e.cohorts),r),initdAddons:u,prebidJS:i.prebidJS,realtime:l,sessionId:f,standardCohorts:i.queryLanguage.cohorts.standard,userId:p,viewId:g})})),i.bw((e=>{let{publishers:t}=e;return b(t.thirdPartyData)})),i.UI((e=>{let{advertisers:t,audiences:r,demandPartners:n,metricContext:i,publishers:o,sdkql:s,strategicPartnerships:u}=e;return{addons:{contextual:r.contextual.addon},cloudCohorts:{all:(0,a.zG)(Z.vP(o.cohorts.all,t.segments.all,(0,a.zG)(r.contextual.cohorts,Z.UI((0,a.ls)(h.UI((e=>e.all)),h.fS((()=>[]))))),Z.UI((e=>e.cohorts),n)),Z.UI(W.xH)),gam:(0,a.zG)(Z.vP(o.cohorts.gam,t.segments.all,Z.UI((e=>e.gamTargetingValues),n)),Z.UI(W.xH)),xandrSsp:o.cohorts.xandrSsp},eventCollection:s.eventCollection,metricContext:i,pbjsPair:Z.UI((e=>e.mainPair),s.prebidJS),prebidIdentifiers:u.prebid_identifiers,queryLanguageCohorts:s.queryLanguage.cohorts,refreshThirdPartyData:o.refreshThirdPartyData,resetQL:s.reset}})),i.bw((e=>{let{cloudCohorts:t}=e;return _(h.G(t.all))})));var y}function Qt(e){return dt(e,Vt)}function Vt(e,t){return Yt(e,t,st)}},6640:(e,t,r)=>{r.d(t,{B9:()=>g,iq:()=>d,ti:()=>m});var n=r(2688),i=r(787),o=r(365),s=r(6567),a=r(3735),u=r(2652),c=r(3030);const l="__permutive.",d="__permutiveConfigQueryParams";const f={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",cdnBaseUrl:"cdn.permutive.com",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",apiProtocol:"https",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,c._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataModelsKey:"permutive-data-models",permutiveDataQueriesKey:"permutive-data-queries",permutiveDataEnrichersKey:"permutive-data-enrichers",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"05f14972-530d-4235-a941-d79be44f229b.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:["internal_query_states"],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500,watson:{enabled:!0}},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},p=e=>{const t={consentRequired:!0,loggingEnabled:!0,sendClientErrors:!0,tracingEnabled:!0},r={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0};return Object.keys(e).reduce(((n,i)=>{if(t.hasOwnProperty(i)){const t="true"===e[i];return Object.assign(Object.assign({},n),{[i]:t})}if(r.hasOwnProperty(i)){const t=Number(e[i]);return isNaN(t)?n:Object.assign(Object.assign({},n),{[i]:t})}return Object.assign(Object.assign({},n),{[i]:e[i]})}),{})},g=function(){let{getQueryParams:e=c.zM}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e=>Object.entries(e).reduce(((e,t)=>{let[r,n]=t;if(!(0===r.indexOf(l)))return e;const i=r.replace(l,"");return[...e,[i,n]]}),[]);return(0,a.zG)(o.Y3((()=>(0,a.zG)(e(),t,(e=>(0,u.m8)(...e)),p,(e=>h({queryConfig:e})))),(e=>`Failed to parse query params. Got ${(0,n.w)(e).message}`)))},h=e=>{let{queryConfig:t}=e;const r=(0,a.zG)(s.Y3((()=>window.sessionStorage.getItem(d))),s.tS(s.ij),s.tS((0,a.ls)(i.A,s.ij)),s.fS((()=>({}))));return(0,u.PM)(r,t)},m=(e,t)=>{var r;const n=null!==(r=e.environment&&f[e.environment])&&void 0!==r?r:{};return(0,u.PM)(f.default,n,e,t)}},4564:(e,t,r)=>{r.d(t,{NY:()=>m,vk:()=>p,qA:()=>f});var n=r(7582),i=r(2688),o=r(365),s=r(3735),a=r(6934),u=r(8259),c=r(1410),l=r(2851);var d=r(30);const f=()=>({opt_in:!0,token:c.L}),p=()=>({opt_in:!1,token:""}),g=e=>{return(0,s.ls)((t=e,e=>(0,s.zG)((0,d.J)(t.consentRequired,e),(e=>{let{consentData:r,isValid:n}=e;return t.consentDatabase.put(r,c.L),n}))),(e=>{let{logger:t,messages:r}=e;return e=>{const n=e?"given":"revoked";return t.log("Consent has been",n),r.emit(`permutive:consent:${n}`),e}})(e));var t},h=e=>(t,r)=>{e.on("permutive:consent:revoked",t),e.on("permutive:consent:given",r)},m=e=>(0,n.mG)(void 0,void 0,void 0,(function*(){const{logger:t,namespace:r,consentRequired:n,messages:f}=e,p=new u.oP(window.localStorage,r),m=(0,d.J)(n,yield p.get(c.L)),_=yield(0,s.zG)(a.Y3((()=>p.put(m.consentData,c.L)),(e=>new Error(`LocalStorage access is required. ${(0,i.w)(e).message}`))),(e=>e()));if(o.nM(_))return _;const{consentRef:v,giveConsent:b,revokeConsent:y,isRevoked:w,isGiven:k}=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[t,r]=l.Ue(e),n=()=>!0===t.current;return{consentRef:t,revokeConsent:()=>(r(!1),t.current),giveConsent:()=>(r(!0),t.current),isRevoked:()=>!n(),isGiven:n}}(m.isValid),E={consentRef:v,isGiven:k,isRevoked:w,listenForConsent:h(f)};E.listenForConsent(y,b);const S=g({consentDatabase:p,consentRequired:n,logger:t,messages:f});return o.F2({consentTracking:E,consentValidation:S,consentDatabase:p})}))},1410:(e,t,r)=>{r.d(t,{L:()=>n});const n="permutive-consent"},7708:(e,t,r)=>{r.d(t,{D:()=>d});var n=r(1500),i=r(365),o=r(3735),s=r(6567),a=r(7407),u=r(4922),c=r(1410),l=r(30);const d=e=>{const{partialTagWithKey:t}=e,r=t.key;var d;window[r].consent=(d=e,(0,o.ls)(d.consentModule.consentValidation,s.DT(Boolean),s.UI((0,u.H)(d)),o.Q1));const f=(0,s.EQ)((()=>{return t={consentDatabase:e.consentModule.consentDatabase,consentRequired:e.tag.config.consentRequired},(0,o.zG)((0,o.a9)(t.consentDatabase.get(c.L)),(0,a.UI)((e=>(0,l.J)(t.consentRequired,e).isValid)));var t}),a.of);return(0,o.zG)((0,o.zG)((e=>{let{consentModule:t,tag:r}=e;const i=(0,n.Ew)((function(e){return"consent"===e.functionName}))(r.q);return(0,s.UI)((e=>t.consentValidation(e.arguments[0])))(i)})(e),f),(0,a.UI)((e=>e?(0,i.F2)(!0):(0,i.t$)("No consent to run on the page"))))}},4769:(e,t,r)=>{r.d(t,{v:()=>n});const n=(e,t,r)=>function(){const n=r()?t:e;return n(...arguments)}},30:(e,t,r)=>{r.d(t,{J:()=>s});var n=r(3735),i=r(6567),o=r(4564);const s=(e,t)=>(0,n.zG)((0,i.ij)(t),(t=>!1===e&&(0,i.Wi)(t)?{isValid:!0,consentData:(0,o.qA)()}:(e=>(0,i.pC)(e)&&(e=>null!==e&&"object"==typeof e)(e.value)&&(e=>{var t;return!0===e.opt_in&&"string"==typeof e.token&&(null===(t=e.token)||void 0===t?void 0:t.length)>0})(e.value))(t)?{isValid:!0,consentData:t.value}:{isValid:!1,consentData:(0,o.vk)()}))},3298:(e,t,r)=>{r.d(t,{S:()=>v});var n=r(3735),i=r(7582),o=r(6567),s=r(1500),a=r(2851),u=r(8612),c=r(2497),l=r(5165),d=r(3992);var f=r(2652);class p{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var g=r(5057);class h{constructor(e,t,r,n,i,o,s,a,u,c,l,d,f,p,g,h,m,_,v,b,y,w,k,E,S,P,D,I){this.logger=e,this.api=t,this.activationManager=r,this.sessionManager=n,this.metrics=i,this.viewId=o,this.userId=s,this.network=a,this.enrichers=u,this.clientContext=c,this.unprocessedEvents=l,this.queryManager=d,this.taskQueue=f,this.identities=p,this.permutiveReset=g,this.messages=h,this.addons=m,this.trace=_,this.permutiveRealtime=v,this.state=b,this.customProperties=y,this.config=w,this.permutiveData=k,this.externalData=E,this.cookies=S,this.identitiesIngestor=P,this.global=D,this.nextGen=I,this.initialisedAddons=[],this.triggerListeners=[]}identify(e){const t="[Identify]";this.logger.debug("<call> identify",e);const r=(0,f.b2)(),a=this.identities.parseCustomerDefinedIdentities(e),c=Object.assign(Object.assign({},this.identities.getIdentitiesMap()),a.reduce(((e,t)=>{let{tag:r,id:n,priority:i,expiry:o}=t;return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({id:n},void 0!==i?{priority:i}:{}),void 0!==o?{expiry:o}:{})})}),{})),l=(0,n.zG)(Object.values(c),s.DZ((e=>o.ij(e.id)))),d=this.identities.getPrioritizedIdentities(c);if("string"==typeof e&&(0,u.Bt)("05f14972-530d-4235-a941-d79be44f229b","05f14972-530d-4235-a941-d79be44f229b",l,window.location.hostname,this.userId.get()))return r.resolve(),r.promise;const h=()=>(0,i.mG)(this,void 0,void 0,(function*(){this.nextGen.refreshThirdPartyData()})),m=e=>(0,i.mG)(this,void 0,void 0,(function*(){yield(0,g.Yj)({clientContext:this.clientContext,global:this.global,identities:this.identities,logger:this.logger,nextGen:this.nextGen,reset:this.permutiveReset,userId:this.userId},e.user_id)}));return this.taskQueue.add(new p((e=>(0,i.mG)(this,void 0,void 0,(function*(){this.logger.debug("<task> identify",a);const n=()=>(0,i.mG)(this,void 0,void 0,(function*(){this.logger.log(t,"request identity");const e=yield this.api.identify(this.metrics,this.userId,d);this.userId.isEqual(e.user_id)?(this.metrics.track({name:"sdk_identity_remained_total",value:1,labels:{identify_reason:"identify_call"}}),yield h()):(this.metrics.track({name:"sdk_identity_changed_total",value:1,labels:{identify_reason:"identify_call"}}),yield m(e))}));this.identities.setIdentities(a).identifyRequestRequired()?yield n():this.logger.log(t,"skip request"),this.logger.debug("<done> identify",a),e(),r.resolve(),yield this.identitiesIngestor.ingestIfEligible(a).catch((e=>this.api.reportError(`Couldn't ingest identities, got ${e}`,this.userId.get())))}))),{wait_prev:!0,block_next:!0})),r.promise}on(e,t){return this.nextGen.eventCollection.on(e,t)}once(e,t){return this.nextGen.eventCollection.once(e,t)}track(){var e,t,r;const[n,i,o]=[arguments.length<=0?void 0:arguments[0],(arguments.length<=1?void 0:arguments[1])||{},(arguments.length<=2?void 0:arguments[2])||{}],s=this.trace.startSpan("track_event");this.logger.log("<call> track",n);const a=(0,f.b2)(),u=null!==(e=o.unprocessedData)&&void 0!==e?e:{},c=null!==(t=u.sessionId)&&void 0!==t?t:this.sessionManager.getSessionId(),l=null!==(r=u.viewId)&&void 0!==r?r:this.viewId.get(),d={success:o.success||(e=>{}),error:o.error||((e,t)=>{})};return this.taskQueue.add(new p((e=>{this.logger.log("<task> track",n);return(u.client?Promise.resolve(u.client):this.clientContext.getClient()).then((t=>{var r;const u={name:n,properties:i,session_id:c,view_id:l,time:new Date};return this.nextGen.eventCollection.track({client:i.client?(0,f.PM)(t,i.client):t,event:u,requestOptions:d,useBeacon:null!==(r=o.useBeacon)&&void 0!==r&&r}).then((t=>{this.logger.log("<done> track",u.name),a.resolve(u),e(),s.finish()})).catch((e=>{var t;null===(t=d.error)||void 0===t||t.call(d,e),this.api.reportError(e,this.userId.get()),a.reject(e)}))}))}))),a.promise}trigger(e,t,r){const n=(0,f.b2)();this.logger.log("<call> trigger",e),this.triggerListeners=this.triggerListeners||[];return this.taskQueue.add(new p((t=>{this.logger.log("<task> trigger",e);const i=this.messages.on("permutive:query:changed",(function(t){t.queryCode===e&&(r(t.result),n.resolve(t.result))}));this.triggerListeners.push(i),this.logger.log("<done> trigger",e),t()}))),n.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const r=(0,f.b2)();this.logger.log("<call> segment",e);return this.taskQueue.add(new p((n=>{var i;this.logger.log("<task> segment",e);const o=this.queryManager.stateMap.value[e];t((null===(i=null==o?void 0:o.result)||void 0===i?void 0:i.result)||!1),r.resolve(),this.logger.log("<done> segment",e),n()}))),r.promise}segments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";const r=(0,f.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new p((n=>{this.logger.log("<task> segments ("+t+")");const i=i=>{e(i),r.resolve(i),this.logger.log("<done> segments ("+t+")"),n()};"dfp"===t?this.messages.once("permutive:dfp:ready",(()=>{this.addons.dfp&&i([...this.addons.dfp.segments.liveSegments])})):i([...this.nextGen.queryLanguageCohorts.all.current])}))),r.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.unprocessedEvents.PageviewComplete.reset(),this.nextGen.resetQL({downloadState:!1,preserveEventsFromCurrentView:!1})]).then((e=>{let[t]=e;this.userId.set(t.id)})).then((()=>{this.messages.emit("permutive:reset")})).catch((e=>{this.api.reportError(`Error resetting internals. Got ${e}`)}))}addon(e,t){const s=Object.assign(Object.assign({},t),{permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedEvents:this.unprocessedEvents,metrics:this.metrics,state:this.state,queryManager:this.queryManager,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,addons:this.addons,enrichers:this.enrichers,externalData:this.externalData,cookies:this.cookies,nextGenOutput:this.nextGen}),u=((0,n.zG)(this.nextGen.pbjsPair,a.UI(o.UI((0,f.vg)("pbjs")))),e=>{this.initialisedAddons.push(e),this.messages.emit("permutive:addon:preinit",e)});if("contextual"!==e)if(-1===this.initialisedAddons.indexOf(e))switch(u(e),e){case"web":Promise.resolve().then(r.bind(r,4400)).then((e=>this.addons.web=new e.WebAddon(s))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":case"overlays":case"scriptrunner":case"nativo":case"freewheel":case"facebook_pixel_v2":case"eyeota_pixel":case"rubicon":case"rubicon_ssp":case"tracking_pixel":case"twitter_pixel":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"prebid":case"classification_models":case"clean_room":case"gam_log":case"smart":case"tradedesk":case"ddp":case"dbm":case"appnexus":case"pubmatic":case"ctv":case"ssp":0;break;case"dfp":Promise.resolve().then(r.bind(r,9658)).then((e=>(0,i.mG)(this,void 0,void 0,(function*(){return this.addons.dfp=yield e.createAddon(s)}))))}else"web"===e&&!0!==t.auto_init?((e,t,r,n)=>new Promise(((i,s)=>{var a;const u=(0,o.Y3)(e);if((0,o.pC)(u))return i(u.value);r.once(t,(()=>(0,o.g_)((()=>s(new Error(`Error after waiting for event ${t}`))),i)((0,o.Y3)(e))));const c=null!==(a=null==n?void 0:n.timeout)&&void 0!==a?a:1e4;(0,d.HJ)((()=>s(new Error(`Event ${t} was not received within the timeout period ${c}ms`))),c)})))((()=>{if(!this.addons.web)throw new Error('"web" addon not ready');return this.addons.web.reset(t)}),"permutive:web:ready",this.messages).catch((e=>{this.api.reportError(`Got error while trying to reset web. Got ${e.message}`,this.state.userId.get())})):"ctv"===e&&(null==t||t.auto_init)}addonIfTCFConsent(e,t){const r=()=>{switch(e.key){case"tradedesk":this.addons.tradedesk=new e.Addon(t);break;case"ddp":this.addons.ddp=new e.Addon(t);break;case"appnexus":this.addons.appnexus=new e.Addon(t);break;case"pubmatic":this.addons.pubmatic=new e.Addon(t)}},i=t=>t[l.D[e.key]]?r():(0,n.Q1)();return(0,c._8)(window).then((e=>{switch(e.type){case"missing":return r();case"aborted":return(0,n.Q1)();case"loaded":return(0,n.zG)((0,c.Ec)(e.data),(0,o.g_)(r,i))}}))}ready(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"initialised";const r=(0,f.b2)(),n=()=>{e(),r.resolve()};switch(t){case"initialised":this.permutiveRealtime.isReady()?n():this.messages.on("permutive:ready",n);break;case"realtime":this.permutiveRealtime.isRealtime()?n():this.messages.once("permutive:realtime",n)}return r.promise}}var m=r(4769);const _=e=>{const{logger:t,consentTracking:r}=e,o=function(){return t.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null)};return e=>class extends e{constructor(){super(...arguments),this.track=(0,m.v)(super.track.bind(this),o,r.isRevoked),r.isRevoked()&&this.consentRevoked(),r.listenForConsent((()=>this.consentRevoked()),n.Q1)}consentRevoked(){return(0,i.mG)(this,void 0,void 0,(function*(){return yield this.sessionManager.reset(),this.reset()}))}}},v=(e,t,r,i,o,s,a,u,c,l,d,f,p,g,m,v,b,y,w,k,E,S,P,D,I,O,M,C,x)=>new((0,n.zG)(h,_({consentTracking:C,logger:e})))(e,t,r,i,o,s,a,u,c,l,d,f,p,g,m,v,b,y,w,k,E,S,P,D,I,O,M,x)},6416:(e,t,r)=>{r.d(t,{O:()=>u});var n=r(1828),i=r(365),o=r(3735);const s=e=>(0,o.zG)((e=>"function"==typeof e.Map?(0,i.F2)(new e.Map([["a",1]])):(0,i.t$)("Maps not supported"))(e),i.tS((e=>1===e.size?(0,i.F2)(null):(0,i.t$)("Iterable Maps not supported")))),a=e=>(0,o.zG)((e=>"function"==typeof e.Set?(0,i.F2)(new e.Set([1,2])):(0,i.t$)("Sets not supported"))(e),i.tS((e=>2===e.size?(0,i.F2)(null):(0,i.t$)("Iterable Sets not supported")))),u=e=>(0,o.zG)((0,n.gz)(i.G5)(s(e),a(e),(e=>e.Worker&&e.Blob?(0,i.F2)(null):(0,i.t$)("WebWorkers not supported"))(e)),(e=>(0,i.UI)(o.Q1)(e)))},5057:(e,t,r)=>{r.d(t,{Yj:()=>ne,TZ:()=>te});var n=r(7582),i=r(2688),o=r(7407),s=r(3735),a=r(7341),u=r(6567),c=r(4870);function l(e,t){return function(r){return e.map(r,t.compact)}}function d(e,t,r){var n=l(e,t),i=(0,a.UI)(e,r);return function(e){return c.s4(n((0,s.zG)(e,i(u.IS))),n((0,s.zG)(e,i(u.EK))))}}var f=r(6017);function p(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filter(e,r)}))}}}function g(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filterMap(e,r)}))}}}function h(e,t){var r=p(e,t);return function(e){var t=r((0,f.ff)(e)),n=r(e);return function(e){return(0,c.s4)(t(e),n(e))}}}function m(e,t){var r=g(e,t);return function(e){return function(t){return(0,c.s4)((0,s.zG)(t,r((function(t){return(0,u.IS)(e(t))}))),(0,s.zG)(t,r((function(t){return(0,u.EK)(e(t))}))))}}}var _=r(9679),v=r(9384),b=r(1828);function y(e){return(0,s.ls)(u.G,e.of)}function w(e){return(0,s.a9)(e.of(u.YP))}function k(e){return function(t){return e.map(t,u.G)}}function E(e){return(0,s.ls)(u.ij,e.of)}function S(e){var t=E(e);return function(e){return(0,s.ls)(e,t)}}function P(e){var t=U(e),r=S(e);return function(e){return t(r(e))}}function D(e){return function(t){return(0,s.ls)(t,e.of)}}function I(e){var t=U(e),r=D(e);return function(e){return t(r(e))}}function O(e){return function(t){return function(r){return e.of(u.DT(t)(r))}}}function M(e){return(0,s.ls)(u.Uo,e.of)}function C(e){return function(t,r){return function(n){return e.map(n,u.EQ(t,r))}}}function x(e){return function(t,r){return function(n){return e.chain(n,u.EQ(t,r))}}}function T(e){return function(t){return function(r){return e.chain(r,u.EQ(t,e.of))}}}function A(e){return(0,a.UI)(e,u.dO)}function q(e){return(0,b.ap)(e,u.G5)}function U(e){var t=w(e);return function(r){return function(n){return e.chain(n,u.EQ((function(){return t()}),r))}}}function G(e){var t=y(e);return function(r){return function(n){return e.chain(n,u.EQ(r,t))}}}var R=y(o.PM),j=(o.PM,o.of,o.PM,function(e){return L(o.tD(e))}),L=k(o.dO),z=(u.Uo,C(o.dO)),B=(o.qo,o.UA,o.PM,o.PM,o.UA,o.PM,o.UA,A(o.dO)),K=q(o.Hi),W=R,N=U(o.UA),F=(o.UA,o.PM,o.dO,u.Ri,o.dO,u.Ri,u.dO,o.dO,u.xu,o.dO,u.xu,o.dO,u.xu,o.dO,u.xu,function(e,t){return(0,s.zG)(e,B(t))}),$=function(e,t){return(0,s.zG)(e,K(t))},Y=function(e,t){return(0,s.zG)(e,N(t))},Q="TaskOption",V={URI:Q,map:F,ap:$,chain:Y},H={URI:Q,fromIO:j,fromTask:L},J=(0,_.oU)(H,V),X=(v.F4,v.Xl,r(2652));var Z=r(8612);const ee=e=>(0,n.mG)blockme(                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),te=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};return(0,n.mG)blockme(                                                                                                                                                                                      )};function re(e,t,r,i,a,u,c){e.log("Assuming identity hasn't changed");const l=a.hasNewOrModifiedQueries,d=l?(0,s.zG)((()=>u.allEvents()),o.tS((e=>a.bootstrap(e)))):a.bootstrap([]),f=(0,s.zG)((()=>i.PageviewComplete.getIfPresent()),(0,X.bw)(z((()=>e.debug("No unprocessed PVC data detected")),(t=>e.debug("Unprocessed PVC data detected",t)))),J((e=>{var{props:t}=e,s=(0,n._T)(e,["props"]);return b.gz(o.oE)((()=>r.track("PageviewComplete",t,{unprocessedData:s})),(()=>i.PageviewComplete.reset()))})),o.UI((()=>{})));return(0,s.zG)(b.gz(o.oE)((()=>(0,n.mG)(this,void 0,void 0,(function*(){return t.startSpan(`qm_bootstrap_${l}`)}))),d,f),o.UI((e=>{let[t]=e;return t.finish()})))}function ne(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){e.logger.log("Identity has changed"),yield e.reset.reset(),e.userId.set(t),ie(e.global,e.clientContext),e.nextGen.refreshThirdPartyData(),e.identities.setIdentities([]),yield e.nextGen.resetQL({downloadState:!0,preserveEventsFromCurrentView:!0})}))}function ie(e,t){return e.context=t.getContext()}},5919:(e,t,r)=>{function n(e,t,r,n,i){i.debug("set SDK as ready"),e.setAsReady(),t.emit("permutive:api:ready"),r.track({name:"sdk_local_storage_byte_total",value:n.getStateSizeInBytes(),labels:{}}),r.track({name:"sdk_query_states_byte_total",value:e.getStateSizeInBytes(),labels:{}})}r.d(t,{R:()=>n})},7985:(e,t,r)=>{r.d(t,{$o:()=>s,je:()=>a});var n=r(365),i=r(3735),o=r(6640);const s=e=>{var t,r;const o="05f14972-530d-4235-a941-d79be44f229b",s=void 0!==(null===(t=e[o])||void 0===t?void 0:t.q)&&void 0!==(null===(r=e[o])||void 0===r?void 0:r.config)?o:"permutive";return(0,i.zG)(e[s],(0,n.ij)("Can't find permutive tag on the page"),(0,n.UI)((e=>({tag:e,key:s}))))},a=(e,t)=>{let{tag:r,key:n}=e;return Object.assign(Object.assign({},r),{config:(0,o.ti)(Object.assign(Object.assign({},r.config),{windowKey:n}),t)})}},7078:(e,t,r)=>{r.d(t,{LA:()=>a});var n=r(1500),i=r(7209),o=r(2652);const s=(e,t,r)=>{let{api:n,state:i}=r;n.reportError(`Function "permutive.${t.functionName}" caused an error: ${e.message}`,i.userId.get())};function a(e,t,r,n,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d;const c=u(e),l=o.startSpan("queued_methods"),f={api:i,state:t},p=e=>{if(e.functionName in r){r[e.functionName].apply(n,e.arguments)}else s(new Error("Does not exist."),e,f)},g=e=>!a.includes(e);c.forEach((e=>{try{g(e.functionName)&&p(e)}catch(t){const r=t instanceof Error?t:new Error("Unknown error.");s(r,e,f)}})),l.finish()}function u(e){const t=(0,n.uK)((e=>-1!==l.indexOf(e.functionName)))(e),r=t.right,s=t.left.filter((e=>"consent"!==e.functionName)),a=(0,i.Zt)(((e,t)=>c(e)&&c(t)?(0,o.lW)(f).compare(e.arguments[0],t.arguments[0]):(0,o.lW)(l).compare(e.functionName,t.functionName)));return(0,n.DY)(a)(r).concat(s)}const c=e=>"addon"===e.functionName,l=["identify","trigger","addon","track"],d=["identify"],f=["dfp","appnexus_adserver","web"]},4922:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>initialiseWebSDK,f:()=>initialisationSequence});var tslib__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(7582),_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(2688),fp_ts_Either__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(365),fp_ts_function__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(3735),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(6934),_framework_ref__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2851),_identity_legacy_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6967),_identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8612),_identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(7658),_sdkql_blockers__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(122),_sdkql_query_language_queryWorkerInit__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8318),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8975),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9853),_core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(2836),_sdkql_event_collection_events_cache_store_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6197),_sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(7748),_core_events_unprocessed_UnprocessedPageviewComplete__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(389),_core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(5865),_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5461),_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(9773),_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(342),_core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_58__=__webpack_require__(8491),_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7594),_core_metrics_Metrics__WEBPACK_IMPORTED_MODULE_59__=__webpack_require__(4074),_sdkql_query_language_query_manager_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1628),_core_session_SessionManager__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(8317),_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4026),_sdkql_state_sync_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(3622),_core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_57__=__webpack_require__(569),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(7575),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(7256),_sdkql_state_sync_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1229),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(7274),_core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(9117),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(9880),_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(7554),_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(9332),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(2497),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(6037),_sdkql_event_collection_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(3116),_sdkql_event_collection_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(6341),_dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(9078),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(7423),_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(4586),_http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_56__=__webpack_require__(310),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2652),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(4996),_utils_Trace__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(6574),_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(3030),_Config__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(6640),_Consent_Consent__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(4564),_Consent_InitialisationCheckWeb__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(7708),_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(6416),_initialisation_identity__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(5057),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(5919),_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(7985),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(7078),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(3298),_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(3992),fp_ts_Task__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(7407);const prefix="[Initialisation Web]",sdkInitTimestamp=window.performance.now(),initialiseWebSDK=_ref=>{let{consentModule,logger,messages,metrics,namespace,network,partialTagWithKey,permutiveData,queryWorker,tag,sessionStorage,configFromQueryParams,urls}=_ref;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Y3)((()=>(0,tslib__WEBPACK_IMPORTED_MODULE_30__.mG)blockme(                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            )),(e=>`Exception during initialisation. Got ${e}`))},initialisationSequence=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)(fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Do,(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("support",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_54__.O)(globalThis)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("queryWorker",(()=>_sdkql_query_language_queryWorkerInit__WEBPACK_IMPORTED_MODULE_3__.F)),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("partialTagWithKey",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_26__.$o)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("configFromQueryParams",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_Config__WEBPACK_IMPORTED_MODULE_22__.B9)()))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("tag",(e=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_26__.je)(e.partialTagWithKey,e.configFromQueryParams)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("logger",(e=>{let{tag:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_55__.SX)(t.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("urls",(e=>{let{tag:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_56__.s(t.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("network",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__.E))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("namespace",(e=>{let{tag:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_57__.L(t.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("messages",(e=>{let{logger:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_58__.Q(t))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("consentModule",(e=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)((()=>(0,_Consent_Consent__WEBPACK_IMPORTED_MODULE_23__.NY)(Object.assign(Object.assign({},e),{consentRequired:e.tag.config.consentRequired}))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Vn)((e=>e.message))))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("sessionStorage",(e=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_16__.u)(e.namespace,e.logger,e.consentModule.consentTracking)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("permutiveData",(e=>{let{tag:t,namespace:r,logger:n,consentModule:i}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_11__.S)(t.config,r,n,i.consentTracking))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("metrics",(e=>{let{tag:t,messages:r,logger:n,permutiveData:i}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_metrics_Metrics__WEBPACK_IMPORTED_MODULE_59__.g)(sdkInitTimestamp,t.config,i,r,n))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("consent",(e=>(0,_Consent_InitialisationCheckWeb__WEBPACK_IMPORTED_MODULE_24__.D)(e))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.tS)((e=>initialiseWebSDK(e))))},333:(e,t,r)=>{r.r(t);var n=r(365),i=r(3735),o=r(6341),s=r(7927),a=r(2197),u=r(6567),c=r(4673);r(2652);class l{constructor(e,t){this.config=e,this.logger=t,this.defaultReplacementMap=this.filterReplacementMap(this.config.defaultMap),this.replacementMap=this.setReplacementMap(this.config.replacementMap)}get getReplacementMap(){return this.replacementMap}setReplacementMap(e){return this.replacementMap=Object.assign(Object.assign({},this.defaultReplacementMap),this.filterReplacementMap(e)),this.logger.debug(`enrichers[${this.config.name}]: replacement map updated`,this.getReplacementMap),this.getReplacementMap}}class d extends l{filterReplacementMap(e){return e}}const f="geoip",p="enricher:geoip",g={},h={include_geo:(null==g?void 0:g.include_geo)||!0,include_isp:(null==g?void 0:g.include_isp)||!0,include_ip_hash:(null==g?void 0:g.include_ip_hash)||!0,include_ip:(null==g?void 0:g.include_ip)||!1},m=(e,t)=>{var r;const{$ip_geo_info_continent:n,$ip_address:o,$ip_address_hash:u}=c.U,l={$ip_geo_info_continent:n,$ip_address:o,$ip_geo_info:{city:c.U.$ip_geo_info_city,continent:c.U.$ip_geo_info_continent,country:c.U.$ip_geo_info_country,postal_code:c.U.$ip_geo_info_postal_code,province:c.U.$ip_geo_info_province},$ip_address_hash:u,$ip_isp_info:{autonomous_system_number:0,isp:c.U.$ip_isp_info_isp,autonomous_system_organization:c.U.$ip_isp_info_autonomous_system_organization,organization:c.U.$ip_isp_info_organization}},p=(0,i.zG)({$ip_geo_info:null==e?void 0:e.geo_info,$ip_geo_info_continent:null===(r=null==e?void 0:e.geo_info)||void 0===r?void 0:r.continent,$ip_isp_info:null==e?void 0:e.isp_info,$ip_address:null==e?void 0:e.ip,$ip_address_hash:null==e?void 0:e.ip_hash},s.hX(a.ff((e=>void 0===e))));return new d({name:f,defaultMap:l,replacementMap:p},t)},_=e=>{let{clientContext:t,api:r,permutiveData:n,metrics:i,sessionManager:o,enrichers:s,network:a,logger:u,config:c}=e;const l=e=>{e.isp_info&&t.updateContext(["isp",e.isp_info.isp],["organization",e.isp_info.organization],["autonomous_system_number",e.isp_info.autonomous_system_number],["autonomous_system_organization",e.isp_info.autonomous_system_organization]),e.geo_info&&t.updateContext(["continent",e.geo_info.continent],["country",e.geo_info.country],["city",e.geo_info.city],["province",e.geo_info.province],["postal_code",e.geo_info.postal_code])},d=n.getData(p);return d&&d.session_id===o.getSessionId()?(l(d.data),s.register(m(d.data,u)),Promise.resolve()):(u.debug("enrichers[geoip]: start HTTP request"),blockme( ).then((e=>(u.debug("enrichers[geoip]: end HTTP request"),l(e),n.setData(p,{session_id:o.getSessionId(),data:e}),e))).catch((e=>(r.reportError(`Error while registering the geoip enricher: got ${e}`),null))).then((e=>{s.register(m(e,u))})))},v=(e,t,r,n)=>{const i=[];return n.include_geo&&i.push(["include","geo"]),n.include_isp&&i.push(["include","isp"]),n.include_ip&&i.push(["include","ip"]),n.include_ip_hash&&i.push(["include","ip_hash"]),e.blockme(                                                                                                                                                                        )},b=()=>(0,o.B)({load:_});const y=()=>{};var w,k=r(4922);w=k.f,b(),y(),b().then((0,n.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),i.Q1))},2652:(e,t,r)=>{r.d(t,{Bf:()=>b,G6:()=>D,Gz:()=>w,HP:()=>A,Or:()=>M,PM:()=>d,PQ:()=>I,SL:()=>p,Z_:()=>x,a4:()=>h,aT:()=>v,b0:()=>k,b2:()=>g,bw:()=>U,cO:()=>O,eu:()=>m,fl:()=>S,k$:()=>y,lW:()=>C,lo:()=>G,m8:()=>E,qh:()=>l,rH:()=>j,rO:()=>q,vg:()=>T,vp:()=>f});var n=r(1500),i=r(3735),o=r(6567),s=r(7209),a=r(6017),u=r(2751),c=r(3992);const l=e=>Object.entries(e);function d(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}function f(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}function p(e){return t=>{let r=0;for(let n of t){r=r+e(n)|0}return r}}a.ff(u.xb);function g(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),reject:t,resolve:e}}function h(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},{waitTimeInMs:s,exponentialBackOff:a,maxAttempts:u}=d(n,r);let l=0;const f=r=>new Promise((n=>Promise.resolve(t()).then((t=>t?Promise.resolve(e()).then((e=>n((0,o.G)(e)))):(0,i.zG)(l++,(e=>e<u?(0,c.HJ)((()=>n(f(r*(a?2:1)))),r):n(o.YP)))))));return f(s)}function m(e,t){const r=Object.create(null);for(const n of t)r[n]=e[n];return r}let _=[];function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(_.unshift(e),_.length>1)return;const r=["beforeunload","pagehide"],n=r.concat(["visibilitychange"]),i=e=>{if(!o&&e){o=!0;const e=_;_=[],e.forEach((e=>{try{e()}catch(e){}}))}};let o=!1;n.forEach((e=>{window.addEventListener(e,(()=>{const r=("visibilitychange"!==e||document.hidden)&&P(t);i(r)}))})),r.forEach((e=>{window.addEventListener(e,(()=>i(!0)))}))}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({capture:!0},t);const r=["visibilitychange","pagehide"];r.forEach((r=>window.addEventListener(r,(()=>o.Y3((()=>{"pagehide"!==r&&"hidden"!==document.visibilityState||e()}))),{capture:t.capture})))}function y(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(globalThis.crypto||globalThis.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function w(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function k(e,t){const r=Object.keys(e),n=r.length,i={};for(let s=0;s<n;s++){const n=r[s],a=t(n,e[n]);(0,o.pC)(a)&&(i[n]=a.value)}return i}function E(){const e={},t=arguments.length;for(let r=0;r<t;r++){const[t,n]=r<0||arguments.length<=r?void 0:arguments[r];e[t]=n}return e}function S(e,t){return k(e,((e,r)=>t(e)?(0,o.G)(r):o.YP))}function P(e){return/Mobi|Android/i.test(e)}function D(e){return/^((?!chrome|android).)*safari/i.test(e)}function I(e,t){return new Promise((r=>{var n;(0,c.HJ)((()=>{Promise.resolve(e()).then(r)}),null!==(n=null==t?void 0:t.timeout)&&void 0!==n?n:0)}))}function O(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}const M=()=>({equals:(e,t)=>Object.is(e,t)});function C(e){return(0,s.Zt)(((t,r)=>{const n=e.indexOf(t),i=e.indexOf(r);switch(!0){case-1===n&&-1===i:return 0;case-1!==n&&-1===i:return-1;case-1===n&&-1!==i:return 1;default:return n<=i?-1:1}}))}function x(e,t,r){return function(){try{return r(...arguments)}catch(r){e.reportError(r,t.get())}}}function T(e){return t=>null!=t&&e in t?t[e]:void 0}function A(e){let t=o.YP;const r=(0,o.fS)((()=>{const r=e();return t=(0,o.G)(r),r}));return()=>r(t)}const q=e=>t=>{var r;const n=Object.assign({},t);for(const i in e)n[i]=null===(r=e[i])||void 0===r?void 0:r.call(e,t[i]);return n};function U(e){return t=>(e(t),t)}const G=e=>t=>{const r=e.slice(0,-1),s=e.slice(-1)[0];return(0,i.zG)(r,n.f2((e=>{let[r,n]=e;return(0,i.zG)(t,o.DT(r),o.UI(n))})),o.fS((()=>s(t))))},R=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const r=e(t);return Number.isNaN(r)?void 0:r}},j=R(parseInt);R(parseFloat)},6574:(e,t,r)=>{r.d(t,{l:()=>n});class n{constructor(e){var t;this.config=e,this.shouldUsePerformanceMark=!1,this.placeholderSpan={spanId:null,finish:()=>({})},this.shouldUsePerformanceMark=(null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t?void 0:t.mark)&&this.config.tracingEnabled}startSpan(e){var t;if(this.shouldUsePerformanceMark){const r=this.generateId(),n=`permutive_${e}`,i=`${n}${r}_start`;return null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t||t.mark(i),{spanId:i,finish:()=>{var e,t;null===(t=null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e?void 0:e.measure)||void 0===t||t.call(e,n,i)}}}return this.placeholderSpan}generateId(){return"_"+Math.random().toString(36).substr(2,9)}}},4730:(e,t,r)=>{r.d(t,{b:()=>o});var n=r(2652),i=r(3992);class o{constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,r)}scheduleAccumulated(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,r,n,t)}scheduleForPageUnload(e){return(0,n.aT)(e)}debounce(e,t,r,o){let s,a,u,c=[];return l=>{o&&(u=o.concat(null!=u?u:o.empty,l));const d=(0,n.b2)();c.push(d);return null==s||s(),s=(0,i.HJ)((()=>{null==a||a(),a=void 0;const t=e(u||l);c.forEach((e=>e.resolve(t))),u=null==o?void 0:o.empty,c=[]}),t),a||(a=(0,i.HJ)((()=>{null==s||s(),a=void 0;const t=e(u||l);c.forEach((e=>e.resolve(t))),u=null==o?void 0:o.empty,c=[]}),r)),d.promise}}}},4996:(e,t,r)=>{r.d(t,{i:()=>i});var n=r(3992);class i{constructor(e){this.messages=e,this.queue=[],this.nextNotify=null,e.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,(0,n.HJ)(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,r=0;for(let n=0;n<this.queue.length;n++){const i=this.queue[n];if(i.complete)r+=1;else if(i.started)t=!0,e=e||i.blocks();else{if(i.waits()&&t)break;e||(t=!0,e=e||i.blocks(),i.execute((()=>{this.notify()})))}}this.queue.splice(0,r)}size(){return this.queue.length}}},3030:(e,t,r)=>{r.d(t,{_Y:()=>s,bk:()=>o,zM:()=>i});var n=r(3735);const i=()=>{var e,t;const r=null===(t=null===(e=window.location.href.split("?")[1])||void 0===e?void 0:e.split("#")[0])||void 0===t?void 0:t.split("&");return void 0===r?{}:r.reduce(((e,t)=>{const[r,n]=t.split("=");return Object.assign(Object.assign({},e),{[r]:n})}),{})},o=e=>{if(!e)return"";return(0,n.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};function s(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),r=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),n=e.match(/localhost/);if(r&&r.length>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return t&&(null==t?void 0:t.length)>0?t[0]:n&&(null==n?void 0:n.length)>0?"localhost":""}},122:(e,t,r)=>{r.d(t,{X:()=>n});const n=e=>{let t=!0;const r=[];return{addBlocker:n=>{r.push(n),e.logger.log("<blockers> added blocker "+n),e.messages.on(n,(()=>{if(t){const i=r.indexOf(n);i>=0&&(r.splice(i,1),e.logger.log("<blockers> removed blocker "+n)),0===r.length&&(t=!1,e.messages.emit("permutive:blockers:empty"),e.logger.log("<blockers> complete"))}}))}}}},7748:(e,t,r)=>{r.d(t,{X:()=>n});class n{constructor(){this.properties={}}overrideCustomProps(e){this.properties=e}getCustomProps(){return this.properties}}},3116:(e,t,r)=>{r.d(t,{J:()=>i});const n=e=>"string"==typeof e&&"$"===e[0];class i{constructor(){this.replacementMap={}}register(e){this.replacementMap=Object.assign(Object.assign({},this.replacementMap),e.getReplacementMap)}enrich(e,t){return this.enrichRecursive(e,t)}enrichRecursive(e,t){const r={output:{},isFullyEnriched:!0},i=Object.keys(e);for(let o=0;o<i.length;o++){const s=i[o],a=e[s];switch(!0){case n(a):const[e,i]=this.isPropertyReplaceable(a);r.output[s]=e?i:a,this.replacementMap.hasOwnProperty(a)&&i===a&&t&&delete r.output[s],r.isFullyEnriched=!!e&&r.isFullyEnriched;break;case null!==a&&"object"==typeof a&&a.constructor===Object:const o=this.enrichRecursive(a,t);r.output[s]=o.output,r.isFullyEnriched=r.isFullyEnriched&&o.isFullyEnriched;break;default:r.output[s]=a}}return r}isPropertyReplaceable(e){const t=this.replacementMap[e];return[this.replacementMap.hasOwnProperty(e)&&t!==e,t]}}},6341:(e,t,r)=>{r.d(t,{B:()=>a,H:()=>u});var n=r(3735),i=r(7407),o=r(6934);const s=[],a=e=>{s.push(e)},u=e=>{const t=s.map((t=>(0,o.Y3)((()=>t.block()),(t=>{e.api.reportError(t)}))));return(0,n.zG)((0,i.RD)(t),(0,i.UI)(n.Q1))}},2546:(e,t,r)=>{r.r(t),r.d(t,{make:()=>q});var n=r(3735),i=r(7582);let o,s;const a=new WeakMap,u=new WeakMap,c=new WeakMap,l=new WeakMap,d=new WeakMap;let f={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return h(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(m(this),t),h(a.get(this))}:function(...t){return h(e.apply(m(this),t))}:function(t,...r){const n=e.call(m(this),t,...r);return c.set(n,t.sort?t.sort():[t]),h(n)}}function g(e){return"function"==typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),n()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));u.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,f):e);var t}function h(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(h(e.result)),n()},o=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&a.set(t,e)})).catch((()=>{})),d.set(t,e),t}(e);if(l.has(e))return l.get(e);const t=g(e);return t!==e&&(l.set(e,t),d.set(t,e)),t}const m=e=>d.get(e);const _=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],b=new Map;function y(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(b.get(t))return b.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=v.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!_.includes(r))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let s=o.store;return n&&(s=s.index(t.shift())),(await Promise.all([s[r](...t),i&&o.done]))[0]};return b.set(t,o),o}f=(e=>({...e,get:(t,r,n)=>y(t,r)||e.get(t,r,n),has:(t,r)=>!!y(t,r)||e.has(t,r)}))(f);var w=r(2688),k=r(365),E=r(7407),S=r(6934),P=r(2652);function D(e){return"development"===e.environment?window.isSecureContext:"https:"===window.location.protocol}var I=r(3992);const O="[IDB]",M=(e,t,r,o,s,a)=>(0,n.zG)((0,E.of)(e.getNamespacedStorageKey(s)),(0,E.tS)((e=>(0,S.Y3)((()=>(0,i.mG)(void 0,void 0,void 0,(function*(){return r.put(o,a,e)}))),w.w))),(0,E.UI)((0,k.g_)((e=>{throw t.error(O,`Failed to store crypto key to ${o} due to unexpected error,\n`,e),e}),(()=>a))),(e=>e()));class C{constructor(e,t,r,n,i,o,s,a){this.namespace=e,this.logger=t,this.cryptoAlg=r,this.idb=n,this.mainObjectStore=i,this.keyObjectStore=o,this.keyObjectKey=s,this.cryptoKey=a,this.MAX_CONSECUTIVE_PUTS=30,this.puts=1,this.hasForcedCompaction=!1,this.logDebug("Created",this.idb)}static initialise(e,t,r,o,s,a,u,c,l,d){const f=(0,P.G6)(navigator.userAgent)&&!1,p=[D(e),s.isAvailable(),!f].every((e=>!0===e)),g=(e,r,a)=>(0,i.mG)(this,void 0,void 0,(function*(){return(0,n.zG)(yield e.get(a,t.getNamespacedStorageKey(r)),(e=>(0,i.mG)(this,void 0,void 0,(function*(){return null!=e?e:s.generateKey(!1)}))),(r=>(0,i.mG)(this,void 0,void 0,(function*(){return M(t,o,e,c,l,yield r)})))).catch((e=>{const t=(0,w.w)(e);throw o.error(O,"Get crypto key failed. Got\n",t),t}))})),h=(e,t,r)=>t.includes(r)?(0,n.Q1)():e.createObjectStore(r),m=p?(0,k.Y3)((()=>function(e){if(!(0,P.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t=()=>{},r=0;return new Promise((e=>{const n=()=>(r++,indexedDB.databases().finally((0,I.GL)(e)));t=(0,I.UM)(n,100),n()})).finally((()=>{t(),e.track({name:"sdk_idb_conn_attempt_safari_count",value:r,labels:{}})}))}(r).then((()=>x(a,d,{upgrade:e=>{const t=[...e.objectStoreNames];h(e,t,u),h(e,t,c)}})))),String):(0,k.t$)("Connection not attempted. Default to localStorage");return(0,k.g_)((e=>(0,S.t$)(e)),(e=>(0,n.zG)((0,S.Y3)((()=>e.then((e=>(0,i.mG)(this,void 0,void 0,(function*(){return{db:e,cryptoKey:yield g(e,l,c)}}))))),String),(0,S.UI)((e=>{let{db:r,cryptoKey:n}=e;return new C(t,o,s,r,u,c,l,n)})))))(m)}put(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){return(0,n.zG)((()=>(0,i.mG)(this,void 0,void 0,(function*(){return(0,n.bc)(JSON.stringify(e),this.cryptoKey)}))),(0,E.tS)((e=>{let[t,r]=e;return(0,E.of)(this.cryptoAlg.encrypt(r,t))})),(0,E.tS)((e=>()=>(0,i.mG)(this,void 0,void 0,(function*(){return yield this.resetIfRequired(this.puts++),e})))),(0,E.tS)((e=>(0,S.Y3)((()=>this.idb.put(this.mainObjectStore,e,this.namespace.getNamespacedStorageKey(String(t)))),w.w))),(0,E.UI)((0,k.g_)((r=>{throw this.logError(`Failed to put "${t.toString()}" value`,e,". Got \n",r),"QuotaExceededError"===r.name&&this.forceCompaction(),r}),(()=>t))),(e=>e()))}))}get(e){return(0,n.zG)(this.namespace.getNamespacedStorageKey(String(e)),(t=>this.idb.get(this.mainObjectStore,t).then((e=>(0,i.mG)(this,void 0,void 0,(function*(){return e?JSON.parse(yield this.cryptoAlg.decrypt(this.cryptoKey,e)):null})))).catch((t=>{const r=(0,w.w)(t);throw this.logError(`Get ${e.toString()} failed. Got`,r),r}))))}delete(e){return(0,n.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}deleteStore(){return this.logDebug("Deleting",this.idb),this.idb.close(),T(this.idb.name)}forceCompaction(){if(this.hasForcedCompaction)return null;this.hasForcedCompaction=!0,this.logDebug("Attempting to force compaction");const e=`__${this.mainObjectStore}`;return x(e).then((t=>(t.close(),T(e))))}resetIfRequired(e){return(0,P.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.reset():Promise.resolve()}reset(){return(0,i.mG)(this,void 0,void 0,(function*(){const e=this.idb.name,t=this.idb.version;yield this.deleteStore(),this.idb=yield x(e,t),this.idb.createObjectStore(this.mainObjectStore),this.idb.createObjectStore(this.keyObjectStore),yield M(this.namespace,this.logger,this.idb,this.keyObjectStore,this.keyObjectKey,this.cryptoKey),this.logDebug("Reset to",this.idb)}))}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(O,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(O,...t)}}const x=(0,n.ls)((function(e,t,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=h(s);return n&&s.addEventListener("upgradeneeded",(e=>{n(h(s.result),e.oldVersion,e.newVersion,h(s.transaction))})),r&&s.addEventListener("blocked",(()=>r())),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}),I.t_,(e=>e.then((e=>({close:e.close.bind(e),createObjectStore:(0,n.ls)(e.createObjectStore.bind(e),n.Q1),delete:(0,n.ls)(e.delete.bind(e),I.t_),get:(0,n.ls)(e.get.bind(e),I.t_),get name(){return e.name},put:(0,n.ls)(e.put.bind(e),I.t_),get version(){return e.version}}))))),T=(0,n.ls)((function(e,{blocked:t}={}){const r=indexedDB.deleteDatabase(e);return t&&r.addEventListener("blocked",(()=>t())),h(r).then((()=>{}))}),I.t_);var A=r(8259);const q=(e,t,r,i,o,s,a,u,c,l,d)=>(0,n.zG)(C,(0,A._z)({logger:l,consentTracking:d,prefix:O})).initialise(e,t,r,l,i,o,s,a,u,c)},6197:(e,t,r)=>{r(2652)},8036:(e,t,r)=>{r.d(t,{AG:()=>a,UC:()=>o,Yh:()=>s});var n=r(6567),i=r(2652);const o=(e,t,r)=>e in t||(()=>{const t="number"==typeof e?e:parseInt(e);return!1===isNaN(t)&&r.has(t)})(),s=e=>(0,i.b0)(e,((e,t)=>t.state?(0,n.G)({[t.checksum]:t.state}):n.YP));function a(e){var t;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(t=e.properties)||void 0===t?void 0:t.segment_number)}},1628:(e,t,r)=>{r.d(t,{c:()=>We,e:()=>Be});var n=r(7183),i=r(2688),o=r(3735),s=r(6934);const a=()=>({kind:"null",value:null}),u=e=>({kind:"string",value:e}),c=e=>({kind:"number",value:e}),l=e=>({kind:"array",value:e}),d=e=>({kind:"object",value:e}),f=e=>e,p=()=>({kind:"bottom"}),g=e=>({kind:"inner",a:e}),h=e=>({kind:"top",error:e}),m=e=>({kind:"unbounded",group:e}),_=(e,t)=>({kind:"windowed",key:t,group:e}),v=(e,t,r)=>({kind:"countLimit",n:r,limit:t,group:e}),b=(e,t,r)=>({kind:"uniqueLimit",n:r,limit:t,group:e}),y=e=>({kind:"numberGroup",group:e}),w=e=>({kind:"stringGroup",group:e}),k=e=>({kind:"tuple",tuple:e}),E=e=>({state:e}),S=(e,t)=>({commands:e,payload:t});var P=r(7209),D=r(2751);const I=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return g(t(e.a));case"top":return h(e.error)}},O=e=>(0,P.Zt)(((t,r)=>{if("bottom"===t.kind&&"bottom"===r.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===r.kind)return 1;if("top"===t.kind&&"top"===r.kind)return D.Df.compare(t.error,r.error);if("top"===t.kind)return 1;if("top"===r.kind)return-1;if("inner"===t.kind&&"inner"===r.kind)return e.compare(t.a,r.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var M=r(6567),C=r(1885),x=r(1500),T=r(365),A=function(e){return-1===e?1:1===e?-1:0};function q(e,t){return(0,x.oA)(e.map(t))}function U(e,t,r,n){const i=(e,t)=>{if(0===e.length)return(0,x.oA)(t.map((e=>(0,M.G)({1:e[1],2:r(M.YP,(0,M.G)(e[2]))}))));if(0===t.length)return(0,x.oA)(e.map((e=>(0,M.G)({1:e[1],2:r((0,M.G)(e[2]),M.YP)}))));if(e.length>0&&t.length>0&&(0,P.lt)(n)(e[0][1],t[0][1])){const[n,...o]=e,s=n[1],a=n[2];return(0,x.Ce)({1:s,2:r((0,M.G)(a),M.YP)})(i(o,t))}if(e.length>0&&t.length>0&&(0,P.gt)(n)(e[0][1],t[0][1])){const[n,...o]=t,s=n[1],a=n[2];return(0,x.Ce)({1:s,2:r(M.YP,(0,M.G)(a))})(i(e,o))}if(e.length>0&&t.length>0){const[n,...o]=e,[s,...a]=t,u=n[1],c=n[2],l=s[2];return(0,x.Ce)({1:u,2:r((0,M.G)(c),(0,M.G)(l))})(i(o,a))}throw new Error("Non exhaustive match in mapOption2")},o=(0,P.Uz)((e=>e[1]))(n),s=(e=>{const t=q(e,(e=>(0,M.pC)(e[2])?(0,M.G)({1:e[1],2:e[2].value}):M.YP));return 0===t.length?M.YP:(0,M.G)(t)})(i((0,x.DY)(o)([...e].map((e=>({1:e[0],2:e[1]})))),(0,x.DY)(o)([...t].map((e=>({1:e[0],2:e[1]}))))));return(0,M.UI)((e=>new Map(e.map((e=>[e[1],e[2]])))))(s)}function G(e,t,r,n){const i=(0,P.Uz)((e=>e[0]))(n),o=(0,x.DY)(i)([...t]).reduceRight(((e,t)=>{if((0,T.nM)(e)){const n=r(t[1],e.left);return(0,M.pC)(n)?(0,T.t$)(n.value):(0,T.F2)(t[0])}return e}),(0,T.t$)(e));return(0,M.Uo)(o)}function R(e,t){return new Map([...e].map(t))}function j(e,t){return new Map([...e].filter(t))}var L=r(4268),z=r(4011);function B(e){return JSON.stringify(K(e))}function K(e){switch(e.kind){case"null":return F.encode(e);case"string":return $.encode(e);case"number":return Y.encode(e);case"array":return Q.encode(e);case"object":return V.encode(e)}}function W(e){return null===e?F.decode(e):"number"==typeof e?Y.decode(e):"string"==typeof e?$.decode(e):Array.isArray(e)?Q.decode(e):V.decode(e)}const N=(e,t)=>(0,T.t$)(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),F={encode:e=>null,decode:e=>null===e?(0,T.F2)({kind:"null",value:null}):N(e,"SimpleNull")},$={encode:e=>e.value,decode:e=>"string"==typeof e?(0,T.F2)(u(e)):N(e,"SimpleString")},Y={encode:e=>e.value,decode:e=>"number"==typeof e?(0,T.F2)(c(e)):N(e,"SimpleNumber")},Q={encode:e=>e.value.map(K),decode:e=>{if(Array.isArray(e)){const t=(0,x.fw)(T.g1)(W)(e);return(0,T.UI)(l)(t)}return N(e,"SimpleArray")}},V={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(([e,t])=>({[e]:K(t)}))))},decode:e=>{if(e&&e.constructor===Object){const t=(0,x.fw)(T.g1)((([e,t])=>(0,o.zG)(W(t),(0,T.UI)((t=>(0,o.bc)(e,t))))))(Object.entries(e));return(0,T.UI)((e=>d(new Map([...e]))))(t)}return N(e,"SimpleObject")}};function H(e){return(0,o.zG)(e,X,(0,M.UI)(B),(0,M.fS)((()=>"<encode error>")))}function J(e){return(0,M.UI)(ie)(function(e){switch(e.state.kind){case"top":return(0,M.G)(u(e.state.error));case"bottom":return M.YP;case"inner":return X(e.state.a)}}(e))}function X(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return Z(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?(0,M.G)(l(function(e,t){const r=(0,M.UI)((e=>(0,x.Ce)(e)(t)))(e);return(0,M.fS)((()=>t))(r)}((0,M.UI)((e=>u(function(e){const t=e=>(0,M.EQ)((()=>""),(e=>"b"+JSON.stringify(e)))(e.bound),r=e=>{switch(e.operation){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},n=e=>{const n=t(e[1])+r(e[1]);return 1===e[2]?n:n+JSON.stringify(e[2])};return e.map(n).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return u(e.error);case"inner":return c(e.a)}},r=e=>q([ee,te,e=>(0,o.zG)(e,ne,d,M.G)],(t=>t(e))),n=e=>q([ee,re,e=>(0,o.zG)(e,ne,(e=>R(e,(([e,t])=>[JSON.stringify(e),t]))),d,M.G)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return r(e.group);case"numberGroup":return n(e.group)}}(e.payload)))):M.YP}function Z(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||(0,M.pC)(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||(0,M.pC)(e.limit)}}function ee(e){switch(e.kind){case"unbounded":return M.YP;case"windowed":return(0,M.G)(u("w"));case"countLimit":return(0,M.G)(u(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return(0,M.G)(u(1===e.n?"u":`u${e.n}`))}}function te(e){switch(e.kind){case"unbounded":return M.YP;case"windowed":return(0,M.G)(u((0,M.pC)(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return(0,M.G)(u((0,M.pC)(e.limit)?e.limit.value:""))}}function re(e){switch(e.kind){case"unbounded":return M.YP;case"windowed":return(0,M.pC)(e.key)?(0,M.G)(c(e.key.value)):(0,M.G)({kind:"null",value:null});case"countLimit":case"uniqueLimit":return(0,M.pC)(e.limit)?(0,M.G)(c(e.limit.value)):(0,M.G)({kind:"null",value:null})}}function ne(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function ie(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?ie(e.value[0]):l(e.value.map(ie));case"object":return(0,o.zG)(j(e.value,(([e,t])=>"null"!==t.kind)),(e=>R(e,(e=>[e[0],ie(e[1])]))),d);default:return e}}function oe(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return M.YP;const[t,r,n,i]=e;if("string"===t.kind&&"string"===r.kind&&"object"===i.kind){const e=(0,M.DT)((e=>se(e[1].value)&&ae(e[2].value)))({1:t,2:r});return(0,M.UI)((e=>({prim:e[1].value,grp:e[2].value,cutoff:n,m:i.value})))(e)}return M.YP})(e);if((0,M.pC)(t)){const{prim:e,grp:r,cutoff:n,m:i}=t.value,o=ue(n,i,ce(r));return"string"==typeof o?h(o):g(S(le(e),o))}const r=(e=>{if(3!==e.length)return M.YP;const[t,r,n]=e;if("string"===t.kind&&"object"===n.kind){const e=(0,M.DT)((e=>ae(e.value)))(t);return(0,M.UI)((e=>({grp:e.value,cutoff:r,m:n.value})))(e)}return M.YP})(e);if((0,M.pC)(r)){const{grp:e,cutoff:t,m:n}=r.value,i=ue(t,n,ce(e));return"string"==typeof i?h(i):g(S(M.YP,i))}const n=(e=>{if(2!==e.length)return M.YP;const[t,r]=e;if("string"===t.kind&&"object"===r.kind){const e=(0,M.DT)((e=>se(e.value)))(t);return(0,M.UI)((e=>({prim:e.value,m:r.value})))(e)}return M.YP})(e);if((0,M.pC)(n)){const{prim:e,m:t}=n.value;return g(S(le(e),w(m(t))))}const i=(e=>{if(1!==e.length)return M.YP;const[t]=e;return"object"===t.kind?(0,M.G)({m:t.value}):M.YP})(e);if((0,M.pC)(i)){const{m:e}=i.value;return g(S(M.YP,w(m(e))))}const o=(e=>{if(e.length<1)return M.YP;const[t,...r]=e;if("string"===t.kind){const e=(0,M.DT)((e=>se(e.value)))(t);return(0,M.UI)((e=>({prim:e.value,rest:r})))(e)}return M.YP})(e);if((0,M.pC)(o)){const{prim:e,rest:t}=o.value;return g(S(le(e),fe(t)))}return g(S(M.YP,fe(e)))},r=e=>"array"===e.kind?(0,x.tS)(r)(e.value):[e];return"null"===e.kind?E({kind:"bottom"}):E(t(r(e)))}function se(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...r]=t;return-1!=="bpmvn".indexOf(e)&&r.every((e=>-1!=="bpmvn0123456789.".indexOf(e)))}}function ae(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...r]=t;return-1!=="ux".indexOf(e)&&-1===r.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function ue(e,t,r){switch(e.kind){case"string":return w(r({1:(0,M.G)(e.value),2:t}));case"number":case"null":return y(r({1:"null"===e.kind?M.YP:(0,M.G)(e.value),2:j(R(t,(([e,t])=>[Number(e),t])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function ce(e){const t=e=>t=>b(t[2],t[1],e),r=e=>t=>v(t[2],t[1],e),n=e.split("");switch(!0){case"w"===n[0]&&void 0===n[1]:return e=>_(e[2],e[1]);case"u"===n[0]&&void 0===n[1]:return t(1);case"u"===n[0]&&void 0!==n[1]:return t(parseInt(n.slice(1).join("")));case"x"===n[0]&&void 0===n[1]:return r(1);case"x"===n[0]&&void 0!==n[1]:return r(parseInt(n.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function le(e){const t=e=>(0,M.Wi)(e.bound)||"add"===e.operation||"mul"===e.operation?(0,M.G)(e):M.YP,r=(e,r,n)=>{const i=((e,r)=>(0,o.zG)(e,(e=>{switch(e){case"p":return(0,M.G)("add");case"m":return(0,M.G)("mul");case"v":return(0,M.G)("max");case"n":return(0,M.G)("min");default:return M.YP}}),M.UI((e=>({operation:e,bound:r}))),M.tS(t)))(e,n);return(0,M.UI)((e=>{const{init:t,rest:n}=(0,x.zT)((e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t}))(r);return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:n.join("")}}))(i)};return(0,M.UI)(f)((0,C.nI)(de(e,(e=>{const t=e.split("");if(0===t.length)return M.YP;const[n,...i]=t;if("b"===n){const{init:e,rest:t}=(0,o.zG)(i,(0,x.zT)((e=>-1!=="1234567890.".indexOf(e))));if(0===e.length||0===t.length)return M.YP;const n=parseFloat(e.join("")),[s,...a]=t;return r(s,a,(0,M.G)(n))}return r(n,i,M.YP)}))))}function de(e,t){const r=t(e);return(0,M.fS)((()=>[]))((0,M.UI)((e=>[e[1]].concat(de(e[2],t))))(r))}function fe(e){return k(e.map(pe))}function pe(e){switch(e.kind){case"number":return g(e.value);case"string":return h(e.value);case"null":return{kind:"bottom"};case"object":return h("{object}");case"array":return h("{array}")}}var ge=r(1828);const he={strategy:(e,t,r)=>n=>{if((0,M.Wi)(r))return t;if("delta"===e&&(0,M.Wi)(t))return M.YP;if((0,M.Wi)(t))return r;if((0,M.pC)(t)&&(0,M.pC)(r))return n(t.value,r.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,r,n,i,s)=>{const a=(0,x.pR)(O(s)),u=(0,o.zG)(t.bound,M.EQ((()=>o.yR),(e=>t=>(0,P.VV)(s)(i.fromNumber(e),t))));if("append"===e&&"add"===t.operation)return(0,x.yL)(r,n,ke("append",(0,o.ls)(i.plus,u)));if("append"===e&&"mul"===t.operation)return(0,x.yL)(r,n,ke("append",(0,o.ls)(i.times,u)));if("append"===e&&"max"===t.operation)return(0,P.Fp)(a)(r,n);if("join"===e&&"add"===t.operation)return(0,x.yL)(r,n,ke("join",(0,P.Fp)(s)));if("join"===e&&"mul"===t.operation)return(0,x.yL)(r,n,ke("join",(0,P.Fp)(s)));if("join"===e&&"max"===t.operation)return(0,P.Fp)(a)(r,n);if("min"===t.operation)return he.operation(e,{operation:"max",bound:t.bound},r,n,i,function(e){return(0,P.Zt)(((t,r)=>A(e.compare(t,r))))}(s));if("delta"===e&&"max"===t.operation)return(0,P.gt)(a)(r,n)?r:n.map(p);if("delta"===e)return(0,x.yL)(r,n,((e,t)=>(0,P.gt)(O(s))(e,t)?I(e,u):{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,r,n)=>{if("delta"===e&&"top"===r.kind&&"top"===n.kind)return(0,P.gt)(D.Df)(r.error,n.error)?h(r.error):{kind:"bottom"};if("delta"===e&&"bottom"===n.kind)return r;if("delta"===e&&"bottom"===r.kind)return{kind:"bottom"};if("top"===r.kind&&"top"===n.kind)return h((0,P.Fp)(D.Df)(r.error,n.error));if("top"===r.kind)return r;if("top"===n.kind)return n;if("inner"===r.kind&&"inner"===n.kind)return t(r.a,n.a);if("bottom"===r.kind)return n;if("bottom"===n.kind)return r;throw new Error("Non exhaustive match in extend")}},me={fromNumber:o.yR,plus:(e,t)=>e+t,times:(e,t)=>e*t};function _e(e,t,r,n){if("unbounded"===e.kind&&"unbounded"===t.kind){const i=e.group,o=t.group;return(0,M.fS)(p)((0,M.UI)((e=>g(m(e))))(U(i,o,r,n)))}if("windowed"===e.kind&&"windowed"===t.kind){const i=e.key,o=e.group,s=t.key,a=t.group,u=(0,P.Fp)((0,M.pR)(n))(i,s);return(0,M.fS)(p)((0,M.UI)((e=>g(_(e,u))))(U(o,a,r,n)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const i=e.n,o=t.n;if(i===o){const o=e.limit,s=e.group,a=t.limit,u=t.group,c=(0,P.Fp)((0,M.pR)(n))(o,a);return(0,M.fS)(p)((0,M.UI)((e=>g(v(e,c,i))))(U(s,u,r,n)))}return h("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const i=e.n,o=t.n;if(i===o){const o=e.limit,s=e.group,a=t.limit,u=t.group,c=(0,P.Fp)((0,M.pR)(n))(o,a);return(0,M.fS)(p)((0,M.UI)((e=>g(b(e,c,i))))(U(s,u,r,n)))}return h("Non matching counts")}return h("Non matching group types")}function ve(e,t,r){return(0,M.fS)(a)(be(e,M.YP)(t,r))}function be(e,t){const r=t=>(r,n)=>he.strategy(e,r,n)(be(e,t)),n=(t,n,i)=>{if("stringGroup"===n.kind&&"stringGroup"===i.kind){const e=_e(n.group,i.group,r(t),D.Df);return I(e,(e=>w(we(e,D.Df))))}if("numberGroup"===n.kind&&"numberGroup"===i.kind){const e=_e(n.group,i.group,r(t),z.Df);return I(e,(e=>y(we(e,z.Df))))}if("tuple"===n.kind&&"tuple"===i.kind){const r=(0,M.pC)(t)?t.value:[];return g(k(function(e,t,r,n,i,o){const s=(e,t)=>({1:(0,x.ke)(e)(t).concat((0,x.KB)(Math.max(0,e-t.length),p)),2:(0,x.md)(e)(t)}),a=(t,r,n)=>{if(0===t.length)return he.operation(e,{operation:"max",bound:M.YP},r,n,i,o);if(t.length>0){const[u,...c]=t,l=s(u[2],r),d=l[1],f=l[2],p=s(u[2],n),g=p[1],h=p[2];return he.operation(e,u[1],d,g,i,o).concat(a(c,f,h))}throw new Error("Non exhaustive match in recurse")};return(0,x.GY)((0,x.Qp)((e=>"bottom"===e.kind))((0,x.GY)(a(t,r,n))))}(e,r,n.tuple,i.tuple,me,z.Df)))}throw new Error(`Non matching payload. Got ${n.kind} and ${i.kind}`)},i=(e,r)=>{if((0,M.Eh)((0,C.Eh)((0,L.n_)({1:(0,L.n_)({operation:D.Eq,bound:(0,M.Eh)(z.Eq)}),2:z.Eq}))).equals(e.commands,r.commands)){const i=(0,M.Wi)(e.commands)?t:e.commands,o=n(i,e.payload,r.payload);return I(o,(t=>S(e.commands,t)))}if(i=e.commands,s=r.commands,(0,M.Eh)((0,C.Eh)((0,L.n_)({1:(0,L.n_)({operation:D.Eq}),2:z.Eq}))).equals(i,s)){const i=(0,o.zG)(((e,t)=>(0,o.zG)((0,ge.gz)(M.G5)(e,t),(0,M.UI)((([e,t])=>C.yL(e,t,((e,t)=>({1:{operation:e[1].operation,bound:(0,o.zG)((0,ge.gz)(M.G5)(e[1].bound,t[1].bound),M.UI((([e,t])=>Math.min(e,t))),M.wp((()=>e[1].bound)),M.wp((()=>t[1].bound)))},2:e[2]})))))))(e.commands,r.commands),M.wp((()=>t))),s=n(i,e.payload,r.payload);return I(s,(e=>S(i,e)))}throw new Error(`Non matching primitive strings. Got ${H(e)} and ${H(r)}`);var i,s};return(t,r)=>J(E(he.extend(e,i,oe(t).state,oe(r).state)))}function ye(e,t,r){const n=(0,M.UI)((t=>j(e,(([e,n])=>(0,P.gf)(r)(e,t)))))(t);return(0,M.fS)((()=>e))(n)}function we(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return(0,M.Wi)(e.key)?e:_(ye(e.group,e.key,t),e.key);case"countLimit":{const r=e.limit,n=e.n,i=e.group,o=G(n,i,((e,t)=>t<=1?M.YP:(0,M.G)(t-1)),t),s=(0,P.Fp)((0,M.pR)(t))(r,o);return v(ye(i,s,t),s,n)}case"uniqueLimit":{const r=e.limit,n=e.n,i=e.group,o=(e,t)=>{if("object"===e.kind){const r=[...e.value.keys(),...t.keys()],i=new Set(r);return i.size>=n?M.YP:(0,M.G)(i)}return M.YP},s=G(new Set,i,o,t),a=(0,P.Fp)((0,M.pR)(t))(r,s);return b(ye(i,a,t),a,n)}}}function ke(e,t){return(r,n)=>he.extend(e,((e,r)=>g(t(e,r))),r,n)}var Ee=r(7407),Se=r(922),Pe=r(2652),De=r(4730),Ie=r(8036);class Oe{constructor(e,t,r){this.externalData=e,this.localQueries=t,this.externalQueries=r,this.queryCodesAsList=[],this.queryCodesAsMap={};const n=this.externalData.getExternalJsonData(Se.mL)||[],i=(0,o.zG)((0,M.Y3)((()=>n.filter((e=>(0,Ie.UC)(e,this.localQueries,this.externalQueries))))),(0,M.fS)((()=>[])));this.add(i)}add(e){return(0,o.zG)(e.forEach((e=>this.queryCodesAsMap[e]=!0)),(e=>this.updateSegmentsList()))}remove(e){return(0,o.zG)(e.forEach((e=>delete this.queryCodesAsMap[e])),(e=>this.updateSegmentsList()))}getAllAsList(){return this.queryCodesAsList}getAllAsMap(){return this.queryCodesAsMap}getUpdates(e){const t=[],r=[];return Object.entries(e).forEach((e=>{let[n,i]=e;const o=parseInt(n),s=(null==i?void 0:i.result)||{result:!1},a=!0===(null==s?void 0:s.result)&&!(o in this.queryCodesAsMap),u=!1===(null==s?void 0:s.result)&&o in this.queryCodesAsMap;a?t.push(o):u&&r.push(o)})),{entered:t,exited:r}}flush(){this.externalData.setExternalJsonData(Se.mL,this.getAllAsList())}reset(){this.externalData.removeExternalData(Se.mL),this.queryCodesAsList=[],this.queryCodesAsMap={}}updateSegmentsList(){this.queryCodesAsList=Object.keys(this.queryCodesAsMap).map((e=>parseInt(e)))}}const Me="bootstrap",Ce="process",xe="processTransitions",Te="updateExternalState",Ae="updateLAL",qe="updateTPD";var Ue=r(2851);const Ge="permutive:query:changed",Re="internal_query_states",je="external_query_states",Le=e=>class extends e{constructor(){super(...arguments),this.prefix="[Query Manager]",this.isWorkerReady=!1,this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={},this.userSegments=new Oe(this.externalData,this.queryMetadata,this.externalQueries),this.segmentEntryQueryCodes=new Set,this.segmentExitQueryCodes=new Set,this.cohortEntryQueryCodes=new Set,this.cohortExitQueryCodes=new Set,this.hasNewOrModifiedQueries=!1,this.scheduler=new De.b(this.transitionDebounceTime,this.transitionDebounceMaxTime),this.debouncedProcessTransitions=this.makeDebouncedProcessTransitions(),this.registerListenersOnlyOnce=(0,Pe.HP)((()=>{this.lalRef.onChange(M.UI((e=>this.postMessage(Ae,[e])()))),this.tpdRef.onChange(M.UI((e=>this.postMessage(qe,[e])())))}));const[e,t]=Ue.Ue(this.userSegments.getAllAsList());this.queryCodesRef=e,this.queryCodesRefUpdate=t;const[r,n]=Ue.Ue(Ue.a9(M.YP));this.setLalRef=n,this.lalRef=Ue.xH(r);const[i,o]=Ue.Ue(Ue.a9(M.YP));this.setTpdRef=o,this.tpdRef=Ue.xH(i)}get queryCodesAsRef(){return this.queryCodesRef}makeStateMaps(){const e=this.permutiveData.getData(Re)||{},t=this.permutiveData.getData(je)||{};for(const t in e)if("activations"in e[t]){const r=e[t].activations;for(const e in r)r[e]=[...new Set(r[e])]}this.logDebug("Cached state maps",{internal:e,external:t});const r=Object.keys(this.queryMetadata),n=Object.keys(e);this.hasNewOrModifiedQueries=r.length!==n.length||r.filter((t=>{var r;return this.queryMetadata[t]!==(null===(r=e[t])||void 0===r?void 0:r.checksum)})).length>0,this.logDebug("has new or modified queries",this.hasNewOrModifiedQueries);const i=this.hasNewOrModifiedQueries?(0,Pe.fl)(e,(t=>{var r;const n=null===(r=e[t])||void 0===r?void 0:r.checksum,i=n===this.queryMetadata[t];return i||this.logDebug(`Dropping state for query ${t}, mismatched checksum`,{cachedChecksum:n,checksum:this.queryMetadata[t]}),i})):e;this.extStateMap=this.hasNewOrModifiedQueries?this.dropExternalStateMissingFromStateMap(t,i):t,this.stateMap={value:i,promise:Promise.resolve(i)},this.logDebug("Initialised state maps",{internal:this.stateMap.value,external:this.extStateMap,metadata:this.queryMetadata});this.permutiveData.getData("query_states")&&this.permutiveData.deleteKey("query_states")}dropExternalStateMissingFromStateMap(e,t){const r=(0,Pe.fl)(e,(e=>e in t));return this.permutiveData.setData(je,r),r}makeDebouncedProcessTransitions(){return this.scheduler.scheduleAccumulated((e=>this.processTransitions(e)()),{concat:(e,t)=>e.concat(t),empty:[]})}makeMessage(e,t,r){return{type:e,payload:(0,o.bc)(this.queryMetadata,this.extStateMap,...t),stateMap:r,userId:this.userId.get()}}trackTransition(e,t){const r=Se.ED?this.customProperties.getCustomProps():{},n=Object.assign(Object.assign(Object.assign({},r),{segment_number:t}),{});e?(this.segmentEntryQueryCodes.add(t),this.cohortEntryQueryCodes.add(t.toString())):(this.segmentExitQueryCodes.add(t),this.cohortExitQueryCodes.add(t.toString())),this.permutive.track(e?"SegmentEntry":"SegmentExit",n)}trackSegmentsTransition(e,t){e.forEach((e=>{this.trackTransition(!0,e),this.messages.emit(Ge,{queryCode:e,result:{result:!0}})})),t.forEach((e=>{this.trackTransition(!1,e),this.messages.emit(Ge,{queryCode:e,result:{result:!1}})}))}updateUserSegments(e,t){e.length>0&&this.userSegments.add(e),t.length>0&&this.userSegments.remove(t),(e.length>0||t.length>0)&&(this.userSegments.flush(),this.queryCodesRefUpdate(this.userSegments.getAllAsList()))}onStateChangeReady(e){const{entered:t,exited:r}=this.userSegments.getUpdates(e);this.trackSegmentsTransition(t,r),this.updateUserSegments(t,r),this.logDebug("Updating query state",{updatedStateMap:e}),this.permutiveData.setData(Re,e);return(t.length>0||r.length>0)&&(this.logDebug("Updated cohorts",{entered:t,exited:r}),this.messages.emit("permutive:segments:updated")),{segmentsEntered:new Set(t),segmentsExited:new Set(r),cohortsEntered:new Set(t.map(String)),cohortsExited:new Set(r.map(String))}}postMessage(e,t){const r=()=>({segmentsEntered:new Set,segmentsExited:new Set,cohortsEntered:new Set,cohortsExited:new Set});return(0,o.ls)((()=>(0,o.a9)(this.stateMap.promise)),Ee.UI((r=>this.makeMessage(e,t,r))),Ee.tS((e=>this.processMessage(e))),s.UI((e=>this.userId.get()===e.userId?e:{diff:{},errors:[]})),s.UI((0,Pe.bw)((e=>{e.errors.length>0&&this.api.reportError(`QL error(s). Got ${e.errors.join("; ")}`,this.userId.get())}))),s.UI((e=>{let{diff:t,externalStateToDrop:n}=e;if(n){const e=(0,Pe.fl)(this.stateMap.value,(e=>!(e in n)));this.extStateMap=this.dropExternalStateMissingFromStateMap(this.extStateMap,e)}this.stateMap.value=Object.assign(Object.assign({},this.stateMap.value),t);const i=this.isWorkerReady?this.onStateChangeReady(this.stateMap.value):r();return{updatedStateMap:this.stateMap.value,result:(0,o.bc)(t,i)}})),s.fS((e=>(this.api.reportError(`Error during query execution. Got ${e}`,this.userId.get()),Ee.of({updatedStateMap:this.stateMap.value,result:(0,o.bc)({},r())})))),(e=>e()),(e=>(this.stateMap.promise=e.then((e=>e.updatedStateMap)),e.then((e=>e.result)))))}processTransitions(e){return this.postMessage(xe,[e])}bootstrap(e){return(0,o.zG)(ge.gz(Ee.oE)(this.postMessage(Me,[{segments:{"1p":this.userSegments.getAllAsMap()},sessionId:this.sessionManager.getSessionId(),viewId:this.viewId.get(),lookalikeModels:this.lalRef.current,thirdPartydata:this.tpdRef.current},e]),(()=>Promise.resolve(this.registerListenersOnlyOnce()))),Ee.UI((e=>{let[t]=e;return t})))}process(e,t){return(0,Ie.AG)(e)?()=>this.debouncedProcessTransitions([e]):this.processStandard([e],t)}processStandard(e,t){return(0,o.zG)(this.postMessage(Ce,[e]),Ee.UI((0,Pe.bw)((()=>{t&&this.setAsRealTimeifNeeded(e)}))))}updateExternalState(e){return(0,o.zG)((()=>{const t=(0,Pe.b0)(e,((e,t)=>{const r=this.queryMetadata[e];return r&&t[r]?(0,M.Uo)(W(t[r])):M.YP})),r=(0,Pe.b0)(this.extStateMap,((e,t)=>(0,M.Uo)(W(t)))),n=(e,t,r)=>(0,o.zG)((0,M.Y3)((()=>(this.logDebug("Joining external state",{newExtState:e,currentExtState:t}),ve("join",e,t)))),(0,M.fS)((()=>(this.api.reportError(`Failed to join external state for query: ${r}. Had ${B(t)}, received ${B(e)}}`,this.userId.get()),e)))),i=(0,Pe.b0)(Object.assign(Object.assign({},r),t),((e,t)=>r[e]?(0,M.G)(K(n(t,r[e],e))):(0,M.G)(K(t))));return this.permutiveData.setData(je,i),this.extStateMap=i,Promise.resolve()}),Ee.tS((()=>this.postMessage(Te,[]))))}reset(){this.userSegments.reset(),this.permutiveData.setData(Re,{}),this.permutiveData.setData(je,{}),this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={}}setAsReady(){this.isWorkerReady=!0,this.onStateChangeReady(this.stateMap.value),this.messages.emit("permutive:queries:initialised")}getStateSizeInBytes(){return 2*JSON.stringify(this.stateMap.value).length}setAsRealTimeifNeeded(e){return!this.realtime.isRealtime()&&e.filter((e=>"Pageview"===e.name)).length>0?this.realtime.setAsRealtime(this.userSegments.getAllAsList().length):void 0}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}};var ze=r(3992);function Be(){{const e=r(4386).Z;return(0,n.h)(new e)}}class Ke{constructor(e){this.queryMetadata={64282:"9ea256cf3e",64284:"f6b2c28f35",64285:"11a99054a7",65230:"77e4ef51f3",66079:"d073a3f4cb",66482:"28c39d7e2b",67201:"9d2b8f1a8c",67256:"f0162b13e9",67257:"bb32218e68",67259:"752dff19f0",67262:"0282fd82f5",67264:"2fb9145d91",70732:"0c8b70cdb7",70744:"f1ff97a561",70755:"9c35f297ac",70818:"3e541a641b",70819:"939d225c0b",70820:"b527b7bee3",70821:"2e29486148",70822:"21762cb74e",70823:"22b0f5e6a5",70825:"b7df4c993f",70826:"20f264c8c1",70828:"7c87da1e37",70830:"fc6d381576",71318:"009798c6d1",71319:"8408e59ea6",71320:"7379f882ba",71321:"9ec1c0d08b",71322:"217d335cb7",71323:"9349f8835c",71324:"3bc44da42e",71325:"1a72579477",71326:"99f337235c",71327:"6baf6fc9e0",71328:"730c469ad5",71329:"42bd6eacde",71330:"5ea59374a3",71331:"e578950a9b",71332:"48679499e7",71333:"9e5c68f237",71334:"4ccffeeed6",71335:"7a129e7139",71336:"f4ecee4f20",71337:"83d72ec244",71338:"67e4efc53e",71339:"44205f87fe",71340:"7453150345",71341:"bc8a373d76",71342:"3064e8dec2",71343:"7d0311a559",71344:"f8bd0ed878",71345:"c8fca6dbf1",71349:"f5cd501738",71350:"8cfcc01ffe",71351:"842d2df3fa",71352:"9eebd55d66",71353:"eb94a284c0",71354:"897fb1d904",71355:"abb9754df9",71356:"6baba2f839",71357:"abb9754df9",71358:"188eb3b049",71359:"aca9af815d",71360:"f3813b22e4",71361:"e1f91ddd16",71362:"bbe009724b",71363:"c75a9baa0a",71364:"75c601e127",71365:"32d1103016",71366:"2e7ad1a57b",71367:"bc9166127c",71368:"3e3a234686",71369:"78595baebc",71370:"847c9c3bc8",71371:"1728e72731",71372:"b04db11db8",71373:"d901123746",72145:"3fb479b7fb",72364:"3873f5d026",72655:"d40e118931",73313:"7f8a6aea0e",73318:"0866a6b210",73724:"626fc0531b",73725:"760d318577",73727:"f554da3077",74637:"3f48410c66",74638:"293c5d2ca6",74640:"894cd4576c",74641:"ed75e4f90c",75230:"306278640a",75256:"d314e4da04",75257:"f64cf9705f",75258:"7d7b14636c",75259:"613f0d4783",75260:"5ba71b3f34",75261:"6d73f8aebc",75262:"bf3f35712d",75263:"de2635c3e8",75264:"e3162c8e3a",75265:"83bd4a0e5f",75266:"2df9e0c747",75267:"6c8f7a8a44",75692:"b2a777cc57",75759:"88a518687f",77e3:"dba75e4fbc",77001:"3854d389de",77002:"eed28a7ba5",77003:"22262ed91e",77004:"e2cdc6b32a",77241:"4be6b2e3f0",77244:"31ce0d202a",77686:"3b7ffb437f",83289:"38cbad9489",83291:"f7589db67c",83662:"21f21bbb7b",83663:"0c650be033",84684:"d995b3bcc3",84689:"1bd28d23d1",84691:"d819c7bdad",84692:"75fa31cd98",84693:"41941ec964",84914:"1fa1582686",84915:"4ea762a5ab",84918:"c9854eb5d2",84919:"7564a4c4e8",84920:"fd9d0ffa91",84921:"dd236d5501",84929:"de9846b7c3",84930:"7c69bf6225",84932:"8356bd5748",85169:"8bb66dee17",86187:"d0385cac02",87788:"961d354456",87789:"5b78036ebe",87790:"fa3c806a7d",87791:"0668b44e66",87792:"f06c16532e",87793:"abc48e5703",87794:"ef5fb00b46",87795:"794ea3b3b1",87796:"893a5ad4b3",87797:"43327fc36e",87798:"6603bc29d3",87799:"c4a6e9edb2",87800:"b6297ede10",87801:"716035aadc",87803:"57320550db",87804:"76b41fce05",89484:"e0e3e83302",89485:"a6985c8e64",89486:"6a766c00ed",89487:"fc464c0a41",89634:"7e02147f58",89635:"9acd1d3730",89637:"a979dda0e8",89638:"da0ced1c01",89720:"d7489353ea",92370:"b80e6b2e54",92375:"2cd0cfe3d9",93357:"d6a36b25a0",97629:"4dcd45e5e4",97630:"1ed44a91a9",98735:"a93dc57256",98736:"6f605775fd",99463:"8da79172f8",99551:"8793b2599b",99552:"ba6e628ca5",100759:"9090123504",104900:"7f676ae393",104901:"f638175cb7",104928:"b76189c139",104930:"1195e88cf9",105742:"e85546498b",105782:"1817cc93d6",105783:"d2750d3a30",105785:"0c876a22b0",105786:"53b59e008b",105788:"c6e38cd3cc",105789:"d7586f1f0c",105792:"d40aa56568",106247:"4214acb65a",106260:"e123bab9f1",106262:"3bd6181d51",106263:"5dc4384ceb",106359:"339736b996",106363:"ba44f633fa",106367:"20a02b79e9",106369:"2437cf286c",106372:"a01dcb25ca",106846:"566de58155",106849:"68dc0a1efb",106938:"8dbff530f4",107067:"4b76e0dfa4",107181:"5c58f36a11",107185:"60a90fd9b4",107186:"567b5a7aa2",107325:"87b224e172",107345:"10f17ffafb",107349:"033981b608",107366:"890a02a3f3",107587:"9df9e0cf88",107588:"f2f092d7e8",107837:"44582460fb",107904:"5c58f36a11",107930:"13abdeac9a",107933:"5ccc0db9e5",107934:"7b18dcc642",107935:"2ddad089dc",107937:"819f236fef",107940:"4669d01c3c",107942:"fd696845d4",107943:"66607cccf5",107944:"4b39b1648e",107945:"67f817b418",107950:"1d23b990a1",107951:"216856ec69",107952:"66988fddc6",107953:"aa7ce8bcc1",107954:"122b274b12",107955:"3c8dd40140",107956:"d3a23debb4",108463:"d1434438cc",108464:"e5d27ef447",108465:"f631f1c66e",108466:"547b58cf53",108467:"cbe3cdb943",108468:"ac46c19ee5",109745:"6d9b5903b7",109746:"85a6b74c26",109747:"d50b1d819a",110124:"ab35ea03c2",110125:"1ecee94ca1",113243:"3dde14b34c",113666:"9208605fd1",114024:"dcf56b82cc",114027:"fac80d84eb",117840:"a18004208f",117841:"e9e024e90a",117842:"f13bad8adf",117844:"3e1e2957d1",117846:"238c050fb2",117849:"7b1d2a9314",121314:"7b1d2a9314",121318:"a695daf4aa",121319:"0c3c6908c2",122778:"968fbd3309",124432:"aaadaba851",127662:"2acc93df8f",127999:"9f411f84a7",128080:"26976047c0",130172:"d1e606526c",130174:"37b1d3dfd1",130179:"58d1065f6c",130180:"56a5ca16b0",130765:"37a9efc6c1",130772:"850557c154",130773:"56a2ac83da",131062:"37b1d3dfd1",131063:"6d782c3d71",133537:"c08b86cbc2",134494:"a03a4ab06c",136664:"7b0aaea9fc",137517:"00e2694177",140190:"74877432c3",140612:"2ca4456e4b",141086:"5c44b15421",141169:"4968d1cc13",141170:"0f8c85708b",141172:"e6d6e1de2d",141942:"3eecbb28c4",142630:"a9b8bd52ef",142631:"c542cb6a98",144227:"84b0c9914e",145050:"7e29c0a5f1",146377:"e63bb3316d",146379:"d1f981d7c9",146380:"b9416adc33",146967:"19ff98c726",149139:"b43d2cd678",149158:"31dcfe50b4",149159:"393ca9cc3c",150863:"f599977153",150865:"06bc259edb",150874:"ea4a8f9018",150875:"c8c747c5cb",153377:"2d10902b1a",153380:"ebcdb6575f",153488:"b81faf567f",153718:"0b5070087e",153911:"1bda1fc8df",153912:"9f97450102",153913:"8d4cfb2dda",153914:"22769e77cb",153915:"08525d2206",153916:"ad85901666",153917:"5b545c4fe9",153918:"f956b6cf91",153919:"fa39b3345a",154203:"de4b8c48ee",154204:"c5ecc362be",157326:"b7b9c29ffa",157381:"098586c77c",157383:"90f7672384",157384:"5866c45331",157386:"fbd0a16939",157387:"c650697eab",157388:"5db2253ec1",157389:"68349d7c0c",157390:"1dc5614f22",157486:"e3c3717c77",158299:"c5e6752e3a",158302:"3142314995",158455:"3e42b324b3",158457:"ac85a79b72",162291:"3fa33e0eb4",162391:"c030ba905e",162859:"ebf0fe96bb",162860:"eae65bfb54",162861:"3f6a917a8d",162862:"ef65c44be2",162863:"e320d9c83b",162864:"6f7ed72c73",162865:"a165b4f50e",162867:"1ce59c7e2f",163344:"9b909ea6af",163345:"deebaa39fb",163349:"7509f3f84d",163434:"224a671815",163437:"d70c54fcab",165424:"275a5a2690",165425:"4b881b0c7e",166117:"e9493cf3b6",166268:"86a6a74c7d",166270:"8c2cbb467b",166271:"5d52ba1db3",166272:"6dc0f94a03",166273:"e0579213b0",166275:"8cc3658907",166276:"01a7b35198",166528:"d8f29c539f",166696:"ea394e4b3a",166838:"bc53131fb9",167813:"c4110366b3",167815:"56c76a9f61",167816:"b88e3f9485",167818:"cc99ca80dc",167819:"57cab76a81",167829:"883cb6494c",167830:"fe5ea9b64b",167831:"75ec318986",167832:"1358a47b21",167833:"47bd6f925d",167834:"73baf9b733",172563:"3f3c571744",172701:"bd48747b9d",172702:"be4ca94dba",172703:"5972a0cf65",172704:"15122985e9",172705:"d8734c1aa4",172706:"0678030891",172707:"7aed7488c8",172708:"b51817cf9e",173313:"adb8e40109",175305:"1b1b89ae29",175306:"87046753e3",175307:"7c4d072c42",175308:"67528646be",175310:"d19c92bbcf",175326:"a8ce6a56a0",175327:"627d500ab8",175338:"f2f8211cb2",175339:"d6c791eecb",175340:"6680ec26fc",175407:"1de5b1140e",175408:"5f0856cb87",175441:"af147cab6b",176851:"685f867283"},this.externalQueries=new Set([]),this.customProperties=e.customProperties,this.externalData=e.externalData,this.logger=e.logger,this.messages=e.messages,this.api=e.api,this.permutive=e.permutive,this.permutiveData=e.permutiveData,this.queryWorker=e.queryWorker,this.realtime=e.realtime,this.sessionManager=e.sessionManager,this.transitionDebounceMaxTime=e.transitionDebounceMaxTime,this.transitionDebounceTime=e.transitionDebounceTime,this.userId=e.userId,this.viewId=e.viewId,this.metrics=e.metrics}processMessage(e){return s.Y3((()=>(0,ze.t_)(this.queryWorker.postMessage(Object.assign({engine:"QLE"},e)))),i.w)}}class We extends((()=>(0,o.zG)(Ke,Le))()){constructor(e){super(e),this.makeStateMaps()}}},8318:(e,t,r)=>{r.d(t,{F:()=>s});var n=r(6934),i=r(1628),o=r(3992);const s=(0,n.Y3)((()=>{const e=(0,i.e)();return(0,o.t_)(e.postMessage(Object.assign({engine:"QLE",type:"noop",userId:""},{}))),Promise.resolve(e)}),(e=>`Failed to start QueryWorker. Got ${e}`))},3622:(e,t,r)=>{r.d(t,{$:()=>i});var n=r(2652);class i{constructor(e){this.permutiveData=e,this.eventSourceId=e.getData("event-source-id")||this.generateAndStoreEventSourceId()}get(){return this.eventSourceId}generateAndSet(){this.eventSourceId=this.generateAndStoreEventSourceId()}generateAndStoreEventSourceId(){const e=(0,n.k$)();return this.permutiveData.setData("event-source-id",e),e}}},1229:(e,t,r)=>{r.d(t,{N:()=>p,e:()=>d});var n=r(7582),i=r(2688),o=r(7183),s=r(365),a=r(3735),u=r(4730),c=r(8036),l=r(3992);function d(){{const e=r(4386).Z;return(0,o.h)(new e)}}const f={concat:(e,t)=>Object.assign(Object.assign({},e),t),empty:{}};class p{constructor(e,t,r,n,i,o,s,a,d){this.api=e,this.network=t,this.sessionManager=r,this.permutiveData=n,this.queryManager=i,this.metrics=o,this.userId=s,this.eventSourceId=a,this.stateWorker=d,this.DEBOUNCE_TIME=1e3,this.MAX_DEBOUNCE_TIME=5e3,this.fetchUnseenState=!0,this.scheduler=new u.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedSyncIfNotEmpty=this.scheduler.scheduleAccumulated((e=>this.syncIfNotEmpty.bind(this)("standard",e)),f),this.fetchUnseenState=!!g.includes("05f14972-530d-4235-a941-d79be44f229b")||this.sessionManager.sessionHasChanged(),this.stateOffset=this.permutiveData.getData("state_offset")||0,this.lastSentStateMapWithChecksum=(0,c.Yh)(this.permutiveData.getData("internal_query_states")||{}),(0,l.t_)(this.stateWorker.postMessage({engine:"SSE",type:"noop"}))}sync(e){return(0,a.zG)(this.debouncedSyncIfNotEmpty(e),(e=>Promise.resolve()))}syncWithUnseen(){return this.syncIfNotEmpty("unseen",{}).then(a.Q1)}syncIfNotEmpty(e,t){const[r,n,o]="standard"===e?[this.stateOffset,t,this.fetchUnseenState]:"unseen"===e?[this.stateOffset,this.queryManager.stateMap.value,!0]:[0,{},!0],s=this.metrics.startTimer("sdk_compute_delta_seconds",{}),u={type:"delta",stateMap:n,lastSentStateMapWithChecksum:this.lastSentStateMapWithChecksum},c=(0,a.zG)(this.stateWorker.postMessage(Object.assign({engine:"SSE"},u)),l.t_,(e=>e.then((e=>(this.metrics.stopTimer("sdk_compute_delta_seconds",s),e))))),d=e=>{this.fetchUnseenState=!1;const t=(0,a.ls)((e=>this.api.reportError(`Error sending state delta. Got ${(0,i.w)(e)}`,this.userId.get())),(e=>({})));return this.api.state(this.metrics,this.userId.get(),this.eventSourceId.get(),e,r,o).then((e=>function(e){return!!e}(e)?this.onStateResponse(e):{})).then((t=>(this.lastSentStateMapWithChecksum=e,t))).catch(t)};return c.then((e=>o||Object.keys(e).length>0?d(e):Promise.resolve({})))}resetSync(){return(0,n.mG)(this,void 0,void 0,(function*(){this.reset(),yield this.syncIfNotEmpty("reset",{})}))}reset(){this.lastSentStateMapWithChecksum={}}onStateResponse(e){const t=(0,s.Y3)((()=>JSON.parse(e.state)),(e=>this.api.reportError(`Failed to parse State API response, got ${e}`,this.userId.get()))),r=e=>e?this.queryManager.updateExternalState(e)():(0,a.Q1)();return(0,s.tO)(t)?(0,a.zG)(e.state_offset,(e=>this.stateOffset=e),(e=>this.permutiveData.setData("state_offset",e)),(e=>r(t.right)),(e=>t.right)):{}}}const g=["fe68d1f7-c9f4-45b3-8905-7cda73d3fd74"]},926:(e,t,r)=>{r.d(t,{Kd:()=>i,eJ:()=>o});r(9853);var n=r(2116);r(2851),r(2652);const i="addon:twitter_pixel",o=function(e){return n.K4((()=>{}))}},1828:(e,t,r)=>{r.d(t,{ap:()=>o,gz:()=>c});var n=r(3735),i=r(9384);function o(e,t){return function(r){return function(n){return e.ap(e.map(n,(function(e){return function(r){return t.ap(e,r)}})),r)}}}function s(e,t,r){return function(n){for(var i=Array(r.length+1),o=0;o<r.length;o++)i[o]=r[o];return i[r.length]=n,0===t?e.apply(null,i):s(e,t-1,i)}}var a={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(r){return[e,t,r]}}},4:function(e){return function(t){return function(r){return function(n){return[e,t,r,n]}}}},5:function(e){return function(t){return function(r){return function(n){return function(i){return[e,t,r,n,i]}}}}}};function u(e){return i.e$.call(a,e)||(a[e]=s(n.bc,e-1,[])),a[e]}function c(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=t.length,i=u(n),o=e.map(t[0],i),s=1;s<n;s++)o=e.ap(o,t[s]);return o}}},1500:(e,t,r)=>{r.d(t,{Ce:()=>l,DY:()=>E,DZ:()=>T,Ew:()=>b,GY:()=>k,KB:()=>f,Qp:()=>v,f2:()=>y,fw:()=>j,jV:()=>I,ke:()=>g,md:()=>_,oA:()=>A,pR:()=>z,t9:()=>P,tS:()=>M,u4:()=>G,uK:()=>q,xH:()=>C,yL:()=>S,zT:()=>m});var n=r(3735),i=(r(7341),r(9384)),o=r(1885),s=r(3328),a=r(4870),u=(r(5605),function(e){return 0===e.length}),c=o.Od,l=o.Ce,d=(o.ws,o.R3),f=(o.Im,function(e,t){return e<=0?[]:o.KB(t)(e)});var p=o.dC,g=(s.P5,s.YM,s.Z$,function(e){return function(t){return p(e,t)?w(t):t.slice(0,e)}});var h=function(e,t){for(var r=e.length,n=0;n<r&&t(e[n]);n++);return n};function m(e){return function(t){var r=D(h(t,e))(t);return{init:r[0],rest:r[1]}}}var _=function(e){return function(t){return e<=0||u(t)?w(t):e>=t.length?[]:t.slice(e,t.length)}};function v(e){return function(t){return t.slice(h(t,e))}}s.cx;function b(e){return s.Ew(e)}var y=s.f2;s.JO,s.qr;var w=function(e){return e.slice()},k=function(e){return u(e)?[]:e.slice().reverse()},E=function(e){return function(t){return t.length<=1?w(t):t.slice().sort(e.compare)}},S=function(e,t,r){for(var n=[],i=Math.min(e.length,t.length),o=0;o<i;o++)n[o]=r(e[o],t[o]);return n};var P=s.t9,D=function(e){return function(t){return e>=1&&c(t)?o.lx(e)(t):u(t)?[w(t),[]]:[[],w(t)]}};function I(e){var t=P(e);return function(r,n){if(void 0===n){var i=I(e);return function(e){return i(e,r)}}return r.filter((function(e){return t(e,n)}))}}s.kp,s.Eq;var O=o.of,M=function(e){return function(t){return(0,n.zG)(t,function(e){return function(t){for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},C=M(n.yR),x=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var o=e(n,t[n]);i.pC(o)&&r.push(o.value)}return r}},T=function(e){return x((function(t,r){return e(r)}))},A=T(n.yR),q=function(e){return U((function(t,r){return e(r)}))},U=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var o=t[i];e(i,o)?n.push(o):r.push(o)}return(0,a.s4)(r,n)}},G=(s.Lx,s.xP,s.u4),R=s.OE,j=(s.nq,s.iw,function(e){var t=L(e);return function(e){return t((function(t,r){return e(r)}))}}),L=function(e){return function(t){return R(e.of([]),(function(r,i,o){return e.ap(e.map(i,(function(e){return function(t){return(0,n.zG)(e,d(t))}})),t(r,o))}))}},z=(s.ZN,s.Eh,s.pR);s.pJ,s.oR,o.oo,s.yW,s.j0,i.F4,o.w6,o.QI,o.Ss},6862:(e,t,r)=>{function n(e){return function(t){return function(r){return e.chain(r,(function(r){return e.map(t(r),(function(){return r}))}))}}}function i(e){return function(t,r){return function(n){return e.chain(n,(function(n){return e.map(r(n),(function(e){var r;return Object.assign({},n,((r={})[t]=e,r))}))}))}}}r.d(t,{a:()=>i,m:()=>n})},365:(e,t,r)=>{r.d(t,{g1:()=>v,G5:()=>_,dO:()=>g,Pd:()=>k,ak:()=>R,tS:()=>y,g_:()=>C,ij:()=>q,DT:()=>P,fS:()=>T,pF:()=>x,nM:()=>D,tO:()=>I,t$:()=>a,UI:()=>p,Vn:()=>E,EQ:()=>M,F2:()=>u,LF:()=>A,i$:()=>G,Y3:()=>U});var n=r(6862),i=r(2690),o=r(3735),s=(r(7341),r(9384)),a=s.t$,u=s.F2,c=function(e,t){return(0,o.zG)(e,p(t))},l=function(e,t){return(0,o.zG)(e,m(t))},d=function(e,t){return(0,o.zG)(e,y(t))},f="Either",p=function(e){return function(t){return D(t)?t:u(e(t.right))}},g={URI:f,map:c},h=u,m=function(e){return function(t){return D(t)?t:D(e)?e:u(t.right(e.right))}},_={URI:f,map:c,ap:l},v={URI:f,map:c,ap:l,of:h},b=function(e){return function(t){return D(t)?t:e(t.right)}},y=b,w={URI:f,map:c,ap:l,chain:d},k=function(e,t){return function(r){return D(r)?a(e(r.left)):u(t(r.right))}},E=function(e){return function(t){return D(t)?a(e(t.left)):t}},S={URI:f,fromEither:o.yR},P=(0,i.DT)(S),D=s.nM,I=s.tO,O=function(e,t){return function(r){return D(r)?e(r.left):t(r.right)}},M=O,C=M,x=function(e){return function(t){return D(t)?e(t.left):t.right}},T=x,A=function(e){return D(e)?u(e.left):a(e.right)},q=function(e){return function(t){return null==t?a(e):u(t)}},U=function(e,t){try{return u(e())}catch(e){return a(t(e))}},G=O(o.yR,o.yR);s.F4;var R=(0,n.a)(w);s.Xl},4268:(e,t,r)=>{r.d(t,{Uz:()=>o,f7:()=>n,n_:()=>i,w4:()=>s});r(3735);var n=function(e){return{equals:function(t,r){return t===r||e(t,r)}}},i=function(e){return n((function(t,r){for(var n in e)if(!e[n].equals(t[n],r[n]))return!1;return!0}))},o=function(e){return function(t){return n((function(r,n){return t.equals(e(r),e(n))}))}},s={equals:function(e,t){return e===t}};s.equals},2690:(e,t,r)=>{r.d(t,{DT:()=>o,fX:()=>a});var n=r(3735),i=r(9384);function o(e){return function(t,r){return function(n){return e.fromEither(t(n)?i.F2(n):i.t$(r(n)))}}}function s(e){return function(t){return(0,n.ls)(t,e.fromEither)}}function a(e,t){var r=s(e);return function(e){return function(n){return t.chain(n,r(e))}}}},9679:(e,t,r)=>{r.d(t,{oU:()=>i});var n=r(3735);function i(e,t){return function(r){var i=(0,n.ls)(r,e.fromTask);return function(e){return t.chain(e,i)}}}},7341:(e,t,r)=>{function n(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.map(e,r)}))}}}function i(e){return function(t){return function(r){return e.map(r,(function(e){var r;return(r={})[t]=e,r}))}}}function o(e){return function(t,r){return function(n){return e.map(n,(function(e){var n;return Object.assign({},e,((n={})[t]=r(e),n))}))}}}r.d(t,{Hr:()=>o,UI:()=>n,YO:()=>i})},1885:(e,t,r)=>{r.d(t,{Ce:()=>l,Eh:()=>k,Im:()=>d,KB:()=>m,Od:()=>a,QI:()=>S,R3:()=>f,Ss:()=>P,dC:()=>u,lx:()=>w,nI:()=>h,of:()=>b,oo:()=>p,w6:()=>_,ws:()=>c,yL:()=>y});var n=r(3735),i=(r(7341),r(9384)),o=r(7241),s=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},a=function(e){return e.length>0},u=function(e,t){return e<0||e>=t.length},c=function(e){return function(t){return s([e],t,!0)}},l=c,d=function(e){return function(t){return s(s([],t,!0),[e],!1)}},f=d,p=function(e,t,r){if(a(r)){var n=g(r);return n.splice(e,0,t),n}return[t]},g=i.r1,h=function(e){return a(e)?i.G(e):i.YP},m=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],i=1;i<r;i++)n.push(e(i));return n}},_=function(e,t){return e<=t?m((function(t){return e+t}))(t-e+1):[e]};var v=g,b=function(e){return[e]},y=function(e,t,r){for(var n=[r(e[0],t[0])],i=Math.min(e.length,t.length),o=1;o<i;o++)n[o]=r(e[o],t[o]);return n};o.xP,o.Lx;var w=function(e){return function(t){var r=Math.max(1,e);return r>=t.length?[v(t),[]]:[(0,n.zG)(t.slice(1,r),l(E(t))),t.slice(r)]}},k=(o.u4,o.OE,o.nq,o.iw,o.YM,o.ZN,o.Eh),E=(i.F4,o.YM);o.Z$,o.VV,o.Fp,o.j0;function S(e,t){return void 0===t?l(e):(0,n.zG)(t,l(e))}var P=function(e,t){return(0,n.zG)(e,f(t))};o.ur},6567:(e,t,r)=>{r.d(t,{DT:()=>l,DZ:()=>G,EK:()=>f,EQ:()=>N,Eh:()=>w,G:()=>c,G5:()=>I,IS:()=>d,KQ:()=>J,Ri:()=>q,UI:()=>E,Uo:()=>z,Wi:()=>K,Y3:()=>H,YP:()=>u,dO:()=>S,fS:()=>$,g_:()=>F,hX:()=>U,ij:()=>V,mU:()=>Q,pC:()=>B,pR:()=>k,tS:()=>O,wp:()=>C,xH:()=>Y,xu:()=>L});var n=r(6862),i=r(3735),o=(r(7341),r(9384)),s=r(6017),a=r(4870),u=(r(5605),o.YP),c=o.G;function l(e){return function(t){return e(t)?c(t):u}}var d=function(e){return"Right"===e._tag?u:c(e.left)},f=function(e){return"Left"===e._tag?u:c(e.right)},p=function(e,t){return(0,i.zG)(e,E(t))},g=function(e,t){return(0,i.zG)(e,D(t))},h=function(e,t){return(0,i.zG)(e,O(t))},m=function(e,t){return(0,i.zG)(e,U(t))},_=function(e,t){return(0,i.zG)(e,G(t))},v=function(e,t){return(0,i.zG)(e,R(t))},b=function(e,t){return(0,i.zG)(e,j(t))},y="Option",w=function(e){return{equals:function(t,r){return t===r||(K(t)?K(r):!K(r)&&e.equals(t.value,r.value))}}},k=function(e){return{equals:w(e).equals,compare:function(t,r){return t===r?0:B(t)?B(r)?e.compare(t.value,r.value):1:-1}}},E=function(e){return function(t){return K(t)?u:c(e(t.value))}},S={URI:y,map:p},P=c,D=function(e){return function(t){return K(t)||K(e)?u:c(t.value(e.value))}},I={URI:y,map:p,ap:g},O=function(e){return function(t){return K(t)?u:e(t.value)}},M={URI:y,map:p,ap:g,chain:h},C=function(e){return function(t){return K(t)?e():t}},x=O(i.yR),T=(0,a.s4)(u,u),A=function(e){return K(e)?T:(0,a.s4)(d(e.value),f(e.value))},q={URI:y,compact:x,separate:A},U=function(e){return function(t){return K(t)?u:e(t.value)?t:u}},G=function(e){return function(t){return K(t)?u:e(t.value)}},R=function(e){return function(t){return(0,a.s4)(m(t,(0,s.ff)(e)),m(t,e))}},j=function(e){return(0,i.ls)(E(e),A)},L={URI:y,map:p,compact:x,separate:A,filter:m,filterMap:_,partition:v,partitionMap:b},z=f,B=o.pC,K=function(e){return"None"===e._tag},W=function(e,t){return function(r){return K(r)?e():t(r.value)}},N=W,F=N,$=function(e){return function(t){return K(t)?e():t.value}},Y=x,Q=(0,n.m)(M),V=function(e){return null==e?u:c(e)},H=function(e){try{return c(e())}catch(e){return u}},J=function(e){return(0,i.ls)(e,V)};o.F4,o.Xl},7209:(e,t,r)=>{r.d(t,{Fp:()=>f,Uz:()=>a,VV:()=>d,Zt:()=>s,gf:()=>l,gt:()=>c,lt:()=>u,uZ:()=>p});var n=r(4268),i=r(3735),o=function(e){return function(t,r){return t===r||0===e(t,r)}},s=function(e){return{equals:o(e),compare:function(t,r){return t===r?0:e(t,r)}}},a=function(e){return function(t){return s((function(r,n){return t.compare(e(r),e(n))}))}},u=(i.W8,function(e){return function(t,r){return-1===e.compare(t,r)}}),c=function(e){return function(t,r){return 1===e.compare(t,r)}},l=function(e){return function(t,r){return-1!==e.compare(t,r)}},d=function(e){return function(t,r){return t===r||e.compare(t,r)<1?t:r}},f=function(e){return function(t,r){return t===r||e.compare(t,r)>-1?t:r}},p=function(e){var t=d(e),r=f(e);return function(e,n){return function(i){return r(t(i,n),e)}}};n.w4.equals},6017:(e,t,r)=>{r.d(t,{ff:()=>n,xD:()=>i});r(3735);var n=function(e){return function(t){return!e(t)}},i=function(e){return function(t){return function(r){return t(r)&&e(r)}}}},3328:(e,t,r)=>{r.d(t,{DZ:()=>j,Eh:()=>V,Eq:()=>M,Ew:()=>y,JO:()=>k,Lx:()=>W,OE:()=>N,Od:()=>f,P5:()=>m,Su:()=>U,UI:()=>q,YM:()=>_,Z$:()=>v,ZN:()=>Q,bj:()=>P,cx:()=>b,f2:()=>w,hX:()=>G,hp:()=>S,iw:()=>$,j0:()=>re,kp:()=>O,nI:()=>Z,nq:()=>F,oR:()=>X,pJ:()=>J,pR:()=>H,qr:()=>E,t9:()=>D,u4:()=>K,uK:()=>L,vP:()=>Y,xH:()=>A,xP:()=>B,xb:()=>d,yW:()=>te});var n=r(4268),i=r(3735),o=(r(7341),r(9384)),s=r(4011),a=r(7209),u=r(7241),c=r(4870),l=(r(5605),function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}),d=function(e){return 0===e.length},f=u.Od,p=(u.Ce,u.ws,u.R3);u.Im;var g=function(e,t){return function(r){return f(r)?t(r):e()}},h=u.dC;function m(e,t){return void 0===t?function(t){return m(e,t)}:h(e,t)?o.YP:o.G(t[e])}var _=function(e){return f(e)?o.G(u.YM(e)):o.YP},v=function(e){return f(e)?o.G(u.Z$(e)):o.YP};var b=function(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(r);return o.YP}};function y(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(t[r]);return o.YP}}var w=function(e){return function(t){for(var r=0;r<t.length;r++){var n=e(t[r]);if(o.pC(n))return n}return o.YP}};var k=function(e){return function(t){for(var r=t.length-1;r>=0;r--){var n=e(t[r]);if(o.pC(n))return n}return o.YP}},E=function(e){return function(t){for(var r=t.length-1;r>=0;r--)if(e(t[r]))return o.G(r);return o.YP}},S=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Right"===n._tag&&t.push(n.right)}return t},P=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Left"===n._tag&&t.push(n.left)}return t};function D(e){return function(t,r){if(void 0===r){var n=D(e);return function(e){return n(t,e)}}for(var i,o=0;o<r.length;o++)if(i=r[o],e.equals(i,t))return!0;return!1}}var I=function(e,t,r){return(0,i.zG)(e,K(t,r))},O=function(e,t){return(0,i.zG)(e,J(t))},M=function(e,t){return(0,i.zG)(e,X(t))},C=u.of,x=function(){return ee},T=function(e){return function(t){return(0,i.zG)(t,function(e){return function(t){if(d(t))return ee;for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},A=T(i.yR),q=function(e){return function(t){return t.map((function(t){return e(t)}))}},U=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},G=function(e){return function(t){return t.filter(e)}},R=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var i=e(n,t[n]);o.pC(i)&&r.push(i.value)}return r}},j=function(e){return R((function(t,r){return e(r)}))},L=(i.yR,function(e){return z((function(t,r){return e(r)}))}),z=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var o=t[i];e(i,o)?n.push(o):r.push(o)}return(0,c.s4)(r,n)}},B=function(e){return function(t){return function(r){return r.reduce((function(r,n,i){return e.concat(r,t(i,n))}),e.empty)}}},K=function(e,t){return N(e,(function(e,r,n){return t(r,n)}))},W=function(e){var t=B(e);return function(e){return t((function(t,r){return e(r)}))}},N=function(e,t){return function(r){for(var n=r.length,i=e,o=0;o<n;o++)i=t(o,i,r[o]);return i}},F=function(e,t){return $(e,(function(e,r,n){return t(r,n)}))},$=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},Y=function(e){return function(t){return I(t,e.of(x()),(function(t,r){return e.ap(e.map(t,(function(e){return function(t){return(0,i.zG)(e,p(t))}})),r)}))}},Q=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},V=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},H=function(e){return(0,a.Zt)((function(t,r){for(var n=t.length,i=r.length,o=Math.min(n,i),a=0;a<o;a++){var u=e.compare(t[a],r[a]);if(0!==u)return u}return s.Df.compare(n,i)}))},J=function(e){return function(t){for(var r=l([],e(t),!0),n=[];r.length>0;){var i=r.shift();o.nM(i)?r.unshift.apply(r,e(i.left)):n.push(i.right)}return n}},X=function(e){return function(t){var r=e(t),n=[],i=[];function s(t){o.nM(t)?e(t.left).forEach((function(e){return n.push(e)})):i.push(t.right)}for(var a=0,u=r;a<u.length;a++){s(u[a])}for(;n.length>0;)s(n.shift());return i}},Z=(u.oo,function(e){return d(e)?ee:e.slice()}),ee=u.cS;function te(e){return function(t){return t.every(e)}}var re=function(e){var t=u.j0(e);return function(r){return g((function(){return e.empty}),t(r))}};o.F4,u.w6,u.QI,u.Ss},7241:(e,t,r)=>{r.d(t,{R3:()=>_,Im:()=>m,ur:()=>K,QI:()=>N,cS:()=>d,Lx:()=>M,xP:()=>T,c2:()=>b,Eh:()=>G,ZN:()=>U,ru:()=>E,vM:()=>S,YM:()=>R,j0:()=>W,Od:()=>f,dC:()=>p,Z$:()=>L,Fp:()=>B,VV:()=>z,of:()=>I,Ce:()=>h,ws:()=>g,w6:()=>w,u4:()=>O,nq:()=>C,iw:()=>A,OE:()=>x,Ss:()=>F,oo:()=>v,Ri:()=>P});var n,i=r(4268),o=r(3735),s=(r(7341),r(9384)),a=r(7209),u=function(e){return{concat:a.VV(e)}},c=function(e){return{concat:a.Fp(e)}};n=void 0;var l=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},d=s.Xl,f=s.Od,p=function(e,t){return e<0||e>=t.length},g=function(e){return function(t){return l([e],t,!0)}},h=g,m=function(e){return function(t){return l(l([],t,!0),[e],!1)}},_=m,v=function(e,t,r){if(f(r)){var n=s.r1(r);return n.splice(e,0,t),n}return[t]},b=function(e){return f(e)?s.G(e):s.YP},y=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],i=1;i<r;i++)n.push(e(i));return n}},w=function(e,t){return e<=t?y((function(t){return e+t}))(t-e+1):[e]};function k(e,t){return t?e.concat(t):function(t){return t.concat(e)}}function E(e){return function(t){var r=t.length;if(0===r)return d;for(var n=[],i=t[0],o=[i],s=1;s<r;s++){var a=t[s];e.equals(a,i)?o.push(a):(n.push(o),o=[i=a])}return n.push(o),n}}var S=function(e){return function(t){for(var r={},n=0,i=t;n<i.length;n++){var o=i[n],a=e(o);s.e$.call(r,a)?r[a].push(o):r[a]=[o]}return r}};var P=function(e){for(var t=[e[0][0]],r=[e[0][1]],n=1;n<e.length;n++)t[n]=e[n][0],r[n]=e[n][1];return[t,r]},D=function(e){return function(t){for(var r=[e,t[0]],n=1;n<t.length;n++)r.push(e,t[n]);return r}},I=s.ri,O=function(e,t){return x(e,(function(e,r,n){return t(r,n)}))},M=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n){return e.concat(r,t(n))}),t(r[0]))}}},C=function(e,t){return A(e,(function(e,r,n){return t(r,n)}))},x=function(e,t){return function(r){return r.reduce((function(e,r,n){return t(n,e,r)}),e)}},T=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n,i){return e.concat(r,t(i+1,n))}),t(0,r[0]))}}},A=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},q=s.YM,U=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},G=function(e){return(0,i.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},R=(s.F4,q),j=s.Gb,L=function(e){return e[e.length-1]},z=function(e){var t=u(e);return function(e){return e.reduce(t.concat)}},B=function(e){var t=c(e);return function(e){return e.reduce(t.concat)}},K=function(e){return function(t){return t.reduce(e.concat)}},W=function(e){var t=K(e);return function(e){return(0,o.ls)(function(e){return function(t){var r=j(t);return f(r)?(0,o.zG)(r,D(e),h(R(t))):t}}(e),t)}};function N(e,t){return void 0===t?h(e):(0,o.zG)(t,h(e))}var F=function(e,t){return(0,o.zG)(e,k([t]))}},4923:(e,t,r)=>{r.d(t,{Bu:()=>m,CC:()=>j,DZ:()=>te,EW:()=>F,Eh:()=>le,G:()=>A,HA:()=>U,I8:()=>z,P5:()=>_,RF:()=>L,RJ:()=>K,SW:()=>Y,Su:()=>b,UI:()=>y,Ub:()=>V,V_:()=>N,XP:()=>d,Yz:()=>C,_Y:()=>W,_r:()=>D,dp:()=>u,dx:()=>g,e$:()=>h,hX:()=>ee,jt:()=>O,kp:()=>R,mK:()=>X,mS:()=>B,nn:()=>G,nr:()=>fe,nu:()=>$,oA:()=>ae,oh:()=>ue,qS:()=>J,ri:()=>S,sq:()=>x,t9:()=>q,tV:()=>ne,uK:()=>re,uZ:()=>de,vA:()=>H,vP:()=>P,xb:()=>c,yW:()=>T,z7:()=>M,zV:()=>Q});var n=r(4268),i=r(3735),o=r(9384),s=r(4870),a=r(2751),u=(r(5605),function(e){return Object.keys(e).length}),c=function(e){for(var t in e)if(o.e$.call(e,t))return!1;return!0},l=function(e){return function(t){return Object.keys(t).sort(e.compare)}},d=l(a.Df);function f(e){if("function"==typeof e)return f(a.Df)(e);var t=l(e);return function(e){return function(r){for(var n=[],i=0,o=t(r);i<o.length;i++){var s=o[i];n.push(e(s,r[s]))}return n}}}var p=f(a.Df)((function(e,t){return[e,t]}));var g=function(e,t){return function(r){if(o.e$.call(r,e)&&r[e]===t)return r;var n=Object.assign({},r);return n[e]=t,n}},h=function(e,t){return o.e$.call(t,e)};function m(e){return function(t,r){if(void 0===r){var n=m(e);return function(e){return n(e,t)}}for(var i in t)if(!o.e$.call(r,i)||!e.equals(t[i],r[i]))return!1;return!0}}function _(e,t){return void 0===t?function(t){return _(e,t)}:o.e$.call(t,e)?o.G(t[e]):o.YP}var v={};function b(e){return function(t){var r={};for(var n in t)o.e$.call(t,n)&&(r[n]=e(n,t[n]));return r}}function y(e){return b((function(t,r){return e(r)}))}function w(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return w(a.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var i=e,o=r(n),s=o.length,a=0;a<s;a++){var u=o[a];i=t(u,i,n[u])}return i}}}function k(e){if("compare"in e){var t=l(e);return function(e){return function(r){return function(n){for(var i=e.empty,o=t(n),s=o.length,a=0;a<s;a++){var u=o[a];i=e.concat(i,r(u,n[u]))}return i}}}}return k(a.Df)(e)}function E(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return E(a.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var i=e,o=r(n),s=o.length-1;s>=0;s--){var a=o[s];i=t(a,n[a],i)}return i}}}var S=function(e,t){var r;return(r={})[e]=t,r};function P(e){return X(a.Df)(e)}function D(e){return function(t){var r={},n={};for(var i in t)if(o.e$.call(t,i)){var a=e(i,t[i]);switch(a._tag){case"Left":r[i]=a.left;break;case"Right":n[i]=a.right}}return(0,s.s4)(r,n)}}function I(e){return function(t){var r={},n={};for(var i in t)if(o.e$.call(t,i)){var a=t[i];e(i,a)?n[i]=a:r[i]=a}return(0,s.s4)(r,n)}}function O(e){return function(t){var r={};for(var n in t)if(o.e$.call(t,n)){var i=e(n,t[n]);o.pC(i)&&(r[n]=i.value)}return r}}function M(e){return function(t){var r={},n=!1;for(var i in t)if(o.e$.call(t,i)){var s=t[i];e(i,s)?r[i]=s:n=!0}return n?r:t}}var C=p,x=function(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r];t[i[0]]=i[1]}return t};function T(e){return function(t){for(var r in t)if(!e(t[r]))return!1;return!0}}function A(e){return function(t){for(var r in t)if(e(t[r]))return!0;return!1}}function q(e){return function(t,r){if(void 0===r){var n=q(e);return function(e){return n(t,e)}}for(var i in r)if(e.equals(r[i],t))return!0;return!1}}var U=function(e,t){return(0,i.zG)(e,y(t))},G=function(e,t){return(0,i.zG)(e,b(t))},R=function(e){var t=ie(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},j=function(e){return function(t){var r=oe(e)(t);return function(e,t){return(0,i.zG)(e,r(t))}}},L=function(e){var t=se(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},z=function(e,t){return(0,i.zG)(e,ee(t))},B=function(e,t){return(0,i.zG)(e,te(t))},K=function(e,t){return(0,i.zG)(e,re(t))},W=function(e,t){return(0,i.zG)(e,ne(t))},N=function(e){var t=w(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},F=function(e){var t=k(e);return function(e){var r=t(e);return function(e,t){return(0,i.zG)(e,r(t))}}},$=function(e){var t=E(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},Y=function(e,t){return(0,i.zG)(e,D(t))},Q=function(e,t){return(0,i.zG)(e,I(t))},V=function(e,t){return(0,i.zG)(e,O(t))},H=function(e,t){return(0,i.zG)(e,M(t))},J=function(e){var t=Z(e);return function(e){var r=t(e);return function(e,t){return r(e,(0,i.ls)(i.SK,t))}}},X=function(e){var t=J(e);return function(e){var r=t(e);return function(e){return r(e,i.yR)}}},Z=function(e){return function(t){var r=l(e);return function(e,n){var i=r(e);if(0===i.length)return t.of(v);for(var o=t.of({}),s=function(r){o=t.ap(t.map(o,(function(e){return function(t){var n;return Object.assign({},e,((n={})[r]=t,n))}})),n(r,e[r]))},a=0,u=i;a<u.length;a++){s(u[a])}return o}}},ee=function(e){return M((function(t,r){return e(r)}))},te=function(e){return O((function(t,r){return e(r)}))},re=function(e){return I((function(t,r){return e(r)}))},ne=function(e){return D((function(t,r){return e(r)}))};function ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=w(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return ie(a.Df).apply(void 0,e)}function oe(e){if("compare"in e){var t=k(e);return function(e){var r=t(e);return function(e){return r((function(t,r){return e(r)}))}}}return oe(a.Df)(e)}function se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=E(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return se(a.Df).apply(void 0,e)}var ae=function(e){var t={};for(var r in e)if(o.e$.call(e,r)){var n=e[r];o.pC(n)&&(t[r]=n.value)}return t},ue=function(e){var t={},r={};for(var n in e)if(o.e$.call(e,n)){var i=e[n];o.nM(i)?t[n]=i.left:r[n]=i.right}return(0,s.s4)(t,r)},ce="ReadonlyRecord";function le(e){var t=m(e);return(0,n.f7)((function(e,r){return t(e)(r)&&t(r)(e)}))}function de(e){return{concat:function(t,r){if(c(t))return r;if(c(r))return t;var n=Object.assign({},t);for(var i in r)o.e$.call(r,i)&&(n[i]=o.e$.call(t,i)?e.concat(t[i],r[i]):r[i]);return n},empty:v}}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df;function fe(e,t){return o.e$.call(void 0===t?this:t,e)}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df},7927:(e,t,r)=>{r.d(t,{UI:()=>c,XP:()=>a,dx:()=>u,hX:()=>y,xb:()=>o});var n=r(4923),i=r(2751),o=(r(5605),n.dp,n.xb),s=function(e){return function(t){return Object.keys(t).sort(e.compare)}},a=s(i.Df);var u=n.dx;n.e$;n.Bu,n.P5,n.Su;var c=n.UI;n.ri;function l(e){return n.vP(e)}n._r;n.jt;n.yW,n.G,n.t9;var d=n.HA,f=(n.nn,n.kp),p=n.CC,g=n.RF,h=(n.I8,n.mS,n.RJ,n._Y,n.V_),m=n.EW,_=n.nu,v=(n.SW,n.zV,n.Ub,n.vA,n.qS),b=(n.mK,function(e){return function(t){var r=s(e);return function(e,n){var i=r(e);if(0===i.length)return t.of({});for(var o=t.of({}),s=function(r){o=t.ap(t.map(o,(function(e){return function(t){return e[r]=t,e}})),n(r,e[r]))},a=0,u=i;a<u.length;a++){s(u[a])}return o}}}),y=n.hX;n.DZ,n.uK,n.tV;n.oA,n.oh;var w="Record";n.Eh,n.uZ,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,n.nr,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df},2197:(e,t,r)=>{r.d(t,{ff:()=>n});var n=function(e){return function(t){return!e(t)}}},4870:(e,t,r)=>{r.d(t,{Pd:()=>i,s4:()=>n});r(3735);var n=function(e,t){return{left:e,right:t}},i=function(e,t){return function(r){return n(e(o(r)),t(s(r)))}},o=function(e){return e.left},s=function(e){return e.right}},7407:(e,t,r)=>{r.d(t,{qA:()=>y,Hi:()=>b,qo:()=>w,dO:()=>_,UA:()=>k,PM:()=>v,ak:()=>O,YO:()=>I,tS:()=>h,mU:()=>S,At:()=>D,tD:()=>u,UI:()=>f,of:()=>g,RD:()=>A,oE:()=>U,uU:()=>T,pE:()=>q});var n=r(6862),i=r(3735);function o(e,t){var r=(0,n.m)(t);return function(t){return r((0,i.ls)(t,e.fromIO))}}var s=r(7341),a=r(9384),u=function(e){return function(){return Promise.resolve().then(e)}};var c=function(e,t){return(0,i.zG)(e,f(t))},l=function(e,t){return(0,i.zG)(e,p(t))},d=function(e,t){return(0,i.zG)(e,h(t))},f=function(e){return function(t){return function(){return Promise.resolve().block().then(e)}}},p=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},g=function(e){return function(){return Promise.resolve(e)}},h=function(e){return function(t){return function(){return Promise.resolve().then(t).blockme(                         )}}},m="Task";var _={URI:m,map:c},v={URI:m,of:g},b={URI:m,map:c,ap:l},y={URI:m,map:c,ap:l,of:g},w={URI:m,map:c,ap:l,chain:d},k={URI:m,map:c,of:g,ap:l,chain:d},E=i.yR,S=(0,n.m)(w),P={URI:m,fromIO:u},D=o(P,w),I=(a.F4,(0,s.YO)(_)),O=(0,n.a)(w),M=g(a.Xl),C=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.blockme(                                                                         ))}}}(e);return function(e){return a.Od(e)?t(e):M}},x=function(e){var t=function(e){return function(t){return function(){return a.Gb(t).reduce((function(t,r,n){return t.then((function(t){return Promise.resolve().then(e(n+1,r)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,a.YM(t))).then(a.ri))}}}(e);return function(e){return a.Od(e)?t(e):M}},T=function(e){return C((function(t,r){return e(r)}))},A=T(i.yR),q=function(e){return x((function(t,r){return e(r)}))},U={URI:m,map:c,of:g,ap:l,chain:d,fromIO:u,fromTask:E}},6934:(e,t,r)=>{r.d(t,{Do:()=>pe,ak:()=>ge,tS:()=>re,fX:()=>le,wE:()=>fe,Zl:()=>ne,Uo:()=>K,tD:()=>z,fF:()=>B,fS:()=>N,t$:()=>U,UI:()=>X,Vn:()=>ee,LV:()=>W,F2:()=>G,Ij:()=>he,Y3:()=>F});var n=r(6862),i=r(1828),o=r(365),s=r(3735),a=r(7341);function u(e){return(0,s.ls)(o.F2,e.of)}function c(e){return(0,s.ls)(o.t$,e.of)}function l(e){return function(t){return e.map(t,o.F2)}}function d(e){return function(t){return e.map(t,o.t$)}}function f(e){return function(t){return(0,s.ls)(o.ij(t),e.of)}}function p(e){var t=f(e);return function(e){var r=t(e);return function(e){return(0,s.ls)(e,r)}}}function g(e){var t=_(e),r=p(e);return function(e){var n=r(e);return function(e){return t(n(e))}}}function h(e){return(0,a.UI)(e,o.dO)}function m(e){return(0,i.ap)(e,o.G5)}function _(e){return function(t){return function(r){return e.chain(r,(function(r){return o.nM(r)?e.of(r):t(r.right)}))}}}function v(e){return function(t){return function(r){return e.chain(r,(function(r){return o.nM(r)?t():e.of(r)}))}}}function b(e){return function(t,r){return function(n){return e.map(n,o.Pd(t,r))}}}function y(e){return function(t){return function(r){return e.map(r,o.Vn(t))}}}function w(e){return function(t,r){return function(n){return e.map(n,o.EQ(t,r))}}}function k(e){return function(t,r){return function(n){return e.chain(n,o.EQ(t,r))}}}function E(e){return function(t){return function(r){return e.chain(r,o.EQ(t,e.of))}}}function S(e){return function(t){return function(r){return e.chain(r,(function(r){return o.nM(r)?t(r.left):e.of(r)}))}}}function P(e){var t=S(e);return function(r){return t((function(t){return e.map(r(t),(function(e){return o.nM(e)?e:o.t$(t)}))}))}}function D(e){return function(t){return function(r){return e.chain(r,o.EQ((function(r){return e.map(t(r),o.t$)}),(function(t){return e.of(o.F2(t))})))}}}function I(e){return function(t){return e.map(t,o.LF)}}function O(e){return function(t){return e.map(t,o.i$)}}var M=r(2690),C=r(9679),x=r(9384),T=r(7407),A=function(e,t,r,n){return blockme(          )((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).bloc())}))},q=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.blockme()}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}block()}}},U=c(T.PM),G=u(T.PM),R=l(T.dO),j=d(T.dO),L=(0,s.ls)(T.tD,R),z=(T.tD,L),B=R,K=T.of,W=(T.tD,T.dO,k(T.UA)),N=E(T.UA),F=function(e,t){return function(){return blockme(                                                                                                                                                                                                                           )}},$=(T.dO,T.PM,T.PM,T.UA,T.UA,T.UA,T.UA,T.dO,function(e,t){return(0,s.zG)(e,X(t))}),Y=function(e,t){return(0,s.zG)(e,te(t))},Q=function(e,t){return(0,s.zG)(e,re(t))},V=function(e,t,r){return(0,s.zG)(e,Z(t,r))},H=function(e,t){return(0,s.zG)(e,ee(t))},J=function(e,t){return(0,s.zG)(e,ie(t))},X=h(T.dO),Z=b(T.dO),ee=y(T.dO),te=m(T.Hi),re=_(T.UA),ne=re,ie=v(T.UA),oe=G,se=U,ae="TaskEither";var ue={URI:ae,map:$,ap:Y,chain:Q},ce={URI:ae,fromEither:K},le=(0,M.fX)(ce,ue),de={URI:ae,fromIO:z,fromTask:B},fe=(0,C.oU)(de,ue);var pe=oe(x.F4),ge=(0,n.a)(ue),he=(x.Xl,{URI:ae,bimap:V,mapLeft:H,map:$,of:oe,ap:Y,chain:Q,alt:J,fromIO:z,fromTask:B,throwError:se})},5605:(e,t,r)=>{function n(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.separate)}}}function i(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.compact)}}}r.d(t,{BL:()=>i,Fj:()=>n})},3735:(e,t,r)=>{r.d(t,{MZ:()=>i,Q1:()=>u,SK:()=>f,W8:()=>s,a9:()=>o,bc:()=>l,gn:()=>a,ls:()=>c,yR:()=>n,zG:()=>d});function n(e){return e}var i=n;function o(e){return function(){return e}}var s=o(!0),a=o(null),u=o(void 0);function c(e,t,r,n,i,o,s,a,u){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return r(t(e.apply(this,arguments)))};case 4:return function(){return n(r(t(e.apply(this,arguments))))};case 5:return function(){return i(n(r(t(e.apply(this,arguments)))))};case 6:return function(){return o(i(n(r(t(e.apply(this,arguments))))))};case 7:return function(){return s(o(i(n(r(t(e.apply(this,arguments)))))))};case 8:return function(){return a(s(o(i(n(r(t(e.apply(this,arguments))))))))};case 9:return function(){return u(a(s(o(i(n(r(t(e.apply(this,arguments)))))))))}}}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function d(e,t,r,n,i,o,s,a,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return i(n(r(t(e))));case 6:return o(i(n(r(t(e)))));case 7:return s(o(i(n(r(t(e))))));case 8:return a(s(o(i(n(r(t(e)))))));case 9:return u(a(s(o(i(n(r(t(e))))))));default:for(var c=arguments[0],l=1;l<arguments.length;l++)c=arguments[l](c);return c}}var f=function(e,t){return t}},9384:(e,t,r)=>{r.d(t,{F2:()=>l,F4:()=>m,G:()=>s,Gb:()=>g,Od:()=>f,Xl:()=>h,YM:()=>p,YP:()=>o,e$:()=>_,nM:()=>a,pC:()=>i,r1:()=>v,ri:()=>d,t$:()=>c,tO:()=>u});var n=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},i=function(e){return"Some"===e._tag},o={_tag:"None"},s=function(e){return{_tag:"Some",value:e}},a=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},c=function(e){return{_tag:"Left",left:e}},l=function(e){return{_tag:"Right",right:e}},d=function(e){return[e]},f=function(e){return e.length>0},p=function(e){return e[0]},g=function(e){return e.slice(1)},h=[],m={},_=Object.prototype.hasOwnProperty,v=function(e){return n([e[0]],e.slice(1),!0)}},4011:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};n.equals,i.compare},2751:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n,pn:()=>s,xb:()=>o});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},o=function(e){return 0===e.length},s=function(e,t){return function(r){return r.endsWith(e,t)}}},4386:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(477),i=r.n(n);function o(){return i()('/*! permutive-javascript-sdk v19.102.0 (web) (built 2023-12-08T16:15:38.633Z) */(()=>{"use strict";function r(r){return r}function n(r){return function(){return r}}var t=n(void 0);function e(r,n,t,e,u,i,o,c,a){switch(arguments.length){case 1:return r;case 2:return function(){return n(r.apply(this,arguments))};case 3:return function(){return t(n(r.apply(this,arguments)))};case 4:return function(){return e(t(n(r.apply(this,arguments))))};case 5:return function(){return u(e(t(n(r.apply(this,arguments)))))};case 6:return function(){return i(u(e(t(n(r.apply(this,arguments))))))};case 7:return function(){return o(i(u(e(t(n(r.apply(this,arguments)))))))};case 8:return function(){return c(o(i(u(e(t(n(r.apply(this,arguments))))))))};case 9:return function(){return a(c(o(i(u(e(t(n(r.apply(this,arguments)))))))))}}}function u(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r}function i(r,n,t,e,u,i,o,c,a){switch(arguments.length){case 1:return r;case 2:return n(r);case 3:return t(n(r));case 4:return e(t(n(r)));case 5:return u(e(t(n(r))));case 6:return i(u(e(t(n(r)))));case 7:return o(i(u(e(t(n(r))))));case 8:return c(o(i(u(e(t(n(r)))))));case 9:return a(c(o(i(u(e(t(n(r))))))));default:for(var s=arguments[0],f=1;f<arguments.length;f++)s=arguments[f](s);return s}}var o=function(r,n,t){if(t||2===arguments.length)for(var e,u=0,i=n.length;u<i;u++)!e&&u in n||(e||(e=Array.prototype.slice.call(n,0,u)),e[u]=n[u]);return r.concat(e||Array.prototype.slice.call(n))},c=function(r){return"Some"===r._tag},a={_tag:"None"},s=function(r){return{_tag:"Some",value:r}},f=function(r){return"Left"===r._tag},l=Object.prototype.hasOwnProperty,p=function(r){return o([r[0]],r.slice(1),!0)},d=function(r){return function(n){return!r(n)}};var m=a,v=s;function h(r){return function(n){return r(n)?v(n):m}}var g=function(r){return"Left"===r._tag?m:v(r.right)},y=function(r,n){return i(r,q(n))},b=function(r,n){return i(r,S(n))},w="Option",k=function(r){return{equals:function(n,t){return n===t||(z(n)?z(t):!z(t)&&r.equals(n.value,t.value))}}},_=function(r){return{equals:k(r).equals,compare:function(n,t){return n===t?0:j(n)?j(t)?r.compare(n.value,t.value):1:-1}}},q=function(r){return function(n){return z(n)?m:v(r(n.value))}},S=function(r){return function(n){return z(n)||z(r)?m:v(n.value(r.value))}},A={URI:w,map:y,ap:b},x=function(r){return function(n){return z(n)?m:r(n.value)}},O=function(r){return function(n){return z(n)?r():n}},T=g,j=c,z=function(r){return"None"===r._tag},M=function(r,n){return function(t){return z(t)?r():n(t.value)}},C=M,B=C,N=function(r){return function(n){return z(n)?r():n.value}};function P(r){return r instanceof Error?r:new Error("string"==typeof r?r:JSON.stringify(r))}const L=()=>({kind:"null",value:null}),E=r=>({kind:"string",value:r}),I=r=>({kind:"number",value:r}),F=r=>({kind:"array",value:r}),D=r=>({kind:"object",value:r}),G=r=>r,H=()=>({kind:"bottom"}),R=r=>({kind:"inner",a:r}),U=r=>({kind:"top",error:r}),V=r=>({kind:"unbounded",group:r}),W=(r,n)=>({kind:"windowed",key:n,group:r}),J=(r,n,t)=>({kind:"countLimit",n:t,limit:n,group:r}),Y=(r,n,t)=>({kind:"uniqueLimit",n:t,limit:n,group:r}),Q=r=>({kind:"numberGroup",group:r}),K=r=>({kind:"stringGroup",group:r}),$=r=>({kind:"tuple",tuple:r}),Z=r=>({state:r}),X=(r,n)=>({commands:r,payload:n});var rr=function(r){return{equals:function(n,t){return n===t||r(n,t)}}},nr=function(r){return rr((function(n,t){for(var e in r)if(!r[e].equals(n[e],t[e]))return!1;return!0}))},tr=function(r){return function(n,t){return n===t||0===r(n,t)}},er=function(r){return{equals:tr(r),compare:function(n,t){return n===t?0:r(n,t)}}},ur=function(r){return function(n){return er((function(t,e){return n.compare(r(t),r(e))}))}},ir=function(r){return function(n,t){return-1===r.compare(n,t)}},or=function(r){return function(n,t){return 1===r.compare(n,t)}},cr=function(r){return function(n,t){return n===t||r.compare(n,t)<1?n:t}},ar=function(r){return function(n,t){return n===t||r.compare(n,t)>-1?n:t}};var sr={equals:function(r,n){return r===n}},fr={equals:sr.equals,compare:function(r,n){return r<n?-1:r>n?1:0}};const lr=(r,n)=>{switch(r.kind){case"bottom":return{kind:"bottom"};case"inner":return R(n(r.a));case"top":return U(r.error)}},pr=r=>er(((n,t)=>{if("bottom"===n.kind&&"bottom"===t.kind)return 0;if("bottom"===n.kind)return-1;if("bottom"===t.kind)return 1;if("top"===n.kind&&"top"===t.kind)return fr.compare(n.error,t.error);if("top"===n.kind)return 1;if("top"===t.kind)return-1;if("inner"===n.kind&&"inner"===t.kind)return r.compare(n.a,t.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var dr;dr=void 0;var mr=function(r){return r[0]},vr=mr;var hr=function(r,n,t){if(t||2===arguments.length)for(var e,u=0,i=n.length;u<i;u++)!e&&u in n||(e||(e=Array.prototype.slice.call(n,0,u)),e[u]=n[u]);return r.concat(e||Array.prototype.slice.call(n))},gr=function(r){return r.length>0},yr=function(r,n){return r<0||r>=n.length},br=function(r){return function(n){return hr([r],n,!0)}},wr=br,kr=function(r){return function(n){return hr(hr([],n,!0),[r],!1)}},_r=kr,qr=p,Sr=function(r){return gr(r)?s(r):a},Ar=function(r){return function(n){for(var t=Math.max(0,Math.floor(n)),e=[r(0)],u=1;u<t;u++)e.push(r(u));return e}};var xr=qr,Or=function(r,n,t){for(var e=[t(r[0],n[0])],u=Math.min(r.length,n.length),i=1;i<u;i++)e[i]=t(r[i],n[i]);return e};var Tr=function(r){return function(n){var t=Math.max(1,r);return t>=n.length?[xr(n),[]]:[i(n.slice(1,t),wr(zr(n))),n.slice(t)]}},jr=function(r){return rr((function(n,t){return n.length===t.length&&n.every((function(n,e){return r.equals(n,t[e])}))}))},zr=vr;var Mr={equals:function(r,n){return r===n}},Cr={equals:Mr.equals,compare:function(r,n){return r<n?-1:r>n?1:0}};function Br(r){return function(n,t){if(void 0===t){var e=Br(r);return function(r){return e(n,r)}}for(var u,i=0;i<t.length;i++)if(u=t[i],r.equals(u,n))return!0;return!1}}var Nr=function(r,n){return function(t){for(var e=t.length,u=r,i=0;i<e;i++)u=n(i,u,t[i]);return u}};var Pr=function(r){return 0===r.length},Lr=gr,Er=wr,Ir=_r,Fr=function(r,n){return r<=0?[]:Ar(n)(r)};var Dr=yr,Gr=function(r){return function(n){return Dr(r,n)?Vr(n):n.slice(0,r)}};var Hr=function(r,n){for(var t=r.length,e=0;e<t&&n(r[e]);e++);return e};function Rr(r){return function(n){var t=Kr(Hr(n,r))(n);return{init:t[0],rest:t[1]}}}var Ur=function(r){return function(n){return r<=0||Pr(n)?Vr(n):r>=n.length?[]:n.slice(r,n.length)}};var Vr=function(r){return r.slice()},Wr=function(r){return Pr(r)?[]:r.slice().reverse()},Jr=function(r){return function(n){return n.length<=1?Vr(n):n.slice().sort(r.compare)}},Yr=function(r,n,t){for(var e=[],u=Math.min(r.length,n.length),i=0;i<u;i++)e[i]=t(r[i],n[i]);return e};var Qr=Br,Kr=function(r){return function(n){return r>=1&&Lr(n)?Tr(r)(n):Pr(n)?[Vr(n),[]]:[[],Vr(n)]}};function $r(r){var n=Qr(r);return function(t,e){if(void 0===e){var u=$r(r);return function(r){return u(r,t)}}return t.filter((function(r){return!n(r,e)}))}}var Zr=function(r){return function(n){return i(n,function(r){return function(n){for(var t=[],e=0;e<n.length;e++)t.push.apply(t,r(e,n[e]));return t}}((function(n,t){return r(t)})))}},Xr=function(r){return function(n){for(var t=[],e=0;e<n.length;e++){var u=r(e,n[e]);c(u)&&t.push(u.value)}return t}},rn=function(r){return Xr((function(n,t){return r(t)}))},nn=rn(r),tn=Nr,en=function(r){var n=un(r);return function(r){return n((function(n,t){return r(t)}))}},un=function(r){return function(n){return tn(r.of([]),(function(t,e,u){return r.ap(r.map(e,(function(r){return function(n){return i(r,Ir(n))}})),n(t,u))}))}},on=function(r){return er((function(n,t){for(var e=n.length,u=t.length,i=Math.min(e,u),o=0;o<i;o++){var c=r.compare(n[o],t[o]);if(0!==c)return c}return Cr.compare(e,u)}))},cn=function(r){return{_tag:"Left",left:r}},an=function(r){return{_tag:"Right",right:r}},sn=function(r,n){return i(r,pn(n))},fn=function(r,n){return i(r,mn(n))},ln="Either",pn=function(r){return function(n){return hn(n)?n:an(r(n.right))}},dn=an,mn=function(r){return function(n){return hn(n)?n:hn(r)?r:an(n.right(r.right))}},vn={URI:ln,map:sn,ap:fn,of:dn},hn=f,gn=function(r){return function(n){return hn(n)?r(n.left):n.right}},yn=gn,bn=function(r,n){try{return an(r())}catch(r){return cn(n(r))}};var wn=function(r){return-1===r?1:1===r?-1:0};function kn(r,n){return nn(r.map(n))}function _n(r,n,t,e){const u=(r,n)=>{if(0===r.length)return nn(n.map((r=>v({1:r[1],2:t(m,v(r[2]))}))));if(0===n.length)return nn(r.map((r=>v({1:r[1],2:t(v(r[2]),m)}))));if(r.length>0&&n.length>0&&ir(e)(r[0][1],n[0][1])){const[e,...i]=r,o=e[1],c=e[2];return Er({1:o,2:t(v(c),m)})(u(i,n))}if(r.length>0&&n.length>0&&or(e)(r[0][1],n[0][1])){const[e,...i]=n,o=e[1],c=e[2];return Er({1:o,2:t(m,v(c))})(u(r,i))}if(r.length>0&&n.length>0){const[e,...i]=r,[o,...c]=n,a=e[1],s=e[2],f=o[2];return Er({1:a,2:t(v(s),v(f))})(u(i,c))}throw new Error("Non exhaustive match in mapOption2")},i=ur((r=>r[1]))(e),o=(r=>{const n=kn(r,(r=>j(r[2])?v({1:r[1],2:r[2].value}):m));return 0===n.length?m:v(n)})(u(Jr(i)([...r].map((r=>({1:r[0],2:r[1]})))),Jr(i)([...n].map((r=>({1:r[0],2:r[1]}))))));return q((r=>new Map(r.map((r=>[r[1],r[2]])))))(o)}function qn(r,n,t,e){const u=ur((r=>r[0]))(e),i=Jr(u)([...n]).reduceRight(((r,n)=>{if(hn(r)){const e=t(n[1],r.left);return j(e)?cn(e.value):an(n[0])}return r}),cn(r));return T(i)}function Sn(r,n){return new Map([...r].map(n))}function An(r,n){return new Map([...r].filter(n))}function xn(r){return JSON.stringify(On(r))}function On(r){switch(r.kind){case"null":return zn.encode(r);case"string":return Mn.encode(r);case"number":return Cn.encode(r);case"array":return Bn.encode(r);case"object":return Nn.encode(r)}}function Tn(r){return null===r?zn.decode(r):"number"==typeof r?Cn.decode(r):"string"==typeof r?Mn.decode(r):Array.isArray(r)?Bn.decode(r):Nn.decode(r)}const jn=(r,n)=>cn(`Failed to decode. Input was ${JSON.stringify(r)}. Codec type was ${n}`),zn={encode:r=>null,decode:r=>null===r?an({kind:"null",value:null}):jn(r,"SimpleNull")},Mn={encode:r=>r.value,decode:r=>"string"==typeof r?an(E(r)):jn(r,"SimpleString")},Cn={encode:r=>r.value,decode:r=>"number"==typeof r?an(I(r)):jn(r,"SimpleNumber")},Bn={encode:r=>r.value.map(On),decode:r=>{if(Array.isArray(r)){const n=en(vn)(Tn)(r);return pn(F)(n)}return jn(r,"SimpleArray")}},Nn={encode:r=>{const n=[...r.value.entries()];return Object.assign({},...Array.from(n,(([r,n])=>({[r]:On(n)}))))},decode:r=>{if(r&&r.constructor===Object){const n=en(vn)((([r,n])=>i(Tn(n),pn((n=>u(r,n))))))(Object.entries(r));return pn((r=>D(new Map([...r]))))(n)}return jn(r,"SimpleObject")}};function Pn(r){return i(r,En,q(xn),N((()=>"<encode error>")))}function Ln(r){return q(Rn)(function(r){switch(r.state.kind){case"top":return v(E(r.state.error));case"bottom":return m;case"inner":return En(r.state.a)}}(r))}function En(r){return function(r){switch(r.kind){case"numberGroup":case"stringGroup":return In(r.group);case"tuple":return r.tuple.length>0}}(r.payload)?v(F(function(r,n){const t=q((r=>Er(r)(n)))(r);return N((()=>n))(t)}(q((r=>E(function(r){const n=r=>C((()=>""),(r=>"b"+JSON.stringify(r)))(r.bound),t=r=>{switch(r.operation){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},e=r=>{const e=n(r[1])+t(r[1]);return 1===r[2]?e:e+JSON.stringify(r[2])};return r.map(e).join("")}(r))))(r.commands),function(r){const n=r=>{switch(r.kind){case"bottom":return{kind:"null",value:null};case"top":return E(r.error);case"inner":return I(r.a)}},t=r=>kn([Fn,Dn,r=>i(r,Hn,D,v)],(n=>n(r))),e=r=>kn([Fn,Gn,r=>i(r,Hn,(r=>Sn(r,(([r,n])=>[JSON.stringify(r),n]))),D,v)],(n=>n(r)));switch(r.kind){case"tuple":return r.tuple.map(n);case"stringGroup":return t(r.group);case"numberGroup":return e(r.group)}}(r.payload)))):m}function In(r){switch(r.kind){case"unbounded":return r.group.size>0;case"windowed":return r.group.size>0||j(r.key);case"countLimit":case"uniqueLimit":return r.group.size>0||j(r.limit)}}function Fn(r){switch(r.kind){case"unbounded":return m;case"windowed":return v(E("w"));case"countLimit":return v(E(1===r.n?"x":`x${r.n}`));case"uniqueLimit":return v(E(1===r.n?"u":`u${r.n}`))}}function Dn(r){switch(r.kind){case"unbounded":return m;case"windowed":return v(E(j(r.key)?r.key.value:""));case"countLimit":case"uniqueLimit":return v(E(j(r.limit)?r.limit.value:""))}}function Gn(r){switch(r.kind){case"unbounded":return m;case"windowed":return j(r.key)?v(I(r.key.value)):v({kind:"null",value:null});case"countLimit":case"uniqueLimit":return j(r.limit)?v(I(r.limit.value)):v({kind:"null",value:null})}}function Hn(r){switch(r.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return r.group}}function Rn(r){switch(r.kind){case"array":return 0===r.value.length?{kind:"null",value:null}:1===r.value.length?Rn(r.value[0]):F(r.value.map(Rn));case"object":return i(An(r.value,(([r,n])=>"null"!==n.kind)),(r=>Sn(r,(r=>[r[0],Rn(r[1])]))),D);default:return r}}function Un(r){const n=r=>{if(0===r.length)return{kind:"bottom"};const n=(r=>{if(4!==r.length)return m;const[n,t,e,u]=r;if("string"===n.kind&&"string"===t.kind&&"object"===u.kind){const r=h((r=>Vn(r[1].value)&&Wn(r[2].value)))({1:n,2:t});return q((r=>({prim:r[1].value,grp:r[2].value,cutoff:e,m:u.value})))(r)}return m})(r);if(j(n)){const{prim:r,grp:t,cutoff:e,m:u}=n.value,i=Jn(e,u,Yn(t));return"string"==typeof i?U(i):R(X(Qn(r),i))}const t=(r=>{if(3!==r.length)return m;const[n,t,e]=r;if("string"===n.kind&&"object"===e.kind){const r=h((r=>Wn(r.value)))(n);return q((r=>({grp:r.value,cutoff:t,m:e.value})))(r)}return m})(r);if(j(t)){const{grp:r,cutoff:n,m:e}=t.value,u=Jn(n,e,Yn(r));return"string"==typeof u?U(u):R(X(m,u))}const e=(r=>{if(2!==r.length)return m;const[n,t]=r;if("string"===n.kind&&"object"===t.kind){const r=h((r=>Vn(r.value)))(n);return q((r=>({prim:r.value,m:t.value})))(r)}return m})(r);if(j(e)){const{prim:r,m:n}=e.value;return R(X(Qn(r),K(V(n))))}const u=(r=>{if(1!==r.length)return m;const[n]=r;return"object"===n.kind?v({m:n.value}):m})(r);if(j(u)){const{m:r}=u.value;return R(X(m,K(V(r))))}const i=(r=>{if(r.length<1)return m;const[n,...t]=r;if("string"===n.kind){const r=h((r=>Vn(r.value)))(n);return q((r=>({prim:r.value,rest:t})))(r)}return m})(r);if(j(i)){const{prim:r,rest:n}=i.value;return R(X(Qn(r),$n(n)))}return R(X(m,$n(r)))},t=r=>"array"===r.kind?Zr(t)(r.value):[r];return"null"===r.kind?Z({kind:"bottom"}):Z(n(t(r)))}function Vn(r){const n=r.split("");if(!0==(0===n.length))return!1;{const[r,...t]=n;return-1!=="bpmvn".indexOf(r)&&t.every((r=>-1!=="bpmvn0123456789.".indexOf(r)))}}function Wn(r){const n=r.split("");switch(!0){case 0===n.length:return!1;case"w"===n[0]&&void 0===n[1]:return!0;default:{const[r,...t]=n;return-1!=="ux".indexOf(r)&&-1===t.map((r=>!isNaN(parseInt(r)))).indexOf(!1)}}}function Jn(r,n,t){switch(r.kind){case"string":return K(t({1:v(r.value),2:n}));case"number":case"null":return Q(t({1:"null"===r.kind?m:v(r.value),2:An(Sn(n,(([r,n])=>[Number(r),n])),(r=>!isNaN(r[0])))}));default:return"{bad cutoff}"}}function Yn(r){const n=r=>n=>Y(n[2],n[1],r),t=r=>n=>J(n[2],n[1],r),e=r.split("");switch(!0){case"w"===e[0]&&void 0===e[1]:return r=>W(r[2],r[1]);case"u"===e[0]&&void 0===e[1]:return n(1);case"u"===e[0]&&void 0!==e[1]:return n(parseInt(e.slice(1).join("")));case"x"===e[0]&&void 0===e[1]:return t(1);case"x"===e[0]&&void 0!==e[1]:return t(parseInt(e.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function Qn(r){const n=r=>z(r.bound)||"add"===r.operation||"mul"===r.operation?v(r):m,t=(r,t,e)=>{const u=((r,t)=>i(r,(r=>{switch(r){case"p":return v("add");case"m":return v("mul");case"v":return v("max");case"n":return v("min");default:return m}}),q((r=>({operation:r,bound:t}))),x(n)))(r,e);return q((r=>{const{init:n,rest:e}=Rr((r=>{return"number"==typeof(n=parseInt(r))&&isFinite(n)&&Math.floor(n)===n;var n}))(t);return{1:{1:r,2:0===n.length?1:parseInt(n.join(""))},2:e.join("")}}))(u)};return q(G)(Sr(Kn(r,(r=>{const n=r.split("");if(0===n.length)return m;const[e,...u]=n;if("b"===e){const{init:r,rest:n}=i(u,Rr((r=>-1!=="1234567890.".indexOf(r))));if(0===r.length||0===n.length)return m;const e=parseFloat(r.join("")),[o,...c]=n;return t(o,c,v(e))}return t(e,u,m)}))))}function Kn(r,n){const t=n(r);return N((()=>[]))(q((r=>[r[1]].concat(Kn(r[2],n))))(t))}function $n(r){return $(r.map(Zn))}function Zn(r){switch(r.kind){case"number":return R(r.value);case"string":return U(r.value);case"null":return{kind:"bottom"};case"object":return U("{object}");case"array":return U("{array}")}}function Xn(r,n,t){return function(e){for(var u=Array(t.length+1),i=0;i<t.length;i++)u[i]=t[i];return u[t.length]=e,0===n?r.apply(null,u):Xn(r,n-1,u)}}var rt={1:function(r){return[r]},2:function(r){return function(n){return[r,n]}},3:function(r){return function(n){return function(t){return[r,n,t]}}},4:function(r){return function(n){return function(t){return function(e){return[r,n,t,e]}}}},5:function(r){return function(n){return function(t){return function(e){return function(u){return[r,n,t,e,u]}}}}}};function nt(r){return l.call(rt,r)||(rt[r]=Xn(u,r-1,[])),rt[r]}function tt(r){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var e=n.length,u=nt(e),i=r.map(n[0],u),o=1;o<e;o++)i=r.ap(i,n[o]);return i}}const et={strategy:(r,n,t)=>e=>{if(z(t))return n;if("delta"===r&&z(n))return m;if(z(n))return t;if(j(n)&&j(t))return e(n.value,t.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(n,t,u,o,c,a)=>{const s=on(pr(a)),f=i(t.bound,C((()=>r),(r=>n=>cr(a)(c.fromNumber(r),n))));if("append"===n&&"add"===t.operation)return Yr(u,o,lt("append",e(c.plus,f)));if("append"===n&&"mul"===t.operation)return Yr(u,o,lt("append",e(c.times,f)));if("append"===n&&"max"===t.operation)return ar(s)(u,o);if("join"===n&&"add"===t.operation)return Yr(u,o,lt("join",ar(a)));if("join"===n&&"mul"===t.operation)return Yr(u,o,lt("join",ar(a)));if("join"===n&&"max"===t.operation)return ar(s)(u,o);if("min"===t.operation)return et.operation(n,{operation:"max",bound:t.bound},u,o,c,function(r){return er(((n,t)=>wn(r.compare(n,t))))}(a));if("delta"===n&&"max"===t.operation)return or(s)(u,o)?u:o.map(H);if("delta"===n)return Yr(u,o,((r,n)=>or(pr(a))(r,n)?lr(r,f):{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(r,n,t,e)=>{if("delta"===r&&"top"===t.kind&&"top"===e.kind)return or(fr)(t.error,e.error)?U(t.error):{kind:"bottom"};if("delta"===r&&"bottom"===e.kind)return t;if("delta"===r&&"bottom"===t.kind)return{kind:"bottom"};if("top"===t.kind&&"top"===e.kind)return U(ar(fr)(t.error,e.error));if("top"===t.kind)return t;if("top"===e.kind)return e;if("inner"===t.kind&&"inner"===e.kind)return n(t.a,e.a);if("bottom"===t.kind)return e;if("bottom"===e.kind)return t;throw new Error("Non exhaustive match in extend")}},ut={fromNumber:r,plus:(r,n)=>r+n,times:(r,n)=>r*n};function it(r,n,t,e){if("unbounded"===r.kind&&"unbounded"===n.kind){const u=r.group,i=n.group;return N(H)(q((r=>R(V(r))))(_n(u,i,t,e)))}if("windowed"===r.kind&&"windowed"===n.kind){const u=r.key,i=r.group,o=n.key,c=n.group,a=ar(_(e))(u,o);return N(H)(q((r=>R(W(r,a))))(_n(i,c,t,e)))}if("countLimit"===r.kind&&"countLimit"===n.kind){const u=r.n,i=n.n;if(u===i){const i=r.limit,o=r.group,c=n.limit,a=n.group,s=ar(_(e))(i,c);return N(H)(q((r=>R(J(r,s,u))))(_n(o,a,t,e)))}return U("Non matching counts")}if("uniqueLimit"===r.kind&&"uniqueLimit"===n.kind){const u=r.n,i=n.n;if(u===i){const i=r.limit,o=r.group,c=n.limit,a=n.group,s=ar(_(e))(i,c);return N(H)(q((r=>R(Y(r,s,u))))(_n(o,a,t,e)))}return U("Non matching counts")}return U("Non matching group types")}function ot(r,n,t,e,u,i){const o=(r,n)=>({1:Gr(r)(n).concat(Fr(Math.max(0,r-n.length),H)),2:Ur(r)(n)}),c=(n,t,e)=>{if(0===n.length)return et.operation(r,{operation:"max",bound:m},t,e,u,i);if(n.length>0){const[a,...s]=n,f=o(a[2],t),l=f[1],p=f[2],d=o(a[2],e),m=d[1],v=d[2];return et.operation(r,a[1],l,m,u,i).concat(c(s,p,v))}throw new Error("Non exhaustive match in recurse")};return Wr((a=r=>"bottom"===r.kind,function(r){return r.slice(Hr(r,a))})(Wr(c(n,t,e))));var a}function ct(r,n,t){return N(L)(at(r,m)(n,t))}function at(r,n){const t=n=>(t,e)=>et.strategy(r,t,e)(at(r,n)),e=(n,e,u)=>{if("stringGroup"===e.kind&&"stringGroup"===u.kind){const r=it(e.group,u.group,t(n),fr);return lr(r,(r=>K(ft(r,fr))))}if("numberGroup"===e.kind&&"numberGroup"===u.kind){const r=it(e.group,u.group,t(n),Cr);return lr(r,(r=>Q(ft(r,Cr))))}if("tuple"===e.kind&&"tuple"===u.kind){const t=j(n)?n.value:[];return R($(ot(r,t,e.tuple,u.tuple,ut,Cr)))}throw new Error(`Non matching payload. Got ${e.kind} and ${u.kind}`)},u=(r,t)=>{if(k(jr(nr({1:nr({operation:sr,bound:k(Mr)}),2:Mr}))).equals(r.commands,t.commands)){const u=z(r.commands)?n:r.commands,i=e(u,r.payload,t.payload);return lr(i,(n=>X(r.commands,n)))}if(u=r.commands,o=t.commands,k(jr(nr({1:nr({operation:sr}),2:Mr}))).equals(u,o)){const u=i(((r,n)=>i(tt(A)(r,n),q((([r,n])=>Or(r,n,((r,n)=>({1:{operation:r[1].operation,bound:i(tt(A)(r[1].bound,n[1].bound),q((([r,n])=>Math.min(r,n))),O((()=>r[1].bound)),O((()=>n[1].bound)))},2:r[2]})))))))(r.commands,t.commands),O((()=>n))),o=e(u,r.payload,t.payload);return lr(o,(r=>X(u,r)))}throw new Error(`Non matching primitive strings. Got ${Pn(r)} and ${Pn(t)}`);var u,o};return(n,t)=>Ln(Z(et.extend(r,u,Un(n).state,Un(t).state)))}function st(r,n,t){const e=q((n=>An(r,(([r,e])=>function(r){return function(n,t){return-1!==r.compare(n,t)}}(t)(r,n)))))(n);return N((()=>r))(e)}function ft(r,n){switch(r.kind){case"unbounded":return r;case"windowed":return z(r.key)?r:W(st(r.group,r.key,n),r.key);case"countLimit":{const t=r.limit,e=r.n,u=r.group,i=(r,n)=>n<=1?m:v(n-1),o=qn(e,u,i,n),c=ar(_(n))(t,o);return J(st(u,c,n),c,e)}case"uniqueLimit":{const t=r.limit,e=r.n,u=r.group,i=(r,n)=>{if("object"===r.kind){const t=[...r.value.keys(),...n.keys()],u=new Set(t);return u.size>=e?m:v(u)}return m},o=qn(new Set,u,i,n),c=ar(_(n))(t,o);return Y(st(u,c,n),c,e)}}}function lt(r,n){return(t,e)=>et.extend(r,((r,t)=>R(n(r,t))),t,e)}function pt(r,n){return ct("append",r,n)}function dt(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return n.reduce(((r,n)=>Object.assign(Object.assign({},r),n)),{})}d((function(r){return 0===r.length}));function mt(r,n){const t=Object.keys(r),e=t.length,u={};for(let i=0;i<e;i++){const e=t[i],o=n(e,r[e]);j(o)&&(u[e]=o.value)}return u}const vt=r=>n=>{if("number"==typeof n)return n;if("string"==typeof n){const t=r(n);return Number.isNaN(t)?void 0:t}};vt(parseInt),vt(parseFloat);function ht(r){var n;return["SegmentEntry","SegmentExit"].includes(r.name)&&void 0!==(null===(n=r.properties)||void 0===n?void 0:n.segment_number)}const gt="process";let yt=!1,bt=[],wt=!1;const kt={};let _t={getCurrentTime:()=>new Date,getCurrentSession:()=>"",getCurrentView:()=>"",getSegments:()=>({}),get1PSegments:()=>({}),get3PSegments:()=>({}),getSegmentsArray:()=>({}),getLookalikeModels:()=>({}),setSegmentActivation:()=>{}};const qt=()=>{const r=zt.concat(_t.get1PSegments(),_t.get3PSegments()),n=jt(r);_t.getSegments=()=>r,_t.getSegmentsArray=()=>n};function St(r,n,t,e,u,o,c){yt=!1,bt=[],wt=!1;const a=i(e.thirdPartydata,C((()=>e.segments),(r=>zt.concat(e.segments,r)))),s=jt(a);_t={getCurrentTime:()=>new Date,getCurrentSession:()=>e.sessionId,getCurrentView:()=>e.viewId,get1PSegments:()=>e.segments,get3PSegments:()=>i(e.thirdPartydata,N((()=>({})))),getSegments:()=>a,getSegmentsArray:()=>s,getLookalikeModels:()=>i(e.lookalikeModels,N((()=>({})))),setSegmentActivation:(r,n)=>{}},wt=j(e.lookalikeModels),yt=j(e.thirdPartydata);const f=mt(n,((n,t)=>{var e;return(null===(e=r[n])||void 0===e?void 0:e.checksum)===t?m:v(((r,n)=>{const t=o[r].interpret(null,_t);return Object.assign({checksum:n},!1===t.result?{}:{result:t})})(n,t))}));if(0===u.length)return{diff:Object.assign(Object.assign({},r),f),errors:[]};if(0===Object.keys(f).length)return{diff:r,errors:[]};{const e=xt(f,n,t,u,"bootstrap",o,c);return{diff:Object.assign(Object.assign({},r),e.diff),errors:e.errors}}}function At(r,n,t,e,u,i){(r=>{const n=Object.assign({},r);delete n["1p"],_t.get3PSegments=()=>n})(e),qt(),_t.setSegmentActivation=Tt(r,n),yt=!0;const o=xt(r,n,t,bt.length>0?bt:[kt],"updateTPD",u,i);return bt=[],o}function xt(r,n,t,e,u,i,o){let c={diff:{},errors:[]};const a=e.length,s=()=>e.filter((r=>{return n=o["!UpdateLookalikeModels"]||[],ht(t=r)&&n.includes(t.properties.segment_number.toString());var n,t})).length===e.length?"lookalikeTransition":"transition",f=(r,n,t)=>"transition"===r?t===n-1?s():"event":r;for(let s=0;s<a;s++){const l=e[s],p=f(u,a,s),d=Ot(Object.assign(Object.assign({},r),c.diff),n,t,l,p,i,o);c={diff:Object.assign(Object.assign({},c.diff),d.diff),errors:c.errors.concat(d.errors)}}return c}function Ot(r,n,o,c,a,s,f){var l;"bootstrap"!==a&&(_t.setSegmentActivation=Tt(r,n));const p=L,d=(r,n)=>{const a=s[r],f=a.lift(c,_t),l=e(Tn,yn(p)),d=l(n.state||null),m=l(f),v=i(bn((()=>pt(d,m)),P),gn((r=>{throw P(`Failed to append lifted event ${xn(m)} to internal state ${xn(d)}. Got ${r}`)}))),g=i(o[r],h(Boolean),q(l)),[y,b]=i(g,B((()=>u(v,!1)),(r=>i(bn((()=>u(pt(v,r),!1)),t),yn((()=>u(v,!0))))))),w=On(v),k=a.interpret(On(y),_t),_=n.activations||{};return Object.assign(Object.assign(Object.assign(Object.assign({checksum:n.checksum},null===w?{}:{state:w}),!1===k.result?{}:{result:k}),0===Object.keys(_).length?{}:{activations:_}),!1===b?{}:{dropExternalState:b})},m={diff:{},errors:[]},v=function(r,n,t,e,u){switch(r){case"event":const r=(null==u?void 0:u[e.name])||[];if(yt)return r;{bt.push(e);const n=[...u["!UpdateSecondPartyData"]||[],...u["!UpdateThirdPartyData"]||[]];return $r(sr)(r,n)}case"lookalikeTransition":return(null==u?void 0:u[e.name])||[];case"transition":const i=(null==u?void 0:u[e.name])||[];if(wt){const r=u["!UpdateLookalikeModels"]||[];return i.concat(r)}return i;case"bootstrap":const o=((null==u?void 0:u[e.name])||[]).filter((r=>void 0!==n[r]));return $r(sr)(o,[...yt?[]:(u["!UpdateSecondPartyData"]||[]).concat(u["!UpdateThirdPartyData"]||[]),...wt?[]:u["!UpdateLookalikeModels"]||[]]);case"updateExternalState":return Object.keys(t);case"updateLAL":return u["!UpdateLookalikeModels"]||[];case"updateTPD":return[...u["!UpdateSecondPartyData"]||[],...u["!UpdateThirdPartyData"]||[]];default:return[]}}(a,r,o,c,f),g=v.length;!function(r){ht(r)&&((r=>{const n=_t.get1PSegments(),t={"1p":Object.assign(Object.assign({},n["1p"]),r["1p"])};_t.get1PSegments=()=>t})({"1p":{[r.properties.segment_number]:"SegmentEntry"===r.name}}),qt())}(c);for(let t=0;t<g;t++){const e=v[t],u=r[e]||{checksum:n[e]};let i=u;try{i=d(e,u)}catch(r){m.errors.push(`Failed to interpret query ${e}. Got ${r}`)}i.dropExternalState&&(null!==(l=m.externalStateToDrop)&&void 0!==l||(m.externalStateToDrop={}),m.externalStateToDrop[e]=!0),m.diff[e]=i}return m}function Tt(r,n){return(t,e,u)=>{if(!(u in r)){const t=n[u];if(void 0===t)throw new Error("Checksum not in internalStateMap");r[u]={checksum:t}}"activations"in r[u]||(r[u].activations={});const i=r[u].activations;t in i||(i[t]=[]);const o=i[t];o.includes(e)||(i[t]=[...o,e])}}function jt(r){return Object.keys(r).reduce(((n,t)=>{const e=Object.keys(r[t]),u=[];return e.forEach((n=>{!0===r[t][n]&&u.push(n)})),n[t]=u,n}),{})}const zt={empty:{},concat:(r,n)=>{const t=Object.assign({},r);for(const[r,e]of Object.entries(n))t[r]?t[r]=dt(t[r],e):t[r]=e;return t}};const Mt=(r,n)=>{const t=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),u=1;u<t;u++)e[u-1]=arguments[u];return[r.stateMap,...r.payload,...e,n.rawQueries,n.queriesByEvent]};return"bootstrap"===r.type?St(...t(r)):"updateLAL"===r.type?function(r,n,t,e,u,i){return _t.getLookalikeModels=()=>e,wt=!0,Ot(r,n,t,kt,"updateLAL",u,i)}(...t(r)):"updateTPD"===r.type?At(...t(r)):"updateExternalState"===r.type?function(r,n,t,e,u){return Ot(r,n,t,kt,"updateExternalState",e,u)}(...t(r)):r.type===gt?xt(...t(r,"event")):"processTransitions"===r.type?function(r,n,t,e,u,i){return xt(r,n,t,e,"transition",u,i)}(...t(r)):{diff:{},errors:[]}};var Ct;Ct="bun",globalThis["_____"+"sourceCodeRuntime"]=Ct;const Bt=function(r){let n=m;const t=N((()=>{const t=r();return n=v(t),t}));return()=>t(n)}((function(){var r;(()=>{var n={234:function(r,n,a){var s=this&&this.__assign||function(){return s=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++)for(var u in n=arguments[t])Object.prototype.hasOwnProperty.call(n,u)&&(r[u]=n[u]);return r},s.apply(this,arguments)},f=this&&this.__values||function(r){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&r[n],e=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&e>=r.length&&(r=void 0),{value:r&&r[e++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(r,n){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var e,u,i=t.call(r),o=[];try{for(;(void 0===n||n-- >0)&&!(e=i.next()).done;)o.push(e.value)}catch(r){u={error:r}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return o},p=this&&this.__spreadArray||function(r,n,t){if(t||2===arguments.length)for(var e,u=0,i=n.length;u<i;u++)!e&&u in n||(e||(e=Array.prototype.slice.call(n,0,u)),e[u]=n[u]);return r.concat(e||Array.prototype.slice.call(n))},d=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(n,"__esModule",{value:!0}),n.env=void 0;var m=d(a(783)),v=d(a(269));n.env=function(){function r(r){return"number"==typeof r?t[r]:r}function n(r){return"number"==typeof r?e[r]:r}function a(r){return"number"==typeof r?u[r]:r}function d(r){switch(r.length){case 0:return null;case 1:return r[0];default:return r}}function h(r,n,t){void 0===t&&(t=b);var e=a(n).reduce((function(r,n){return r&&null!=r[n]?r[n]:null}),r);return null===e?null:t(e)}function g(r,n){var t=a(n).slice();return t.unshift(r),t}function y(r,n,t){return void 0===t&&(t=b),h(r,g("properties",n),t)}var b=function(r){return r},w=function(r){return!0};function k(r,n){return function(t){for(var e=0;e<r.length;e++){if((r[e](t)||!1)===n)return n}return!n}}function _(r){return k(r,!0)}function q(r){return k(r,!1)}var S=function(r){return function(n){return!r(n)}},A=function(r,n){return function(t){return t>=r&&t<=n}},x=function(r){return new Date(r).getTime()},O=function(r){return h(r,["time"],x)},T=function(r,n){return h(n,r,x)},j=function(r,n,t,e,u,i){return function(o){var c=h(o,r,(function(r){return r.filter(e).map((function(r){return h(r,n)})).reduce(u,i)}));return t(null===c?i:c)}};function z(r,n,t,e){var u,i;try{for(var o=f(r),c=o.next();!c.done;c=o.next()){var a=c.value;if(t(a)&&n(a)===e)return e}}catch(r){u={error:r}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(u)throw u.error}}return!e}var M=function(r){return function(t){return("string"==typeof r||"number"==typeof r)&&"string"==typeof t&&t.toLowerCase().indexOf(n(r).toLowerCase())>-1}},C=function(r){return function(n){return null!=n&&Array.isArray(n)&&n.indexOf(r)>=0}};function B(r,n,t,e,u){var i=h(r.getSegments(),[n,t])||!1;return u&&(e||i)&&r.setSegmentActivation(n,t,u),i}function N(r,n,t){return h(r.getSegments(),[n,t])||!1}function P(r,n,t){return void 0===t&&(t=18e5),function(e){return{a:{m:function(r,n){return[n[0],e.a.m(null!=r[0]&&r[0][0]===n[0][0]?r[1]:e.a.z,n[1])]},z:[[],e.a.z]},p:function(t,u){return[[r(t)],h(u,n)===r(t)?e.p(t,u):e.a.z]},r:function(n,t){return e.r(n,0!==t[0].length&&t[0][0]===r(n)?t[1]:e.a.z)},d:e.d.sq||{l:function(u,i){var o=h(u,n),c=r(i);if(o!==c)return null;var a=e.d.l(u,i);if(!(Array.isArray(a)&&a.length>1))return null;var s=l(a),f=s[0],p=s.slice(1),d=+(O(u)||i.getCurrentTime()),m=Math.floor(d/t),v={};return v[m]={},v[m][c]=1===p.length?p[0]:p,[f,"u",null,v]},i:function(n,t){if(!Array.isArray(n)||"object"!=typeof n[3])return[[],e.a.z];var u=r(t),i=n[3];return[[u],Object.keys(i).map((function(r){return i[r][u]})).filter((function(r){return r})).map((function(r){return e.d.i([n[0]].concat(r))})).reduce(e.a.m,e.a.z)]}}}}}var L=P((function(r){return r.getCurrentSession()}),["session_id"],18e5),E=P((function(r){return r.getCurrentView()}),["view_id"],3e5);function I(n,t,e,u){return void 0===u&&(u=1),{a:{m:function(r,n){return r.concat(n).slice(-e)},z:[]},p:function(e,u){return h(u,["name"])===r(t)?[n.p(e,u)]:[]},r:function(r,t){return n.r(r,t.reduce((function(r,t){return n.a.m(r,t)}),n.a.z))},d:n.d.ftn||{l:function(r,t){var i,o=n.d.l(r,t),c=h(r,["time"],x)*u;return o&&[o[0],"x"+e,null,(i={},i[c]=2==o.length?o[1]:o.slice(1),i)]},i:function(r,t){return r?Object.keys(r[3]||{}).sort().reverse().map((function(n){return Array.isArray(n)?p([r[0]],l(r[3][n]),!1):[r[0],r[3][n]]})).map((function(r){return n.d.i(r,t)})):[]}}}}var F=function(r,n){return null===r?null==n?null:{b:n}:null==n?{a:r}:{a:r,b:n}},D=function(r,n){return r&&n?r(n):null},G=function(r,n,t){if(t&&t.result&&Array.isArray(t.result)){var e=D(r.d&&r.d.m,{result:t.result[0]}),u=D(n.d&&n.d.m,{result:t.result[1]});return F(e,u)}return null};var H=function(r){return function(n){function t(r){for(var n=r[0],t=1;t<r.length;t++)n=[n,r[t]];return n}function e(r){for(var t=r,e=Array(n.length),u=n.length-1;u>0;u--)e[u]=t[1],t=t[0];return e[0]=t,e}return{p:function(r,e){return t(n.map((function(n){return n.p(r,e)})))},r:function(t,u){var i=e(u);return r(n.map((function(r,n){return function(){return r.r(t,i[n])}})))({})},a:{z:t(n.map((function(r){return r.a.z}))),m:function(r,u){var i=e(r),o=e(u);var c=n.map((function(r,n){return function(r,n,t){return null===n?t:null===t?n:r.a.m(n,t)}(r,i[n],o[n])}));return t(c)}},d:{l:function(r,t){return function(r){for(var n=r[0],t=1;t<r.length;t++){var e=r[t],u=n;n={},null!==u&&(n.a=u),null!==e&&(n.b=e)}return n}(n.map((function(n){return n.d.l(r,t)})))},i:function(r,e){return function(r,e){for(var u=r,i=n.map((function(r){return r.a.z})),o=function(r,t){return n[r].d.i(t,e)},c=n.length-1;c>0&&u;c--)u.b&&(i[c]=o(c,u.b)),u.a&&1===c&&(i[0]=o(0,u.a)),u=u.a;return t(i)}(r,e)}}}}},R=H(_),U=H(q);function V(r,n){var t=i[r];if(!n||!t)return!1;if(!t.length)return!0;for(var e=0,u=!1,o=function(r){for(var n=[],t=0;t<r.length;++t){var e=r.charCodeAt(t);if(e>=55296&&e<=56319){var u=r.charCodeAt(t+1);if(u>=56320&&u<=57343){n.push(r.slice(t,t+2)),++t;continue}}n.push(r.charAt(t))}return n}(n.toLowerCase()),c=0;c<o.length;c++){for(var a=o[c];e>0&&!t[e][a];)e=t[e].su?t[e].su:0;if(t[e][a]&&(u=!!t[e=t[e][a]].te))break}return u}var W=function(r){return(0,m.default)(r).toString(v.default).slice(0,8)},J=function(r,n){var t,e,u=W(r);if(0===n.length)return!1;if(n[0]===u)return!0;for(var i=0,o=n.length,c=!1;(c=(t=n[e=i+(o-i>>1)])!==u)&&(t<u?i=e:o=e,!(i>=o-1)););return!c},Y=function(r,n){return function(t){return J(h(t,r),n)}},Q=function(r,n){return function(t){return J(y(t,r),n)}};return{q:function(r){return{lift:function(n,t){return r.d.l(n,t)},interpret:function(n,t){return function(n,t){return{result:r.r(n,t)}}(t,r.d.i(n,t))},migrate:function(n){return n&&r.d.m?r.d.m(n):null},m:r.a.m,z:r.a.z,p:r.p,r:r.r,i:r.d.i}},a:q,acq:function(r,n){return{p:function(t,e){return[r.p(t,e),n.p(t,e)]},r:function(t,e){return r.r(t,e[0])&&n.r(t,e[1])},a:{z:[r.a.z,n.a.z],m:function(t,e){return[r.a.m(t[0],e[0]),n.a.m(t[1],e[1])]}},d:{l:function(t,e){return F(r.d.l(t,e),n.d.l(t,e))},i:function(t,e){return t?[r.d.i(t.a||null,e),n.d.i(t.b||null,e)]:[r.a.z,n.a.z]},m:function(t){return G(r,n,t)}}}},acqs:U,acs:V,acs_:function(r,n){return function(t){return V(n,h(t,r))}},af_i:function(r,n,t){return void 0===t&&(t=w),function(e){return h(e,r,(function(r){return z(r,n,t,!1)}))&&!0}},af_l:function(r,n,t){return void 0===t&&(t=w),function(e){var u=h(e,r,(function(r){return r.filter(t).length}));return n(null===u?0:u)}},af_m:function(r,n,t,e){return void 0===e&&(e=w),function(u){var i=h(u,r,(function(r){return r.filter(e)}));return null===i||0===i.length?t(0):t(i.map((function(r){return h(r,n)})).reduce((function(r,n){return r+n}),0)/i.length)}},af_n:function(r,n,t,e){return void 0===e&&(e=w),j(r,n,t,e,(function(r,n){return Math.min(r,n)}),Number.POSITIVE_INFINITY)},af_p:function(r,n,t,e){return void 0===e&&(e=w),j(r,n,t,e,(function(r,n){return r*n}),1)},af_s:function(r,n,t,e){return void 0===e&&(e=w),j(r,n,t,e,(function(r,n){return r+n}),0)},af_u:function(r,n,t){return void 0===t&&(t=w),function(e){return h(e,r,(function(r){return z(r,n,t,!0)}))||!1}},af_x:function(r,n,t,e){return void 0===e&&(e=w),j(r,n,t,e,(function(r,n){return Math.max(r,n)}),Number.NEGATIVE_INFINITY)},as:function(r,n,t){var e=g("properties",n);return function(n){for(var u=h(n,e),i=t.length,o=!0,c=0;c<i;c++){var a=t[c];if(!(o=r(a)(u)))break}return o}},c:C,c_:function(r,n){return function(t){return C(n)(h(t,r))}},cl_:function(r,t){return function(e){return C(n(t))(h(e,r))}},cx:function(r){return function(t){return C(n(r))(t)}},ctu:function(n,t,e,u){return{a:u?{m:function(r,n){return r.filter((function(r){return-1===n.indexOf(r)})).concat(n).slice(-u)},z:[]}:{m:function(r,n){return r.filter((function(r){return-1===n.indexOf(r)})).concat(n)},z:[]},p:function(u,i){return h(i,["name"])===r(n)&&t(i)?h(i,e):[]},r:function(r,n){return n},d:{l:function(){return null},i:function(){return[]}}}},ctv:function(n,t,e,u){function i(r,n){var t,e=function(r){return{k:r.k,c:1+r.c}},u={arr:[],add:{k:n,c:1}};return n?(t=r.reduce((function(r,n){return r.add.k===n.k?{arr:r.arr,add:e(n)}:{arr:r.arr.concat(n),add:r.add}}),u)).arr.concat(t.add):r}return{a:u?{m:function(r,n){return i(r,n).slice(-u)},z:[]}:{m:function(r,n){return i(r,n)},z:[]},p:function(u,i){return h(i,["name"])===r(n)&&t(i)?h(i,e):null},r:function(r,n){return n.reduce((function(r,n){var t;return s(s({},r),((t={})[n.k]=n.c,t))}),{})},d:{l:function(r){return null},i:function(r){return[]}}}},ctw:function(n,t,e,u){return{a:u?{m:function(r,n){return r.concat(n).slice(-u)},z:[]}:{m:function(r,n){return r.concat(n)},z:[]},p:function(u,i){return h(i,["name"])===r(n)&&t(i)?h(i,e):[]},r:function(r,n){return n},d:{l:function(){return null},i:function(){return[]}}}},cw:function(n,t,e){return void 0===e&&(e=b),{a:{m:function(r,n){return r+n},z:0},p:function(e,u){return h(u,["name"])===r(n)&&t(u)?1:0},r:function(r,n){return e(n)},d:{l:function(e){return h(e,["name"])===r(n)&&t(e)?["p",1]:null},i:function(r){return r?Array.isArray(r)?r.slice(-1)[0]:r:0},m:function(r){return r&&r.result?["p",r.result]:null}}}},cb:function(n,t,e,u){return{a:{m:function(r,n){return Math.min(r+n,u)},z:0},p:function(e,u){return h(u,["name"])===r(n)&&t(u)?1:0},r:function(r,n){return e(n)},d:{l:function(e){return h(e,["name"])===r(n)&&t(e)?["b".concat(u,"p"),1]:null},i:function(r){return r?Array.isArray(r)?r.slice(-1)[0]:r:0},m:function(r){return r&&r.result?["b".concat(u,"p"),Math.min(u,r.result)]:null}}}},e:function(r){return function(n){return n===r}},e_:function(r,n){return function(t){return h(t,r)===n}},fm:function(r,n){return{p:n.p,r:function(t,e){return r(n.r(t,e))},a:n.a,d:n.d}},frontDecode:function(r){var n=r.split("\\t");if(0===n.length)return[];var t=n[0],e=new Array(Math.ceil(n.length/2));e[0]=n[0];for(var u=1;u<n.length/2;u+=1){var i=n[2*u-1],o=n[2*u];if(""===i)t=o;else{var c=parseInt(i);t=t.slice(0,c)+o}e[u]=t}return e},ftn:function(n,t,e){return{a:{m:function(r,n){return r.concat(n.slice(0,e-r.length))},z:[]},p:function(e,u){return h(u,["name"])===r(t)?[n.p(e,u)]:[]},r:function(r,t){return n.r(r,t.reduce((function(r,t){return n.a.m(r,t)}),n.a.z))},d:I(n,t,e,-1).d}},fw:function(n,t,e,u){return void 0===u&&(u=b),{a:{m:function(r,n){return null===r?n:r},z:null},p:function(u,i){return h(i,["name"])===r(n)&&t(i)?h(i,e):null},r:function(r,n){return n},d:{l:function(e){return h(e,["name"])===r(n)&&t(e)?["p",1]:null},i:function(r){return r?Array.isArray(r)?r.slice(-1)[0]:r:0},m:function(r){return r&&r.result?["p",r.result]:null}}}},g:function(r){return function(n){return n>r}},g_:function(r,n){return function(t){return h(t,r)>n}},gb:function(r,n,t){return{a:{m:function(t,e){var u=Object.keys(t).concat(Object.keys(e)).filter((function(r,n,t){return t.indexOf(r)===n})).sort((function(r,n){return Math.max(h(t,[n,1]),h(e,[n,1]))-Math.max(h(t,[r,1]),h(e,[r,1]))})).slice(0,n).reduce((function(n,u){var i=r.a.m(h(t,[u,0])||r.a.z,h(e,[u,0])||r.a.z);return n[u]=[i,Math.max(h(t,[u,1]),h(e,[u,1]))],n}),{});return u},z:{}},p:function(n,e){var u,i,o=h(e,g("properties",t)),c=r.p(n,e);return null==o||(null==(i=c)||"object"==typeof i&&0===Object.keys(i).length||i===r.a.z)?{}:((u={})[o]=[c,h(e,["time"],x)],u)},r:function(n,t){var e={};return Object.keys(t).forEach((function(u){return e[u]=r.r(n,t[u][0])})),e},d:{l:function(){return null},i:function(){return{}}}}},ge:function(r){return function(n){return n>=r}},ge_:function(r,n){return function(t){return h(t,r)>=n}},bse:function(r,n){return function(t){var e=h(t,r);return W(e)===n}},bsne:function(r,n){return function(t){var e=h(t,r);return W(e)!==n}},bsc:Y,bsnc:function(r,n){return S(Y(r,n))},bsc_:Q,bsnc_:function(r,n){return S(Q(r,n))},i_:b,ifp:function(r){return{a:{m:function(r,n){return n},z:null},p:function(r){return null},r:function(n,t){return function(n){return N(n,"1p",r)}(n)},d:{l:function(r,n){return null},i:function(r){return null}}}},isp:function(r,n,t,e){return{a:{m:function(r,n){return n},z:!1},p:function(t,e){return N(t,r,n)},r:function(u,i){return B(u,r,n,t,e)},d:{l:function(r,n){return null},i:function(r){return Array.isArray(r)&&(!!+r[2]||!1)}}}},itp:function(r,n,t,e){return{a:{m:function(r,n){return n},z:!1},p:function(t,e){return N(t,r,n)},r:function(u,i){return B(u,r,n,t,e)},d:{l:function(r,n){return null},i:function(r){return Array.isArray(r)&&(!!+r[2]||!1)}}}},k:h,l:function(r){return function(n){return n<r}},l_:function(r,n){return function(t){var e=h(t,r);return null!==e&&e<n}},le:function(r){return function(n){return n<=r}},le_:function(r,n){return function(t){var e=h(t,r);return null!==e&&e<=n}},lm:function(r,n){var t=function(n){return function(r,n,t){if(void 0===n[t])return NaN;var e=r||{};if(0==(e["1p"]||[]).length)return NaN;var u,i=n[t]||{},o=(i["1p"]||{}).const||0;return Object.keys(e).forEach((function(r){e[r].forEach((function(n){var t=(i[r]||{})[n]||0;o+=t}))})),u=o,1/(1+Math.pow(Math.E,-u))}(n.getSegmentsArray(),n.getLookalikeModels(),r)};return{a:{m:function(r,n){return n},z:null},p:function(r){return null},r:function(r,e){return n(t(r))},d:{l:function(r,n){return null},i:function(r){return null}}}},ltn:I,mnw:function(n,t,e,u){void 0===u&&(u=b);var i=Number.POSITIVE_INFINITY;return{a:{m:function(r,n){return r<n?r:n},z:i},p:function(u,o){return h(o,["name"])===r(n)&&t(o)?h(o,e):i},r:function(r,n){return u(n)},d:{l:function(u){return h(u,["name"])===r(n)&&t(u)?["n",h(u,e)]:null},i:function(r){return r?Array.isArray(r)?r.slice(-1)[0]:r:i}}}},mxw:function(n,t,e,u){void 0===u&&(u=b);var i=Number.NEGATIVE_INFINITY;return{a:{m:function(r,n){return r>n?r:n},z:i},p:function(u,o){return h(o,["name"])===r(n)&&t(o)?h(o,e):i},r:function(r,n){return u(n)},d:{l:function(u){return h(u,["name"])===r(n)&&t(u)?["v",h(u,e)]:null},i:function(r){return r?Array.isArray(r)?r.slice(-1)[0]:r:i}}}},n0:S(b),n:function(r){return function(n){return n!==r}},nt:S,n_:function(r,n){return function(t){return h(t,r)!==n}},o:_,ocq:function(r,n){return{p:function(t,e){return[r.p(t,e),n.p(t,e)]},r:function(t,e){return r.r(t,e[0])||n.r(t,e[1])},a:{z:[r.a.z,n.a.z],m:function(t,e){return[r.a.m(t[0],e[0]),n.a.m(t[1],e[1])]}},d:{l:function(t,e){return F(r.d.l(t,e),n.d.l(t,e))},i:function(t,e){return t?[r.d.i(t.a||null,e),n.d.i(t.b||null,e)]:[r.a.z,n.a.z]},m:function(t){return G(r,n,t)}}}},ocqs:R,oe:function(r){for(var n=Object.keys(r),t=n.length,e=new Array(t);t--;)e[t]=[n[t],r[n[t]]];return e},os:function(r,n,t){var e=g("properties",n);return function(n){for(var u=h(n,e),i=t.length,o=!1,c=0;c<i;c++){var a=t[c];if(o=r(a)(u))break}return o}},pacs:function(r,n){return function(t){return V(n,y(t,r))}},pb:function(r,n,t){return function(e){return A(n,t)(y(e,r))}},pc:function(r,n){return function(t){var e=y(t,r);return null!=e&&Array.isArray(e)&&e.indexOf(n)>=0}},pc_:function(r,t){return function(e){var u=y(e,r),i=n(t);return null!=u&&Array.isArray(u)&&u.indexOf(i)>=0}},pe:function(r,n){return function(t){return y(t,r)===n}},pg:function(r,n){return function(t){return y(t,r)>n}},pge:function(r,n){return function(t){return y(t,r)>=n}},pl:function(r,n){return function(t){var e=y(t,r);return null!==e&&e<n}},ple:function(r,n){return function(t){var e=y(t,r);return null!==e&&e<=n}},pn:function(r,n){return function(t){return y(t,r)!==n}},ps:function(r,n){return function(t){return M(n)(y(t,r))}},pw:function(n,t,e,u){return void 0===u&&(u=b),{a:{m:function(r,n){return r*n},z:1},p:function(u,i){return h(i,["name"])===r(n)&&t(i)?h(i,e):1},r:function(r,n){return u(n)},d:{l:function(u){return h(u,["name"])===r(n)&&t(u)?(i=h(u,e))>=1?["m2p",i]:i>0?["m2p",null,1/i]:0==i?["m2p",0]:i>-1?["m2p",null,1/i,1]:["m2p",i,null,1]:null;var i},i:function(r){return r?Array.isArray(r)?0===(n=r.slice(1))[0]?0:Math.pow(-1,n[2]||0)*(n[0]||1)/(n[1]||1):r:1;var n}}}},r:function(r){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return c[r].apply(c,p([],l(n),!1))},ref:function(r){return function(n){return o[r](n)}},s:M,s_:function(r,n){return function(t){return M(n)(h(t,r))}},scq:function(r,n,t){return void 0===t&&(t=b),{p:function(t,e){return[r.p(t,e),n.p(t,e)]},r:function(e,u){return t(r.r(e,u[0])+n.r(e,u[1]))},a:{z:[r.a.z,n.a.z],m:function(t,e){return[r.a.m(t[0],e[0]),n.a.m(t[1],e[1])]}},d:{l:function(t,e){return F(r.d.l(t,e),n.d.l(t,e))},i:function(t,e){return t?[r.d.i(t.a||null,e),n.d.i(t.b||null,e)]:[r.a.z,n.a.z]},m:function(t){return G(r,n,t)}}}},sq:L,dscq:function(n,t,e,u){var i="x".concat(u),o=function(r){return r?2===r.length?["p",i,"",r[1]]:r:null},c=function(e){var u,o=function(r){return h(r,["session_id"])}(e);return o&&h(e,["name"])===r(n)&&t(e)?["p",i,"",(u={},u[o]=1,u)]:null};return{a:{m:function(r,n){var t=o(r),e=o(n);return t?e?["p",i,"",s(s({},t[3]),e[3])]:t:e},z:null},p:function(r,n){return c(n)},r:function(r,n){var t=n&&n[3]&&"object"==typeof n[3]?Object.keys(n[3]).length:0;return e(t)},d:{l:function(r,n){return c(r)},i:function(r,n){return o(r)}}}},sw:function(n,t,e,u){return void 0===u&&(u=b),{a:{m:function(r,n){return r+n},z:0},p:function(u,i){return h(i,["name"])===r(n)&&t(i)?h(i,e):0},r:function(r,n){return u(n)},d:{l:function(u){return function(e){return h(e,["name"])===r(n)&&t(e)}(u)?(i=h(u,e))<0?["p2",null,-i]:["p2",i]:null;var i},i:function(r){return r?Array.isArray(r)?((n="p2"===r[0]?r.slice(1):r)[0]||0)-(n[1]||0):r:0;var n}}}},t:w,tb:function(r,n){return function(t){return A(r,n)(O(t))}},te:function(r){return function(n){return O(n)===r}},te_:function(r,n){return function(t){return T(r,t)===n}},tg:function(r){return function(n){return O(n)>r}},tg_:function(r,n){return function(t){return T(r,t)>n}},tge:function(r){return function(n){return O(n)>=r}},tge_:function(r,n){return function(t){return T(r,t)>=n}},ti:x,tl:function(r){return function(n){return O(n)<r}},tl_:function(r,n){return function(t){return T(r,t)<n}},tle:function(r){return function(n){return O(n)<r}},tle_:function(r,n){return function(t){return T(r,t)<n}},tn:function(r){return function(n){return O(n)!==r}},tn_:function(r,n){return function(t){return T(r,t)!==n}},tw:function(r,n,t){var e=t||100,u=Math.ceil(n/e),i=function(r){return Math.floor(r/u)},o=function(r,t,e){var u;return[i(r.getTime()-n),(u={},u[i(t)]=e,u)]},c=function(n,t){var e=Math.max(n[0],t[0]),u=Object.keys(n[1]).filter((function(r){return r>=e})).concat(Object.keys(t[1]).filter((function(r){return r>=e}))).filter((function(r,n,t){return t.indexOf(r)===n})).reduce((function(e,u){var i=r.a.m(n[1][u]||r.a.z,t[1][u]||r.a.z);return i!==r.a.z&&(e[u]=i),e}),{});return[e,u]},a=[Number.NEGATIVE_INFINITY,{}],s=function(r){var n=function(n){return n.map((function(n){var t=l(n,3),e=t[0],u=(t[1],t[2]);return o(r.t,u,e)})).reduce(c,a)};return c(n(r.in),n(r.out))},f=function(n){if(void 0!==n.result)return f(n.result);if(void 0!==n.w)return f(s(n));var t=l(n,2),e=(t[0],t[1]),u=null,i={};for(var o in e){var c=r.d.m({result:e[o]});c&&Array.isArray(c)&&(u=c[0],i[o]=d(c.slice(1)))}return u&&[u,"w",n[0],i]};return{a:{m:function(r,n){var t=r.w?s(r):r;return c(t,n)},z:a},p:function(n,t){return o(n.getCurrentTime(),h(t,["time"],x),r.p(n,t))},r:function(n,t){var e=(t.w?s(t):t)[1];return r.r(n,Object.keys(e).reduce((function(n,t){return r.a.m(n,e[t])}),r.a.z))},d:r.d.tw||{l:function(n,t){var e=r.d.l(n,t),u=r.d.i(e,t);return e&&p([e[0],"w"],l(o(t.getCurrentTime(),h(n,["time"],x),u)),!1)},i:function(r,t){var e=Array.isArray(r)?r:[],u=t.getCurrentTime(),o=i(u.getTime()-n);return[e[2]||null,Object.keys(e[3]||{}).map((function(r){var n;return(n={})[r]=e[3][r],n})).reduce((function(r,n){return Object.keys(n).filter((function(r){return parseInt(r)>=o})).forEach((function(t){return r[t]=n[t]})),r}),{})]},m:r.d.m&&f}}},vgw:function(n,t,e,u){void 0===u&&(u=b);var i={v:0,k:0};return{a:{m:function(r,n){var t=r.k+n.k;return{v:t?r.v+n.k*(n.v-r.v)/t:0,k:t}},z:i},p:function(u,o){return h(o,["name"])===r(n)&&t(o)?{v:h(o,e),k:1}:i},r:function(r,n){return u(n.v)},d:{l:function(u){return h(u,["name"])===r(n)&&t(u)?0==(i=h(u,e))?["p3",1]:i<0?["p3",1,null,-i]:["p3",1,i]:null;var i},i:function(r){return r?Array.isArray(r)?{v:(((n=r.slice(1))[1]||0)-(n[2]||0))/(n[0]||1),k:n[0]||0}:void 0:i;var n}}}},vq:E,w:function(r){return function(t){return t===n(r)}},x:function(r){return function(t){return t!==n(r)}},y:function(r,n){return function(t){return y(t,r)===e[n]}},y_:function(r,n){return function(t){return h(t,r)===e[n]}},z:function(r,n){return function(t){return y(t,r)!==e[n]}},z_:function(r,n){return function(t){return h(t,r)!==e[n]}}}}()},249:function(r,n,t){var e;r.exports=(e=e||function(r,n){var e;if("undefined"!=typeof window&&window.crypto&&(e=window.crypto),"undefined"!=typeof self&&self.crypto&&(e=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(e=globalThis.crypto),!e&&"undefined"!=typeof window&&window.msCrypto&&(e=window.msCrypto),!e&&void 0!==t.g&&t.g.crypto&&(e=t.g.crypto),!e)try{e=t(480)}catch(r){}var u=function(){if(e){if("function"==typeof e.getRandomValues)try{return e.getRandomValues(new Uint32Array(1))[0]}catch(r){}if("function"==typeof e.randomBytes)try{return e.randomBytes(4).readInt32LE()}catch(r){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function r(){}return function(n){var t;return r.prototype=n,t=new r,r.prototype=null,t}}(),o={},c=o.lib={},a=c.Base={extend:function(r){var n=i(this);return r&&n.mixIn(r),n.hasOwnProperty("init")&&this.init!==n.init||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var r=this.extend();return r.init.apply(r,arguments),r},init:function(){},mixIn:function(r){for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);r.hasOwnProperty("toString")&&(this.toString=r.toString)},clone:function(){return this.init.prototype.extend(this)}},s=c.WordArray=a.extend({init:function(r,t){r=this.words=r||[],this.sigBytes=t!=n?t:4*r.length},toString:function(r){return(r||l).stringify(this)},concat:function(r){var n=this.words,t=r.words,e=this.sigBytes,u=r.sigBytes;if(this.clamp(),e%4)for(var i=0;i<u;i++){var o=t[i>>>2]>>>24-i%4*8&255;n[e+i>>>2]|=o<<24-(e+i)%4*8}else for(var c=0;c<u;c+=4)n[e+c>>>2]=t[c>>>2];return this.sigBytes+=u,this},clamp:function(){var n=this.words,t=this.sigBytes;n[t>>>2]&=4294967295<<32-t%4*8,n.length=r.ceil(t/4)},clone:function(){var r=a.clone.call(this);return r.words=this.words.slice(0),r},random:function(r){for(var n=[],t=0;t<r;t+=4)n.push(u());return new s.init(n,r)}}),f=o.enc={},l=f.Hex={stringify:function(r){for(var n=r.words,t=r.sigBytes,e=[],u=0;u<t;u++){var i=n[u>>>2]>>>24-u%4*8&255;e.push((i>>>4).toString(16)),e.push((15&i).toString(16))}return e.join("")},parse:function(r){for(var n=r.length,t=[],e=0;e<n;e+=2)t[e>>>3]|=parseInt(r.substr(e,2),16)<<24-e%8*4;return new s.init(t,n/2)}},p=f.Latin1={stringify:function(r){for(var n=r.words,t=r.sigBytes,e=[],u=0;u<t;u++){var i=n[u>>>2]>>>24-u%4*8&255;e.push(String.fromCharCode(i))}return e.join("")},parse:function(r){for(var n=r.length,t=[],e=0;e<n;e++)t[e>>>2]|=(255&r.charCodeAt(e))<<24-e%4*8;return new s.init(t,n)}},d=f.Utf8={stringify:function(r){try{return decodeURIComponent(escape(p.stringify(r)))}catch(r){throw new Error("Malformed UTF-8 data")}},parse:function(r){return p.parse(unescape(encodeURIComponent(r)))}},m=c.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(r){"string"==typeof r&&(r=d.parse(r)),this._data.concat(r),this._nDataBytes+=r.sigBytes},_process:function(n){var t,e=this._data,u=e.words,i=e.sigBytes,o=this.blockSize,c=i/(4*o),a=(c=n?r.ceil(c):r.max((0|c)-this._minBufferSize,0))*o,f=r.min(4*a,i);if(a){for(var l=0;l<a;l+=o)this._doProcessBlock(u,l);t=u.splice(0,a),e.sigBytes-=f}return new s.init(t,f)},clone:function(){var r=a.clone.call(this);return r._data=this._data.clone(),r},_minBufferSize:0}),v=(c.Hasher=m.extend({cfg:a.extend(),init:function(r){this.cfg=this.cfg.extend(r),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(r){return this._append(r),this._process(),this},finalize:function(r){return r&&this._append(r),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(n,t){return new r.init(t).finalize(n)}},_createHmacHelper:function(r){return function(n,t){return new v.HMAC.init(r,t).finalize(n)}}}),o.algo={});return o}(Math),e)},269:function(r,n,t){var e;r.exports=(e=t(249),function(){var r=e,n=r.lib.WordArray;function t(r,t,e){for(var u=[],i=0,o=0;o<t;o++)if(o%4){var c=e[r.charCodeAt(o-1)]<<o%4*2|e[r.charCodeAt(o)]>>>6-o%4*2;u[i>>>2]|=c<<24-i%4*8,i++}return n.create(u,i)}r.enc.Base64={stringify:function(r){var n=r.words,t=r.sigBytes,e=this._map;r.clamp();for(var u=[],i=0;i<t;i+=3)for(var o=(n[i>>>2]>>>24-i%4*8&255)<<16|(n[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|n[i+2>>>2]>>>24-(i+2)%4*8&255,c=0;c<4&&i+.75*c<t;c++)u.push(e.charAt(o>>>6*(3-c)&63));var a=e.charAt(64);if(a)for(;u.length%4;)u.push(a);return u.join("")},parse:function(r){var n=r.length,e=this._map,u=this._reverseMap;if(!u){u=this._reverseMap=[];for(var i=0;i<e.length;i++)u[e.charCodeAt(i)]=i}var o=e.charAt(64);if(o){var c=r.indexOf(o);-1!==c&&(n=c)}return t(r,n,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64)},783:function(r,n,t){var e,u,i,o,c,a,s,f;r.exports=(f=t(249),u=(e=f).lib,i=u.WordArray,o=u.Hasher,c=e.algo,a=[],s=c.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(r,n){for(var t=this._hash.words,e=t[0],u=t[1],i=t[2],o=t[3],c=t[4],s=0;s<80;s++){if(s<16)a[s]=0|r[n+s];else{var f=a[s-3]^a[s-8]^a[s-14]^a[s-16];a[s]=f<<1|f>>>31}var l=(e<<5|e>>>27)+c+a[s];l+=s<20?1518500249+(u&i|~u&o):s<40?1859775393+(u^i^o):s<60?(u&i|u&o|i&o)-1894007588:(u^i^o)-899497514,c=o,o=i,i=u<<30|u>>>2,u=e,e=l}t[0]=t[0]+e|0,t[1]=t[1]+u|0,t[2]=t[2]+i|0,t[3]=t[3]+o|0,t[4]=t[4]+c|0},_doFinalize:function(){var r=this._data,n=r.words,t=8*this._nDataBytes,e=8*r.sigBytes;return n[e>>>5]|=128<<24-e%32,n[14+(e+64>>>9<<4)]=Math.floor(t/4294967296),n[15+(e+64>>>9<<4)]=t,r.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var r=o.clone.call(this);return r._hash=this._hash.clone(),r}}),e.SHA1=o._createHelper(s),e.HmacSHA1=o._createHmacHelper(s),f.SHA1)},480:()=>{}},a={};function s(r){var t=a[r];if(void 0!==t)return t.exports;var e=a[r]={exports:{}};return n[r].call(e.exports,e,e.exports,s),e.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}();var f=s(234);r=f.env})();var n={"!UpdateSecondPartyData":["153911","153912","153913","153914","153915","153916","153917","153918","153919","157326","157381","157383","157384","157386","157387","157388","157389","157390","162859","162860","162861","162862","162863","162864","162865","162867","166268","166270","166271","166272","166273","166275","166276","172701","172702","172703","172704","172705","172706","172707","172708","173313"],"!UpdateThirdPartyData":["107067","124432","162391","163344","163345","163349","163434","163437","166528","166838","72145","72364","75692","75759","84684","84689","84691","84692","84693","85169","99463"],AffiliateLinkClick:["114027","128080","166696","167813","167815","167816","167818","167819","167829","167830","167831","167832","167833","167834","65230","73313","73318"],LinkClick:["114024","166696","167813","167815","167816","167818","167819","167829","167830","167831","167832","167833","167834","75256","75257","75258","75259","75260","75261","75263"],Pageview:["104900","105782","105783","105785","105786","105788","105789","105792","106247","106260","106262","106263","106359","106363","106367","106369","106372","106846","106849","107325","107345","107349","107366","107587","107588","107930","107933","107934","107935","107937","107940","107942","107943","107944","107945","107950","107951","107952","107953","107954","107955","107956","108463","108464","108465","108466","108467","108468","109746","110125","117842","117844","117849","121314","130172","130180","130773","131063","140190","140612","141086","141170","141172","141942","144227","146377","146379","146380","146967","149139","149158","149159","150865","150874","153377","153380","153488","153718","154204","157486","158299","158302","158455","158457","165424","165425","172563","175307","175308","175310","175326","175339","175407","176851","64282","64284","64285","66079","66482","67201","67256","67257","67259","67262","67264","70732","70744","70755","70818","70819","70820","70821","70822","70823","70825","70826","70828","70830","71318","71319","71320","71321","71322","71323","71324","71325","71326","71327","71328","71329","71330","71331","71332","71333","71334","71335","71336","71337","71338","71339","71340","71341","71342","71343","71344","71345","71349","71350","71351","71352","71353","71354","71355","71356","71357","71358","71359","71360","71361","71362","71363","71364","71365","71366","71367","71368","71369","71370","71371","71372","71373","72655","73727","74640","74641","75262","75264","75265","75266","75267","77002","77686","83662","83663","84918","84921","84932","87788","87790","87794","87800","89484","89485","89634","89635","89637","89638","89720","92370","92375","93357","97629","97630","98736","99551"],SlotClicked:["100759","104901","104928","104930","105742","106938","107181","107185","107186","107837","107904","109745","109747","110124","113243","113666","117840","117841","117846","121318","121319","122778","127662","127999","130174","130179","130765","130772","131062","133537","134494","136664","137517","141169","142630","142631","145050","150863","150875","154203","162291","166117","175305","175306","175327","175338","175340","175408","175441","73724","73725","74637","74638","75230","77000","77001","77003","77004","77241","77244","83289","83291","84914","84915","84919","84920","84929","84930","86187","87789","87791","87792","87793","87795","87796","87797","87798","87799","87801","87803","87804","89486","89487","98735","99552"]},t=["Pageview","SlotClicked","LinkClick","AffiliateLinkClick"],e=r.frontDecode("1883\\t\\tAT&T Services\\t5\\tU-verse\\t5\\tWireless\\t1\\tction and Adventure Movies\\t7\\tfilm\\t1\\tnimation\\t9\\t TV\\t1\\tpple Inc.\\t\\tCenturyLink\\t1\\tomcast Cable\\t3\\tedy\\t6\\t Movies\\t2\\tx Communications\\t1\\trime and Mystery Movies\\t\\tDocumentary Movies\\t12\\tfilm\\t1\\trama\\t5\\t Movies\\t\\tFamily and Children Movies\\t1\\teminism\\t2\\tver Dreams\\t\\tHorror\\t6\\t Movies\\t7\\tfiction\\t9\\tlm\\t\\tJackass\\t\\tMTV Movie Awards\\t1\\tovies\\t\\tNetflix\\t\\tOptimum Online\\t\\tParamount Pictures\\t\\tRCN\\t1\\tomance Movies\\t5\\ttic comedy film\\t\\tSci-fi and Fantasy\\t3\\tence Fiction Movies\\t16\\tTV\\t8\\tfiction film\\t1\\thowtime\\t1\\tpectrum\\t1\\ttallone\\t\\tT-Mobile USA\\t1\\tV/Movies\\t1\\television\\t1\\the Daily Beast’s Obsessed\\t4\\tLast Laugh\\t4\\tNew Abnormal\\t\\tVerizon Business\\t8\\tFios\\t12\\t Business\\t8\\tWireless\\t1\\tiacom\\t\\tYouTube\\t\\tamazon\\t2\\terican sniper\\t1\\tnimation movies\\t1\\trts-and-culture\\t\\tblack hawk down\\t\\tcelebrities\\t1\\tomedy\\t2\\tronavirus\\t1\\trime\\t\\tdisney\\t1\\trama\\t\\tentertainment\\t1\\txclusive\\t\\tfauda\\t\\thalf-full\\t1\\tbo\\t1\\tome\\t1\\tulu\\t2\\trt locker\\t\\tjack ryan\\t\\tkilling eve\\t\\tlast of us\\t1\\tgbt\\t\\tmedia\\t2\\tmbers-only\\t1\\tovies\\t1\\ttv\\t1\\turdoch\\t\\tnickelodeon\\t\\topinion\\t\\tparamount pictures\\t9\\t-plus\\t1\\tolitics\\t1\\tride\\t\\trace\\t1\\teality-tv\\t\\tscouted\\t1\\ticario\\t\\tthe-daily-beasts-obsessed\\t4\\tlast-laugh\\t3\\tdailybeast.com/obsessed\\t1\\top gun\\t1\\travel\\t1\\tulsa king\\t\\tus-news\\t\\tvh1\\t\\twind river\\t\\tzero dark thirty"),u=[["keywords"],["campaign_id"],["section"],["autoKeywords"],["franchise"],["autoIAB"],["advertiserName"],["advertiser_id"],["isp_info","isp"],["dest_url"],["isp_info","organization"],["client","title"],["template"],["subsection"],["client","url"],["productCategory"],["authors"],["client","referrer"],["device"]],i=[],o=[r.os(r.cx,5,[7,56]),r.os(r.cx,0,[87,76]),r.os(r.w,2,[61,77,62,98,86]),r.o([r.os(r.cx,3,[84,85]),r.os(r.cx,0,[31,85])]),r.bsc_(4,["Skwrl3TM"]),r.o([r.pc_(3,83),r.pc_(0,83)]),r.bsc_(2,["JLQcvAjR","JzXwbLwu","YrIbsS+5","hGQ5TRYw","uzYqRqSD","wyuUHU7Q"]),r.os(r.cx,5,[37,36,35]),r.os(r.cx,5,[28,44]),r.bsc_(14,["dvuoMkHa"])],c=[(n,t,e,u)=>r.q(r.cb(n,r.os(t,e,u),r.ge(1),1)),n=>r.q(r.cb(n,r.ref(9),r.ge(1),1)),(n,t,e)=>r.q(r.cb(n,r.bsc_(t,e),r.ge(1),1)),(n,t,e)=>r.q(r.cb(n,r.pe(t,e),r.ge(1),1)),(n,t,e)=>r.q(r.cb(n,r.ps(t,e),r.ge(1),1)),(n,t)=>r.q(r.cb(0,r.a([n,t]),r.ge(1),1)),n=>r.q(r.cb(0,r.os(r.cx,0,n),r.ge(1),1)),(n,t,e,u)=>r.q(r.cb(0,r.o([n,r.os(t,e,u)]),r.ge(1),1)),(n,t)=>r.q(r.cb(0,r.o([r.y(8,t),r.y(10,n)]),r.ge(1),1)),(n,t,e,u,i)=>r.q(r.cb(0,r.o([r.pe(u,i),r.os(n,t,e)]),r.ge(1),1)),(n,t)=>r.q(r.cb(0,r.pc_(n,t),r.ge(1),1)),(n,t)=>r.q(r.cb(1,r.os(r.e,n,t),r.ge(1),1)),n=>r.q(r.cb(1,r.pe(1,n),r.ge(1),1)),()=>r.q(r.cb(1,r.pe(1,3022792508),r.ge(1),1)),()=>r.q(r.cb(1,r.pe(1,3110980442),r.ge(1),1)),n=>r.q(r.cb(1,r.pe(7,n),r.ge(1),1)),n=>r.q(r.cb(2,r.bsc_(9,n),r.ge(1),1)),(n,t,e,u)=>r.q(r.ocq(r.cb(e,u,r.ge(1),1),r.cb(n,t,r.ge(1),1))),(n,t,e)=>r.q(r.ocq(r.cb(0,n,r.ge(1),1),r.cb(0,r.os(r.cx,t,e),r.ge(1),1))),(n,t,e)=>r.q(r.ocq(r.cb(0,n,r.ge(1),1),r.cb(0,r.pc_(t,e),r.ge(1),1))),(n,t)=>r.q(r.ocq(r.cb(0,r.bsc_(4,t),r.ge(1),1),r.cb(0,r.pc_(0,n),r.ge(1),1))),(n,t,e)=>r.q(r.ocq(r.cb(0,r.pc_(0,e),r.ge(1),1),r.cb(0,r.pc_(n,t),r.ge(1),1))),(n,t)=>r.q(r.ocq(r.cb(0,r.pe(4,t),r.ge(1),1),r.cb(0,r.pc_(0,n),r.ge(1),1))),(n,t,e)=>r.q(r.ocq(r.cb(0,r.ps(11,e),r.ge(1),1),r.cb(0,r.ps(n,t),r.ge(1),1))),(n,t)=>r.q(r.ocq(r.cb(3,r.bsc_(6,t),r.ge(1),1),r.cb(2,r.ps(9,n),r.ge(1),1))),(n,t)=>r.q(r.ocq(r.cb(3,r.pe(6,t),r.ge(1),1),r.cb(2,r.ps(9,n),r.ge(1),1))),(n,t,e,u,i,o)=>r.q(r.ocq(r.ocq(r.cb(e,u,i,o),t),r.cb(0,n,r.ge(1),1))),(n,t,e,u)=>r.q(r.ocq(r.ocq(r.cb(0,n,r.ge(1),1),r.cb(0,u,r.ge(1),1)),r.cb(0,r.pc_(t,e),r.ge(1),1))),(n,t,e,u,i,o,c,a,s)=>r.q(r.ocq(r.ocq(r.ocq(o,r.itp(c,a,!1,s)),r.itp(e,u,!1,i)),r.itp("liveramp_Epsilon",n,!1,t))),(n,t,e,u,i,o,c,a,s,f)=>r.q(r.ocq(r.ocq(r.ocq(c,r.itp(a,s,!1,f)),r.itp(u,i,!1,o)),r.itp(n,t,!1,e))),(n,t,e,u,i,o,c,a,s,f,l)=>r.q(r.ocq(r.ocq(r.ocq(r.itp(s,f,!1,l),r.itp(o,c,!1,a)),r.itp(e,u,!1,i)),r.itp("liveramp_Fluent",n,!1,t))),(n,t,e,u,i,o,c,a,s)=>r.q(r.ocq(r.ocq(r.itp(c,a,!1,s),r.itp(u,i,!1,o)),r.itp(n,t,!1,e))),(n,t,e,u,i,o)=>r.q(r.ocq(r.itp(u,i,!1,o),r.itp(n,t,!1,e))),(n,t,e,u,i,o)=>r.q(r.ocq(r.tw(r.cb(0,e,r.ge(o),u),2592e6),r.tw(r.cb(0,n,r.ge(i),t),2592e6))),(n,t,e,u,i)=>r.q(r.ocq(r.tw(r.cb(0,r.os(r.cx,5,i),r.ge(u),t),7776e6),r.tw(r.cb(0,r.pc_(0,38),r.ge(e),n),7776e6))),(n,t)=>r.q(r.ocq(r.tw(r.cb(0,r.os(r.s,11,t),r.ge(1),1),2592e6),r.tw(r.cb(0,r.os(r.cx,3,n),r.ge(1),1),2592e6))),(n,t,e,u,i,o)=>r.q(r.ocq(r.tw(r.cb(0,r.ref(o),r.ge(u),t),7776e6),r.tw(r.cb(0,r.os(r.cx,0,i),r.ge(e),n),7776e6))),(n,t,e,u,i,o)=>r.q(r.ocq(r.tw(r.cb(0,r.pc_(5,o),r.ge(u),t),7776e6),r.tw(r.cb(0,r.pc_(0,i),r.ge(e),n),7776e6))),(n,t,e,u,i)=>r.q(r.ocq(r.tw(r.cb(0,r.pc_(5,23),r.ge(u),t),7776e6),r.tw(r.cb(0,r.os(r.cx,0,i),r.ge(e),n),7776e6))),(n,t)=>r.q(r.isp("liveramp_ParamountPlus_the_daily_beast",n,!1,t)),(n,t)=>r.q(r.isp("liveramp_Showtime_the_daily_beast",n,!1,t)),(n,t,e)=>r.q(r.itp(n,t,!1,e)),(n,t,e)=>r.q(r.tw(r.cb(0,n,r.ge(e),t),24192e5)),(n,t,e)=>r.q(r.tw(r.cb(0,n,r.ge(e),t),2592e6)),n=>r.q(r.tw(r.cb(0,n,r.ge(5),5),12096e6)),(n,t)=>r.q(r.tw(r.cb(0,r.a([r.os(r.cx,0,t),r.os(r.cx,3,n)]),r.ge(1),1),2592e6)),(n,t)=>r.q(r.tw(r.cb(0,r.a([r.pc_(0,t),r.os(r.cx,3,n)]),r.ge(1),1),2592e6)),(n,t,e)=>r.q(r.tw(r.cb(0,r.ref(e),r.ge(t),n),2592e6)),(n,t,e)=>r.q(r.tw(r.cb(0,r.ref(e),r.ge(t),n),7776e6)),(n,t)=>r.q(r.tw(r.cb(0,r.o([r.os(r.cx,3,n),r.os(r.cx,0,t)]),r.ge(1),1),2592e6)),(n,t)=>r.q(r.tw(r.cb(0,r.o([r.os(r.w,8,n),r.os(r.w,10,t)]),r.ge(5),5),24192e5)),(n,t)=>r.q(r.tw(r.cb(0,r.o([r.pc_(3,n),r.os(r.cx,0,t)]),r.ge(1),1),2592e6)),(n,t)=>r.q(r.tw(r.cb(0,r.o([r.pc_(3,n),r.pc_(0,t)]),r.ge(1),1),2592e6)),(n,t,e,u)=>r.q(r.tw(r.cb(0,r.pc_(e,u),r.ge(t),n),2592e6)),(n,t,e)=>r.q(r.tw(r.cb(0,r.pc_(5,e),r.ge(t),n),7776e6)),(n,t,e,u)=>r.q(r.tw(r.cb(0,r.y(e,u),r.ge(t),n),2592e6)),n=>r.q(r.tw(r.cb(0,r.y(2,n),r.ge(5),5),24192e5)),(n,t,e)=>r.q(r.tw(r.cb(0,r.y(2,e),r.ge(t),n),7776e6)),(n,t,e,u)=>r.q(r.tw(r.cb(0,r.pe(e,u),r.ge(t),n),2592e6)),(n,t,e,u)=>r.q(r.tw(r.cb(0,r.ps(e,u),r.ge(t),n),2592e6))];return{rawQueries:{100759:r.r(12,2989726044),104900:r.r(10,0,"HuluColdCase2022"),104901:r.r(12,3009517372),104928:r.r(15,5002456034),104930:r.r(12,3005687643),105742:r.r(12,2993915235),105782:r.r(38,1,1,1,1,[24,25,22]),105783:r.r(38,3,3,3,3,["thriller","Thriller",24,25,22]),105785:r.r(48,3,3,7),105786:r.r(48,1,1,7),105788:r.r(54,1,1,19),105789:r.r(54,3,3,19),105792:r.q(r.ocq(r.ocq(r.tw(r.cb(0,r.pc_(0,45),r.ge(1),1),2592e6),r.tw(r.cb(0,r.y(4,92),r.ge(1),1),2592e6)),r.cb(0,r.ps(14,94),r.ge(1),1))),106247:r.r(54,3,3,18),106260:r.r(37,3,3,3,3,5,4),106262:r.r(37,1,1,1,1,5,4),106263:r.r(36,1,3,1,3,["animation TV",6],0),106359:r.r(36,1,1,1,1,["animation tv",6],0),106363:r.r(37,1,3,1,3,11,12),106367:r.r(37,1,1,1,1,11,12),106369:r.r(54,3,3,14),106372:r.r(37,1,3,1,3,16,15),106846:r.r(37,1,1,1,1,16,15),106849:r.r(54,1,1,18),106938:r.r(12,3023164065),107067:r.r(31,"liveramp_StatSocial","1006912891","107067","liveramp_Experian","1007229091","107067","liveramp_Bombora","1004558949","107067"),107181:r.r(13),107185:r.r(12,3022789163),107186:r.r(15,5169357096),107325:r.r(54,1,1,14),107345:r.r(34,3,3,3,3,[36,"Fantasy Movies"]),107349:r.r(34,90,1,90,1,["fantasy movies",36]),107366:r.r(2,0,4,["uWrhYOuB"]),107587:r.r(37,3,3,3,3,34,33),107588:r.r(37,90,1,90,1,34,33),107837:r.r(12,3026491334),107904:r.r(13),107930:r.r(20,61,["KZ/1so8i"]),107933:r.r(20,"Extremism",["dt72wo0o"]),107934:r.r(19,r.y(4,88),0,88),107935:r.r(22,"Sex","sex"),107937:r.r(20,"disinformation",["fy+/Sr0a"]),107940:r.r(20,45,["cycU9fkv"]),107942:r.r(20,"Late Night",["TA+rChTi"]),107943:r.r(20,"Deals",["KneIYZPp"]),107944:r.r(20,"capitol-riots",["rJRuXPhK"]),107945:r.r(18,r.bsc_(4,["kJ9bN2Pl"]),0,["Right Richter","right-richter"]),107950:r.r(27,r.bsc_(4,["2z6ewp7B"]),3,"amazon prime day deals",r.pc_(0,"Prime Day")),107951:r.r(20,"daytime-talk",["L5glR+XF"]),107952:r.r(22,"Pay Dirt","pay-dirt"),107953:r.r(20,"The Case For",["3f++wD1i"]),107954:r.r(20,"New Kids On the Block",["pOgI0Gjs"]),107955:r.r(22,"Fox News","fox news"),107956:r.r(20,"I\'m Looking For",["T3RB72UF"]),108463:r.r(37,90,1,90,1,28,28),108464:r.r(37,3,3,3,3,28,28),108465:r.r(37,3,3,3,3,44,44),108466:r.r(37,90,1,90,1,44,44),108467:r.r(36,3,3,3,3,[44,28,43],8),108468:r.r(36,90,1,90,1,[79,43,44],8),109745:r.r(12,3029244682),109746:r.r(10,0,"RoborockBrandedCheat22"),109747:r.r(12,5173881769),110124:r.r(12,3034787996),110125:r.r(10,0,"ParamountWhatToWatch22"),113243:r.r(12,22855009),113666:r.r(12,3045570413),114024:r.r(4,2,17,"https://www.thedailybeast.com/category/scouted"),114027:r.r(2,3,17,["GxZbVYmr"]),117840:r.r(12,3061642474),117841:r.r(12,3052581359),117842:r.r(10,0,"ParamountBacktoSchool22"),117844:r.r(10,0,"PObsessedCheat2022"),117846:r.r(15,210174654),117849:r.r(47,1,1,3),121314:r.r(47,1,1,3),121318:r.r(12,3073619013),121319:r.r(11,1,[3081973590,3071962220]),122778:r.r(12,3071574704),124432:r.r(28,"1003069926","124432","eyeota","300","124432",r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.itp("liveramp_ShareThis","1003555829",!1,"124432"),r.itp("liveramp_Illion","1005350369",!1,"124432")),r.itp("eyeota","35435",!1,"124432")),r.itp("liveramp_StartApp","1003725009",!1,"124432")),r.itp("liveramp_Experian","1004256479",!1,"124432")),r.itp("liveramp_Acxiom","10797",!1,"124432")),"liveramp_Stirista","1000308346","124432"),127662:r.r(12,3102636474),127999:r.r(12,3101377600),128080:r.r(0,3,r.w,6,["Snow","SNOW"]),130172:r.r(53,1,1,0,"ParamountScoutedGiftGuide22"),130174:r.r(14),130179:r.r(12,3110727347),130180:r.r(10,0,"ParamountYearinPreview22"),130765:r.r(12,3112567105),130772:r.r(12,3110976711),130773:r.r(53,1,1,0,"paramountTrueCrime22"),131062:r.r(14),131063:r.r(53,1,1,0,"ParamountHomeForHolidays22"),133537:r.r(12,3124502541),134494:r.r(12,3127790365),136664:r.r(12,3140569178),137517:r.r(12,3138492936),140190:r.r(26,r.ps(11,"rupaul"),r.cb(0,r.ps(11,"drag race"),r.ge(1),1),0,r.os(r.cx,0,["Gay","LGBT","rupaulsdragrace","RuPaul"]),r.ge(1),1),140612:r.r(26,r.os(r.cx,3,["reality tv","reality"]),r.cb(0,r.pc_(5,"Reality TV"),r.ge(1),1),0,r.os(r.cx,0,["Dating","Reality television","Reality"]),r.ge(1),1),141086:r.r(43,r.os(r.cx,0,["k-pop","pop"]),1,1),141169:r.r(12,3154221592),141170:r.r(10,0,"HuluWhatToWatch23"),141172:r.r(23,14,"the-last-of-us","the last of us"),141942:r.r(52,"euphoria","Euphoria"),142630:r.r(15,4737753025),142631:r.r(12,3162921092),144227:r.r(51,41,[41,"Sylvester Stallone"]),145050:r.r(12,3166207337),146377:r.r(52,95,95),146379:r.r(52,"scream","Scream"),146380:r.r(52,26,26),146967:r.r(45,["academy award","award","awards","oscars","oscar"],["American Music Awards","Golden Globe Awards",27,"Academy Awards","Grammy Awards","Tony Awards","Emmy Award","Emmy Awards","SAG Awards","Oscars"]),149139:r.r(35,["taylor sheridan",0,97,100,"those who wish me did",91,"dutton ranch","dutton","yellowston"],[0,91,"those who wish me dead",97,100,"yellowstone"]),149158:r.r(35,[101,58,"black hawk",75,55,67,95,74,72,73],[55,58,67,"homeland",72,73,74,75,"seal team",95,101]),149159:r.r(53,1,1,5,4),150863:r.r(12,3199674937),150865:r.r(53,1,1,0,"ParamountTFSSummerReality23"),150874:r.r(10,0,"ParamountSummerBlockbusters2023"),150875:r.r(12,3201515982),153377:r.r(4,0,11,"penny dreadful"),153380:r.r(4,0,11,"Mindhunter"),153488:r.r(18,r.ps(11,"Evil"),0,["Demonic possession","Demon"]),153718:r.r(23,11,"Vanderpump Rules","Vanderpump"),153911:r.r(39,"1872670063","153911"),153912:r.r(39,"99035871","153912"),153913:r.r(39,"2121368604","153913"),153914:r.r(39,"763570539","153914"),153915:r.r(39,"386859805","153915"),153916:r.r(39,"1937555887","153916"),153917:r.r(39,"1615652982","153917"),153918:r.r(39,"118203159","153918"),153919:r.r(39,"710999581","153919"),154203:r.r(12,3207992840),154204:r.r(10,0,"ParamountYGREWhattoWatchSummerReality"),157326:r.r(39,"1258855091","157326"),157381:r.r(39,"1063743113","157381"),157383:r.r(39,"1649648804","157383"),157384:r.r(39,"749054348","157384"),157386:r.r(39,"559365571","157386"),157387:r.r(39,"638953597","157387"),157388:r.r(39,"277597355","157388"),157389:r.r(39,"2136563812","157389"),157390:r.r(39,"1251638283","157390"),157486:r.r(4,0,11,"kardashians"),158299:r.q(r.ocq(r.tw(r.cb(0,r.os(r.cx,0,["Ghost","Paranormal"]),r.ge(1),1),2592e6),r.tw(r.cb(0,r.os(r.cx,3,["monsters","ghost","paranormal","supernatural fans","supernatural"]),r.ge(1),1),2592e6))),158302:r.r(59,1,1,11,"NCIS"),158455:r.r(46,[73,"john krasinski"],"John Krasinski"),158457:r.r(46,["barbie—a doll","ken","barbie movie","barbie"],"Barbie"),162291:r.r(12,3231740066),162391:r.r(29,"liveramp_Illion","1005350379","162391","liveramp_ShareThis","1003556009","162391",r.itp("liveramp_ShareThis","1004108149",!1,"162391"),"liveramp_ShareThis","1004108159","162391"),162859:r.r(39,"1909038787","162859"),162860:r.r(39,"1324737739","162860"),162861:r.r(39,"1693981315","162861"),162862:r.r(39,"882203589","162862"),162863:r.r(39,"510662120","162863"),162864:r.r(39,"427922937","162864"),162865:r.r(39,"1397973984","162865"),162867:r.r(39,"27034576","162867"),163344:r.r(29,"liveramp_StatSocial","1006913371","163344","liveramp_StartApp","1004430929","163344",r.itp("liveramp_Fluent","1005087229",!1,"163344"),"liveramp_Kantar","1004735569","163344"),163345:r.r(30,"1005087229","163345","liveramp_StartApp","1004430919","163345","liveramp_Acxiom","300405099","163345","liveramp_StatSocial","1006913511","163345"),163349:r.r(32,"liveramp_Acxiom","300402999","163349","liveramp_Kantar","1006585291","163349"),163434:r.r(41,"liveramp_StartApp","1004430939","163434"),163437:r.r(41,"liveramp_Acxiom","300408999","163437"),165424:r.r(0,0,r.s,11,["after yang","aftersun","bodies bodies bodies","everything everywhere all at once","marcel the shell with shoes on","midsommar","the zone of interest"]),165425:r.r(59,2,2,2,77),166117:r.r(12,3243131489),166268:r.r(40,"1574733919","166268"),166270:r.r(40,"1182063400","166270"),166271:r.r(40,"1953350932","166271"),166272:r.r(40,"1237136317","166272"),166273:r.r(40,"1868970275","166273"),166275:r.r(40,"1662079470","166275"),166276:r.r(40,"2115519268","166276"),166528:r.r(41,"liveramp_IPSOS","1002976996","166528"),166696:r.r(25,"bestbuy.com","Best Buy"),166838:r.q(r.acq(r.ocq(r.ocq(r.itp("liveramp_Alliant","1000848126",!1,"166838"),r.itp("liveramp_Stirista","1000306476",!1,"166838")),r.itp("liveramp_Alliant","1000845656",!1,"166838")),r.itp("liveramp_Alliant","1000846246",!1,"166838"))),167813:r.r(25,"walmart.com","walmart"),167815:r.r(25,"amazon.com","Amazon"),167816:r.r(25,"google.com","Google"),167818:r.r(25,"target.com","Target"),167819:r.r(25,"samsung.com","Samsung"),167829:r.r(25,"lg.com","LG"),167830:r.r(24,"nordstrom.com",["5L5ah4bw"]),167831:r.r(25,"zappos.com","Zappos"),167832:r.r(25,"petco.com","Petco"),167833:r.r(24,"homedepot.com",["cHGbeBlG"]),167834:r.r(25,"apple.com","Apple"),172563:r.r(5,r.pc_(0,"Wicked"),r.os(r.cx,3,["musical theater","wicked the musical","wicked"])),172701:r.r(40,"936044736","172701"),172702:r.r(40,"1202576186","172702"),172703:r.r(40,"1006499630","172703"),172704:r.r(40,"23017308","172704"),172705:r.r(40,"1396004913","172705"),172706:r.r(40,"459237081","172706"),172707:r.r(40,"974965371","172707"),172708:r.r(40,"407475213","172708"),173313:r.r(39,"2013240437","173313"),175305:r.r(12,3258311430),175306:r.r(15,221000694),175307:r.r(6,["NBCESIRR2023","NBCTheIrrational2023"]),175308:r.r(6,["NBCESFND2023","NBCFound2023"]),175310:r.r(33,r.pc_(3,"abc"),1,r.pc_(0,"ABC"),1,1,1),175326:r.r(10,0,"ShowtimeTheCurseBingegiving2023"),175327:r.r(12,3264119447),175338:r.r(12,3251073821),175339:r.r(10,0,"FOXSFWTW23"),175340:r.r(12,3251401649),175407:r.r(6,["ParaSHOObsessedWGiftingQ423","ParaSHOHomeForTheHolidaysQ423","ParaSHOTurkeyDayTVGuideQ423"]),175408:r.r(12,3270301342),175441:r.r(12,3242468566),176851:r.r(45,["musical snl monologue","saturday night live","snl"],["SNL","Saturday Night Live"]),64282:r.q(r.tw(r.cb(0,r.y(12,70),r.ge(3),3),864e5)),64284:r.r(21,0,"Super Bowl","Britney Spears"),64285:r.r(2,0,8,["MLz5x2JB"]),65230:r.r(2,3,6,["11yQChK4","jDriY85c","vJyna4y1","zfkQ6YSj"]),66079:r.r(2,0,["siteId"],["SuF4FyGC"]),66482:r.r(42,r.pe(18,"mobile"),3,3),67201:r.r(42,r.bsc_(2,["8iu8/Zd1","DQheAeAx","JLQcvAjR"]),3,3),67256:r.r(56,65),67257:r.r(56,86),67259:r.r(44,r.y(2,98)),67262:r.r(44,r.pe(2,"world")),67264:r.r(56,90),70732:r.q(r.cb(0,r.t,r.ge(1),1)),70744:r.r(3,0,["loggedIn"],!0),70755:r.r(2,0,12,["/4jCqmsX"]),70818:r.r(8,42,42),70819:r.r(9,r.w,10,[3,2,"AT&T"],8,"AT&T Internet Services"),70820:r.r(7,r.y(8,10),r.w,10,[10,"Comcast Cable Communications"]),70821:r.r(5,r.y(8,40),r.y(10,40)),70822:r.r(8,30,30),70823:r.q(r.cb(0,r.o([r.os(r.w,8,["Cox Business",13]),r.y(10,13)]),r.ge(1),1)),70825:r.r(8,32,32),70826:r.r(8,9,9),70828:r.r(50,[49,51],[49,51]),70830:r.r(50,[2,1,3],[2,3,1]),71318:r.r(52,81,81),71319:r.r(55,5,5,2,57),71320:r.r(55,3,3,2,57),71321:r.r(57,6,6,57),71322:r.r(18,r.pe(4,"royalist"),0,["royals","Royalist"]),71323:r.r(55,3,3,2,68),71324:r.r(52,54,54),71325:r.r(49,[89,59],[89,59]),71326:r.r(52,63,63),71327:r.r(51,"documentary",[16,"documentary-film"]),71328:r.r(55,3,3,2,65),71329:r.r(57,6,6,65),71330:r.r(52,69,69),71331:r.r(52,71,71),71332:r.r(55,5,5,2,65),71333:r.r(33,r.y(13,79),1,r.pe(13,"TV"),1,1,1),71334:r.r(58,1,1,13,"music"),71335:r.r(52,29,29),71336:r.r(53,3,3,0,"The View"),71337:r.r(52,39,39),71338:r.r(52,53,53),71339:r.r(52,20,20),71340:r.r(52,93,93),71341:r.r(55,5,5,2,68),71342:r.r(52,66,66),71343:r.r(52,78,78),71344:r.r(55,3,3,2,90),71345:r.r(57,3,3,90),71349:r.r(58,1,1,13,"crime-and-justice"),71350:r.r(47,3,3,5),71351:r.r(48,3,3,5),71352:r.q(r.ocq(r.ocq(r.tw(r.cb(0,r.pc_(0,45),r.ge(3),3),2592e6),r.tw(r.cb(0,r.y(4,92),r.ge(3),3),2592e6)),r.tw(r.cb(0,r.ps(14,94),r.ge(3),3),2592e6))),71353:r.q(r.tw(r.cb(0,r.o([r.os(r.cx,3,[87,76]),r.ref(1)]),r.ge(1),1),2592e6)),71354:r.r(17,0,r.y(4,76),0,r.ref(1)),71355:r.r(47,3,3,2),71356:r.r(48,6,6,2),71357:r.r(47,3,3,2),71358:r.r(48,3,3,2),71359:r.r(47,3,3,6),71360:r.r(48,3,3,6),71361:r.r(55,3,3,2,86),71362:r.r(57,6,6,86),71363:r.r(55,5,5,2,86),71364:r.r(55,5,5,2,90),71365:r.r(58,3,3,12,"article"),71366:r.r(58,3,3,12,"cheat"),71367:r.r(43,r.bsc_(2,["El94h3j7","wyuUHU7Q"]),1,1),71368:r.r(55,1,1,2,68),71369:r.r(55,1,1,12,70),71370:r.r(55,3,3,2,96),71371:r.r(57,6,6,96),71372:r.r(55,5,5,2,96),71373:r.r(55,3,3,2,98),72145:r.r(29,"liveramp_OnAudience","1002862526","72145","liveramp_AnalyticsIQ","1000691206","72145",r.ocq(r.itp("liveramp_ShareThis","1003630199",!1,"72145"),r.itp("liveramp_ShareThis","1001010119",!1,"72145")),"liveramp_AnalyticsIQ","1004574129","72145"),72364:r.r(28,"1001180959","72364","liveramp_AnalyticsIQ","1000691266","72364",r.itp("liveramp_ShareThis","1005651661",!1,"72364"),"liveramp_ShareThis","1003630029","72364"),72655:r.r(9,r.cx,3,["handmaids","handmaid\'s tale","handmaid%20%E2%80%99s%20tale"],14,"https://www.thedailybeast.com/the-handmaids-tale-season-4-is-better-but-just-as-brutal?ref=home"),73313:r.r(3,3,15,"CBD"),73318:r.r(2,3,15,["/oaRweCy","3OoorOUW","IT0ldENb","JlZyuuqq","MHFjSnLv","O6/Fm0xi","QqfkzjzV","fSWEFqmd","pBivL3hr","ygJw7uyR"]),73724:r.r(15,4837848875),73725:r.r(12,2856418788),73727:r.r(10,0,"epixfallriver"),74637:r.r(12,2853632817),74638:r.r(12,2855045208),74640:r.r(10,0,"ExploreMinnesotaContent"),74641:r.r(10,0,"contentdialcharlotte"),75230:r.r(15,4817840327),75256:r.r(1,2),75257:r.r(16,["dvuoMkHa"]),75258:r.r(16,["/d8g/5W4","FOwlQeKM","JP1kHs/I","NFrBsJA+","nhectaGY"]),75259:r.r(16,["IitriGxY","KWeCxx/Z","ZYC6E/Wl","k3x66Oib","q2U+eCLa"]),75260:r.r(16,["2zTiwn8O","46EuMosZ","AdRcM4Q+","gy2vcJeN","mMA033HL"]),75261:r.r(16,["A6Y6MFj4","CvXNvx6B","FH0TLN84","UH+t+V1c"]),75262:r.r(1,0),75263:r.r(16,["J6nixvOz","Sy4gfuQK","YijJE5Ew","uOyLYHo2"]),75264:r.r(17,0,r.ref(4),0,r.os(r.cx,0,[46,21,47])),75265:r.r(19,r.ref(4),0,47),75266:r.r(17,0,r.bsc_(4,["Mu3spKRF"]),0,r.pc_(0,46)),75267:r.r(10,0,21),75692:r.r(29,"liveramp_killi","1006446361","75692","liveramp_killi","1006446771","75692",r.itp("liveramp_Epsilon","1005679491",!1,"75692"),"liveramp_Kantar","1004779849","75692"),75759:r.r(29,"liveramp_Acxiom","300624299","75759","liveramp_Epsilon","1000984049","75759",r.itp("liveramp_Acxiom","300624299",!1,"75759"),"liveramp_Acxiom","1266","75759"),77e3:r.r(15,4637757752),77001:r.r(12,2872035824),77002:r.r(6,["BacardiPrideBrandedArticle","BacardiPrideBrandedCheat"]),77003:r.r(15,206671014),77004:r.r(12,2871999743),77241:r.r(15,4700786293),77244:r.r(12,2778157155),77686:r.r(6,["The Many Saints of Newark","The Sopranos"]),83289:r.r(15,208507614),83291:r.r(12,2894175244),83662:r.r(6,["pbs","PBS"]),83663:r.r(21,3,"ken burns","Ken Burns"),84684:r.r(30,"1005087369","84684","eyeota","329","84684","liveramp_ShareThis","1006581861","84684","liveramp_ShareThis","1006582251","84684"),84689:r.r(29,"eyeota","6675","84689","liveramp_ShareThis","1003555929","84689",r.itp("liveramp_ShareThis","1003556159",!1,"84689"),"liveramp_Comscore","1004339009","84689"),84691:r.q(r.ocq(r.ocq(r.ocq(r.ocq(r.itp("eyeota","240",!1,"84691"),r.itp("eyeota","236",!1,"84691")),r.itp("eyeota","237",!1,"84691")),r.itp("liveramp_IXIDigital","1003590359",!1,"84691")),r.itp("liveramp_Fluent","1005086129",!1,"84691"))),84692:r.r(32,"eyeota","35598","84692","liveramp_ShareThis","1006581981","84692"),84693:r.r(31,"liveramp_Acxiom","300730199","84693","eyeota","35482","84693","liveramp_ShareThis","1006581951","84693"),84914:r.r(15,5061020351),84915:r.r(12,2899390993),84918:r.r(6,["LimavadyBrandedArticle2021","LimavadyPodcast2021"]),84919:r.r(15,204217854),84920:r.r(12,2901253374),84921:r.r(6,["PBSBrandedArticle21","Athletes and Activism","PBSBrandedCheat21"]),84929:r.r(15,4651132477),84930:r.r(12,2901655437),84932:r.r(10,0,"AmericanRust21"),85169:r.r(32,"liveramp_Bombora","1000094764","85169","liveramp_Lifesight","1004598899","85169"),86187:r.r(15,4987174550),87788:r.r(10,0,"AmericanCancerSocietyContent"),87789:r.r(12,2917210242),87790:r.r(10,0,"DewarsBrandedArticle2021"),87791:r.r(12,2913467515),87792:r.r(15,226425054),87793:r.r(15,4527372914),87794:r.r(6,["showtimepyearend21","Showtimepplus21"]),87795:r.r(12,2909736646),87796:r.r(15,4639604283),87797:r.r(12,2918736421),87798:r.r(15,4431132419),87799:r.r(12,2914639909),87800:r.r(6,["PfizerBrandedCheat21","PfizerCovidEvent2021"]),87801:r.r(11,7,[4660565961,4838202451]),87803:r.r(15,4664281666),87804:r.r(15,4587919911),89484:r.r(52,52,52),89485:r.r(52,8,8),89486:r.r(15,204218814),89487:r.r(12,2925144911),89634:r.r(49,["cbs news","cbs"],["CBS News","CBS"]),89635:r.r(52,82,82),89637:r.r(51,80,["MTV Movie Award winners","MTV Video Music Awards",27,80,"MTV"]),89638:r.r(52,99,99),89720:r.r(7,r.os(r.w,8,[48,50,51]),r.w,10,["Verizon Internet Services",50,48,51,49]),92370:r.r(27,r.pc_(3,60),5,"Humor and Satire",r.os(r.cx,0,[11,"Comedy Central",60])),92375:r.r(10,3,"waititi"),93357:r.r(18,r.os(r.cx,0,[17,64]),3,[17,64]),97629:r.r(10,16,"lachlan-cartwright"),97630:r.r(10,16,"andrew-kirell"),98735:r.r(12,2973183568),98736:r.r(10,0,"CWAllAmericanHomecoming2022"),99463:r.r(31,"liveramp_Alliant","1002760786","99463","liveramp_Fluent","1004085329","99463","liveramp_Fluent","1005087139","99463"),99551:r.r(10,0,"berlinpartnerbrandedcheatmarch2022"),99552:r.r(12,2983809270)}||{},queriesByEvent:n||{}}}));function Nt(r){return((r,n)=>i(Mt(r,n),(n=>Object.assign(Object.assign({},n),{userId:r.userId}))))(r,Bt())}function Pt(r,n){const t=i((r=>mt(r,((r,n)=>n.state?v({[n.checksum]:n.state}):m)))(r),Tn,yn((r=>D(new Map)))),e=i(Tn(n),yn((r=>D(new Map))));return i(function(r,n){return ct("delta",r,n)}(t,e),(r=>On(r)))||{}}!function(r){const n=self;function t(r,t,e,u){function i(t){if("function"!=typeof n.postMessage)return r.ports[0].postMessage(t);n.postMessage(t)}if(!e)return i([t,null,u]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",e),i([t,e])}n.addEventListener("message",(function(n){if(e=n,!Array.isArray(e.data)||2!==e.data.length)return;var e;const u=n.data,[i,o]=u;if("function"==typeof r)return function(r,n,e,u){const i=function(r,n){try{return{res:r(n)}}catch(r){return{err:r}}}(n,u);return Boolean(null===(o=i)||void 0===o?void 0:o.err)?t(r,e,i.err):!(c=i.res)||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof c.then?t(r,e,null,i.res):void i.res.then((function(n){t(r,e,null,n)}),(function(n){t(r,e,n)}));var o,c}(n,r,i,o);t(n,i,new Error("Please pass a function into register()."))}))}((r=>"QLE"===r.engine?Nt(r):function(r){switch(r.type){case"delta":return Pt(r.stateMap,r.lastSentStateMapWithChecksum);case"noop":return{}}}(r)))})();',"Worker",void 0,void 0)}},477:e=>{e.exports=function(e,t,r,n){var i=self||window;try{try{var o;try{o=new i.Blob([e])}catch(t){(o=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(e),o=o.getBlob()}var s=i.URL||i.webkitURL,a=s.createObjectURL(o),u=new i[t](a,r);return s.revokeObjectURL(a),u}catch(n){return new i[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch(e){if(!n)throw Error("Inline worker is not supported");return new i[t](n,r)}}},7582:(e,t,r)=>{r.d(t,{_T:()=>n,mG:()=>i});function n(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function i(e,t,r,n){return blockme(          )((function(i,o){function s(e){try{blockme(   )}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).blockme()}blockme(                     )}))}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e]blockme(                        ),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={},_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__;_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3992),(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.ho)(!0),(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.HJ)blockme(                                                                        )})();