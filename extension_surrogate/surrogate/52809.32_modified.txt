/*! @amzn/apswebapstaglibrary - web-client-bundle - v23.1202.117 - 2023-12-02 01:17:42 */
!function(){"use strict";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};var e,n,o,r,i=function(){return i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};function a(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var u=t.length-1;u>=0;u--)(r=t[u])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function u(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((o=o.apply(t,e||[])).next())}))}function c(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&u[0]?o.return:u[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,u[1])).done)return r;switch(o=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,o=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(6===u[0]&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],o=0}finally{n=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}function d(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}!function(t){t.push="push",t.listenerSuccess="listenerSuccess",t.direct="direct"}(e||(e={})),function(t){t.internal="internal",t.apstag="apstag",t.webpage="webpage"}(n||(n={})),function(t){t.completed="completed",t.waiting="waiting",t.cancelled="cancelled"}(o||(o={})),function(t){t.started="started",t.error="error",t.unknown="unknown",t.deactivated="deactivated"}(r||(r={}));var v,p=i(i({},o),r),f="debugSession/end",h="prepend/events",g="populator/ran",m="23.1202.117";!function(t){t.Tahoe="tahoe",t.AaxPx="aaxPx"}(v||(v={}));var y,w={method:"GET",mode:"no-cors",cache:"no-cache",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer-when-downgrade"},b=function(){function t(t){void 0===t&&(t=.001),this.SERVICE_NAME=v.AaxPx,this._executionRatio=t}return Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this.executionRatio>=Math.random()},enumerable:!1,configurable:!0}),t.prototype.logFeature=function(t){this.isEnabled&&this.sendPayload(this.buildFeaturePayload(t))},t.prototype.logError=function(t){this.isEnabled&&this.sendPayload(this.buildErrorPayload(t))},t.prototype.sendPayload=function(t){var e=encodeURIComponent(JSON.stringify(t).replace(/\\.{1}/g,""));fetch("".concat("https://aax.amazon-adsystem.com/x/px/p/PH/").concat(e),w)},t.prototype.buildErrorPayload=function(t){var e,n,o,r,i,a,u=t.error,c=t.errorCategory,s=t.accountID;return{_tl:"aps-tag",_type:"apsLibraryError",src:"kraken",pubid:void 0===s?"unknown":s,ts:Date.now(),url:encodeURIComponent(null!==(o=null===(n=null===(e=window.top)||void 0===e?void 0:e.location)||void 0===n?void 0:n.href)&&void 0!==o?o:""),r:encodeURIComponent(null!==(i=null===(r=window.top)||void 0===r?void 0:r.document.referrer)&&void 0!==i?i:""),e:{et:"string"==typeof u?"unknown":u.name,el:c,msg:"string"==typeof u?"":null!==(a=u.message)&&void 0!==a?a:""},lv:m}},t.prototype.buildFeaturePayload=function(t){var e,n,o,r=t.category,i=t.feature;return{_tl:"aps-tag",_type:"featureUsage",src:"kraken",pubid:t.accountID,p:[{cat:encodeURIComponent(r),feat:encodeURIComponent(i)}],u:encodeURIComponent(null!==(o=null===(n=null===(e=window.top)||void 0===e?void 0:e.location)||void 0===n?void 0:n.href)&&void 0!==o?o:""),lv:m}},Object.defineProperty(t.prototype,"executionRatio",{get:function(){return this._executionRatio},set:function(t){this._executionRatio="number"!=typeof t||t<0?0:t>=0&&t<=1?t:1},enumerable:!1,configurable:!0}),t}();!function(t){t.info="info",t.warn="warn",t.error="error"}(y||(y={}));var _=function(){function t(){}return t.Instance=function(){return this._instance},t.SessionId=function(){return this._sessionId},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new Date(Date.now()),o=y.info;return console.log.apply(console,d([this.getPrefix(n,o)],l(t),!1)),{timestamp:n,logLevel:o}},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new Date(Date.now()),o=y.warn;return console.warn.apply(console,d([this.getPrefix(n,o)],l(t),!1)),{timestamp:n,logLevel:o}},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new Date(Date.now()),o=y.error;return console.error.apply(console,d([this.getPrefix(n,o)],l(t),!1)),{timestamp:n,logLevel:o}},t.prototype.getPrefix=function(e,n){var o=e.toISOString();return"".concat(o," | ").concat(t.SessionId()," | [").concat(n.toUpperCase(),"]")},t._instance=new t,t._sessionId="".concat(Date.now()),t}(),E=_.Instance(),C=function(){function t(t){void 0===t&&(t=5e3),this.SERVICE_NAME=v.Tahoe,this.STACK_MAX_LENGTH=500,this.BATCH_SIZE=300,this._recordQueue=[],this._queueLimit=5e3,this._executionRatio=0,this._queueIntervalID=void 0,this._serviceUrl="https://prod.tahoe-analytics.publishers.advertising.a2z.com/logevent/putRecords?encoded=true",this._serviceAPIKey="79db72eb0b5c7255afa54a253df24fb4a5ac916bf40b51c730df8850aa5665ca",this._eventSource="aps_web_client_library",this._queueInterval=t,this.createRecordQueueInterval()}return Object.defineProperty(t.prototype,"shouldSample",{get:function(){return 0!==this.executionRatio&&this.executionRatio>=Math.random()},enumerable:!1,configurable:!0}),t.prototype.logEvent=function(t){var e=t.eventCategory,n=t.eventName,o=t.eventTime,r=void 0===o?"".concat(Date.now()):o,i=t.eventProperties,a=void 0===i?{}:i,u={eventSource:this._eventSource,eventTime:r,eventCategory:e,eventName:n,eventProperties:a};this.enqueueEvent(u,r)},t.prototype.enqueueEvent=function(t,e){try{this._recordQueue.push({Data:window.btoa(JSON.stringify(t)),PartitionKey:e})}catch(t){E.warn("Error enqueuing new event.",t)}},t.prototype.createRecordQueueInterval=function(){var t=this;this._queueInterval<=0||(void 0!==this._queueIntervalID&&clearInterval(this._queueIntervalID),this._queueIntervalID=setInterval((function(){try{t.sendRecords()}catch(t){}}),this._queueInterval))},t.prototype.sendRecords=function(){var t=this;if(0!==this._recordQueue.length)if(0!==this.executionRatio){var e=this._recordQueue.filter((function(e){return void 0!==e&&t.shouldSample}));this._recordQueue.length=0;for(var n=function(e){return u(t,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(this._serviceUrl),{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this._serviceAPIKey},body:JSON.stringify({Records:e})})];case 1:return[2,t.sent()]}}))}))},o=0;o<e.length;o+=this.BATCH_SIZE)n(e.slice(o,o+this.BATCH_SIZE))}else this._recordQueue.length>=this._queueLimit&&(this._recordQueue.length=0,this.logEvent({eventCategory:"error",eventName:"queue limit"}))},Object.defineProperty(t.prototype,"executionRatio",{get:function(){return this._executionRatio},set:function(t){this._executionRatio="number"!=typeof t||t<0?0:t>=0&&t<=1?t:1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"queueInterval",{get:function(){return this._queueInterval},set:function(t){var e=this._queueInterval;this._queueInterval="number"==typeof t&&t>=0?t:0,e!==this._queueInterval&&this.createRecordQueueInterval()},enumerable:!1,configurable:!0}),t}(),S={key:"_config/requestViewer/countryCode",default:"unknown"},x=new(function(){function t(){var t=this;this.STACK_MAX_LENGTH=500,this.everyStream=function(e){return function(n){return t.streams.forEach((function(t){Array.isArray(e)&&!e.includes(t.SERVICE_NAME)||n(t)}))}},this._tahoeStream=new C,this._aaxPixelController=new b}return Object.defineProperty(t.prototype,"streams",{get:function(){return[this._tahoeStream,this._aaxPixelController]},enumerable:!1,configurable:!0}),t.prototype.logCoreError=function(t){this.logError(t,{tahoe:{dataSetId:"core"}})},t.prototype.logCoreFeature=function(t){this.logFeature(t,{tahoe:{dataSetId:"core"}})},t.prototype.logError=function(t,e){var n,o,r,a,u;void 0!==t&&(this._tahoeStream.logEvent({eventCategory:null!==(o=null===(n=null==e?void 0:e.tahoe)||void 0===n?void 0:n.dataSetId)&&void 0!==o?o:"error",eventName:null!==(r=t.id)&&void 0!==r?r:"unknown",eventProperties:i(i(i({},t.props),this.getSharedEventProperties(t.account)),{error:{name:this.getErrorName(t.error),message:this.getErrorMessage(t.error),stack:this.getStackTraceMessage(t.error),context:this.getErrorContext(t.error)}})}),this._aaxPixelController.logError({error:t.error,errorCategory:t.id,accountID:null!==(u=null===(a=t.account)||void 0===a?void 0:a.id)&&void 0!==u?u:"unknown"}))},t.prototype.logFeature=function(t,e){var n,o,r,a,u;void 0!==t&&(this._tahoeStream.logEvent({eventCategory:null!==(o=null===(n=null==e?void 0:e.tahoe)||void 0===n?void 0:n.dataSetId)&&void 0!==o?o:"feat",eventName:null!==(r=t.id)&&void 0!==r?r:"unknown",eventProperties:i(i(i({},t.props),this.getSharedEventProperties(t.account)),{status:t.feature})}),this._aaxPixelController.logFeature({category:t.id,feature:t.feature,accountID:null!==(u=null===(a=t.account)||void 0===a?void 0:a.id)&&void 0!==u?u:"unknown"}))},t.prototype.getSharedEventProperties=function(t){return{accountID:this.safelyGetAccountID(t),libraryVersion:m,url:this.getLocationHref(),hostname:this.getLocationHostname(),viewerCountryCode:this.getViewerCountryCode(t)}},t.prototype.safelyGetAccountID=function(t){var e="unknown";try{void 0!==(null==t?void 0:t.id)&&(e=t.id)}catch(t){}return e},t.prototype.getLocationHref=function(){var t,e,n,o="";try{o=null!==(n=null===(e=null===(t=window.top)||void 0===t?void 0:t.location)||void 0===e?void 0:e.href)&&void 0!==n?n:""}catch(t){}return o},t.prototype.getLocationHostname=function(){var t,e,n,o="";try{o=null!==(n=null===(e=null===(t=window.top)||void 0===t?void 0:t.location)||void 0===e?void 0:e.hostname)&&void 0!==n?n:""}catch(t){}return o},t.prototype.getViewerCountryCode=function(t){var e="unknown";try{null!==t&&(e=t.use(S))}catch(t){}return e},t.prototype.getStackTraceMessage=function(t){try{if("string"==typeof t)return"NO STACK: ERROR PASSED AS STRING";if(void 0===t.stack)return"NO STACK: error.stack IS UNDEFINED";if(t.stack.length>this.STACK_MAX_LENGTH){var e="[...]";return t.stack.substring(0,this.STACK_MAX_LENGTH-e.length)+e}return t.stack}catch(t){return"NO STACK: ERROR ON RETRIEVAL"}},t.prototype.getErrorName=function(t){var e="unknown";try{"string"==typeof t?e=t:void 0!==t.name&&(e=t.name)}catch(t){}return e},t.prototype.getErrorMessage=function(t){var e="unknown";try{"string"==typeof t?e=t:void 0!==t.message&&(e=t.message)}catch(t){}return e},t.prototype.getErrorContext=function(t){var e,n="unknown";try{"string"!=typeof t&&"context"in t&&(n=null!==(e=t.context)&&void 0!==e?e:"")}catch(t){}return n},t.prototype.setRatios=function(t){var e=[];return this.everyStream()((function(n){var o=n.executionRatio;e.push((function(){return n.executionRatio=o})),n.executionRatio=t})),function(){e.forEach((function(t){return t()}))}},t.prototype.setTahoeRatio=function(t){this._tahoeStream.executionRatio=t},t.prototype.setTahoeQueueInterval=function(t){this._tahoeStream.queueInterval=t},t}()),P=["scope/objectName",f,h];function I(t){return null===t||"object"!=typeof t?t:t instanceof Date?new Date(t.getTime()):t instanceof Array?t.reduce((function(t,e){return t.push(I(e)),t}),[]):t instanceof Set?Array.from(t.values()).reduce((function(t,e){return t.add(I(e)),t}),new Set):t instanceof Map?Array.from(t.entries()).reduce((function(t,e){return t.set(e[0],I(e[1])),t}),new Map):t instanceof Object?Object.keys(t).reduce((function(e,n){return e[n]=I(t[n]),e}),{}):t}var D=function(){function t(t,e,n){void 0===e&&(e=K.globalContext),void 0===n&&(n=K.rootName);var o=e[n].get(t);if(null==o)throw new Error('Missing "'.concat(t,'" account in userspace object'));this.globalContext=e,this.id=t,this.store=o.store,this.queue=o.queue}return t.prototype.record=function(t,e){return u(this,void 0,void 0,(function(){var o=this;return c(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(r,a){o.queue.push(new CustomEvent(t,{detail:i({resolve:r,reject:a,source:n.internal},e)}))}))];case 1:return[2,r.sent()]}}))}))},t.prototype.read=function(t,e){var n,o,r,i,a=this.store.get(t);if(void 0!==a)return a;if(void 0!==(null==e?void 0:e.persist)&&e.persist){var u=this.persistRead(t);if(void 0!==u)return u}var c=null===(o=null===(n=null==e?void 0:e.default)||void 0===n?void 0:n.generators)||void 0===o?void 0:o.get(t);return void 0!==c?c.apply(void 0,d([],l(null!==(i=null===(r=null==e?void 0:e.default)||void 0===r?void 0:r.args)&&void 0!==i?i:[]),!1)):void 0},t.prototype.write=function(t,e,n){this.store.set(t,e),void 0!==(null==n?void 0:n.persist)&&n.persist&&this.persistWrite(t,e)},t.prototype.use=function(t,e){var n,o=this.store.get(t.key);if(void 0!==o)n=o;else if(void 0!==(null==e?void 0:e.persist)&&e.persist){var r=this.persistRead(t.key);null!=r&&(n=r)}var i=null!=n?n:t.default;if("function"==typeof i)return i;try{return structuredClone(i)}catch(t){try{return I(i)}catch(t){return x.logCoreError({id:"Core.library.Account.use",account:null,error:t}),i}}},t.prototype.update=function(t,e,n){var o=e(this.use(t,n));if(this.store.set(t.key,o),void 0!==(null==n?void 0:n.persist)&&n.persist){if("string"!=typeof o)throw new Error("".concat(JSON.stringify(o)," must be a string to be writtable to browser storage"));this.persistWrite(t.key,o)}},t.prototype.delete=function(t,e){this.store.delete(t),void 0!==(null==e?void 0:e.persist)&&e.persist&&this.persistDelete(t)},t.prototype.getPersistedItemName=function(t){return"".concat("aps").concat(":").concat(this.id).concat(":").concat(t)},t.prototype.persistRead=function(t){if(!P.includes(t))throw new Error("".concat(t," is not allowed to be read from browser storage"));var e=this.getPersistedItemName(t);if(e in this.globalContext.localStorage)return this.globalContext.localStorage.getItem(e)},t.prototype.persistWrite=function(t,e){if(!P.includes(t))throw new Error("".concat(t," is not allowed to be written to browser storage"));if("string"!=typeof e)throw new Error("".concat(JSON.stringify(e)," must be a string to be writtable to browser storage"));this.globalContext.localStorage.setItem(this.getPersistedItemName(t),e)},t.prototype.persistDelete=function(t){if(!P.includes(t))throw new Error("".concat(t," is not allowed to be touched/deleted in browser storage"));this.globalContext.localStorage.removeItem(this.getPersistedItemName(t))},t.create=function(t){var e=t.accountID,n=void 0===e?"default":e,o=t.globalContext,r=void 0===o?K.globalContext:o,i=t.rootName,a=void 0===i?K.rootName:i,u=t.listeners,c=new X(r,a);c.equip(),void 0!==u&&c.subscribe(u);var s={store:new Map,queue:[]};return r[a].set(n,s),new this(n)},t}(),A="_system",R=function(e){function n(t,n){return e.call(this,A,t,n)||this}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}(n,e),n}(D);function N(t){var e=function(t,e){throw void 0!==t.context?t.context="".concat(e," > ").concat(t.context):t.context=e,t};return function(n,o,r){var i=r.value;return r.value=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{var r=i.apply(this,n);return r&&r instanceof Promise?r.catch((function(n){e(n,t)})):r}catch(n){e(n,t)}},r}}var O="listeners",M="_internal/history",T="_config/events/activations",q="_config/events/deactivations",L="_internal/pageLoadID",k="_internal/externalEventCount",j="_internal/recentDispatches",U="_internal/coreDebugMode",z=function(){function t(t,e,n){this.globalContext=t,this.rootName=e,this.dispatcher=n}return t.prototype.getAccounts=function(){return this.globalContext[this.rootName]},t.prototype.createUserspaceRoot=function(){null==this.getAccounts()&&(this.globalContext[this.rootName]=new Map)},t.prototype.createSystemAccount=function(){!1===this.getAccounts().has(A)&&(this.getAccounts().set(A,{queue:[],store:new Map}),(new R).store.set(L,Math.random()))},t.prototype.observeRootSet=function(){var t=this;this.getAccounts().set=function(e,n){Map.prototype.set.apply(this,[e,n]),t.equip()}},t.prototype.observeAccountQueuesPush=function(){var t=this;this.getAccounts().forEach((function(n){n.queue.push=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];Array.prototype.push.apply(this,n),t.dispatcher.dispatch({reason:{method:e.push,events:n}})}}))},t.prototype.overwriteAccountStoresGet=function(){this.getAccounts().forEach((function(t){t.store.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Map.prototype.get.apply(this,t);return n}}))},t.prototype.defineConvenienceFunctions=function(){var t=this,e=function(e,n,o){var r=t.getAccounts().get(e);void 0!==r&&r.queue.push(new CustomEvent(n,{detail:null!=o?o:{}}))},n=this.globalContext[this.rootName];n.triggerFor=e,n.trigger=function(t,n){e(A,t,n)}},t.prototype.equip=function(){try{this.createUserspaceRoot(),this.createSystemAccount(),this.observeRootSet(),this.observeAccountQueuesPush(),this.overwriteAccountStoresGet(),this.defineConvenienceFunctions()}catch(t){throw x.logCoreError({id:"Core.library.Equiper.equip",account:null,error:t}),t}},t}(),F=function(t){var e,n;if(void 0===t||!Array.isArray(t))return!0;var o=window;do{if(t.includes(null===(e=null==o?void 0:o.location)||void 0===e?void 0:e.hostname))return!0;if(o===window.top)break;n=o,o=o.parent}while(n!==o&&n!==window.top);return!1};function B(){var t,e,n;try{return!!new URLSearchParams(null!==(e=null===(t=window.top)||void 0===t?void 0:t.location.search)&&void 0!==e?e:window.location.search).has("apsCoreDebugMode")||null!==(n=(new R).read(U))&&void 0!==n&&n}catch(t){return!1}}var H=[p.completed,p.error,p.cancelled],G=function(){function t(t,e){this.globalContext=t,this.rootName=e}return t.prototype.getDeactivations=function(t){var e;return null!==(e=t.store.get(q))&&void 0!==e?e:new Set},t.prototype.isEventDeactivated=function(t,e){return!0===this.getDeactivations(t).has(e.type)||function(t,e){var n,o,r,i,a,u;try{var c=null===(r=null===(o=null===(n=t.detail)||void 0===n?void 0:n.restrictions)||void 0===o?void 0:o.allow)||void 0===r?void 0:r.hostnames;if(void 0!==c&&!F(c))return!0;var s=null===(u=null===(a=null===(i=t.detail)||void 0===i?void 0:i.restrictions)||void 0===a?void 0:a.block)||void 0===u?void 0:u.hostnames;if(void 0!==s&&F(s))return!0}catch(t){return x.logError({error:new Error("Host name filtering failed"),id:"hostnames",account:e}),!1}return!1}(e,t)},t.prototype.getListeners=function(){var t;return null!==(t=(new R).store.get(O))&&void 0!==t?t:new Map},t.prototype.getListener=function(t){return this.getListeners().get(t.type)},t.prototype.shouldWaitingEventBeProcessed=function(t){var e=this.readStoreItemCount(k);return(void 0===t.externalEventCount||t.externalEventCount<e)&&(t.externalEventCount=e,!0)},t.prototype.shouldEventBeProcessed=function(t){if(void 0===t.status)return!0;if(t.status===p.started)return!1;if(H.includes(t.status))return!1;if(t.status===p.waiting)return!!this.shouldWaitingEventBeProcessed(t);if(t.status===p.unknown)return!1;if(t.status===p.deactivated)return!1;throw new Error("Event status not explicitely handled: ".concat(t.status))},t.prototype.addTimeoutToPromiseRaceIfRequested=function(t,e){var n;void 0!==(null===(n=e.detail)||void 0===n?void 0:n.timeout)&&t.push(new Promise((function(t,n){setTimeout((function(){return n(new Error('Event "'.concat(e.type,'" timed out')))}),e.detail.timeout)})))},t.prototype.incrementStoreItemCountBy=function(t,e){var n,o=new R,r=null!==(n=o.read(t))&&void 0!==n?n:0;o.write(t,r+e)},t.prototype.resetStoreItemCount=function(t){(new R).write(t,0)},t.prototype.readStoreItemCount=function(t){var e;return null!==(e=(new R).read(t))&&void 0!==e?e:0},t.prototype.handleEventSuccess=function(t,n,o,r){var i;if(!(n in p))throw new Error("Listener returned invalid status: ".concat(t.type," returned ").concat(n));if(this.updateAndLogEventStatusOnChange(t,n,r),n!==p.waiting&&void 0!==(null===(i=t.detail)||void 0===i?void 0:i.resolve))try{t.detail.resolve(o)}catch(t){E.error(t)}this.dispatch({reason:{method:e.listenerSuccess,events:[t]}})},t.prototype.handleEventFailure=function(t,e,n){void 0!==e&&"string"!=typeof e||(e=new Error(e)),this.updateAndLogEventStatusOnChange(t,p.error,n),this.surfaceErrorToExternalUsers(t,e),e.context=t.type,x.logError({id:t.type,error:e,account:n})},t.prototype.addListenerToPromiseRace=function(t,e,n){var o=this.getListener(e);t.push(o({customEvent:e,account:n}))},t.prototype.runPromiseRace=function(t,e,n){var o=this;Promise.race(t).then((function(t){var r,i;"string"==typeof t?r=t:"object"==typeof t&&(r=t.status,i=t.value),o.handleEventSuccess(e,r,i,n)})).catch((function(t){o.handleEventFailure(e,t,n)}))},t.prototype.executeListenerRace=function(t,e){var n=[];this.addListenerToPromiseRace(n,t,e),this.addTimeoutToPromiseRaceIfRequested(n,t),this.runPromiseRace(n,t,e)},t.prototype.recordErrorPassedAsEventDetailIfNoStatus=function(t,e){var n;if(void 0===t.status){var o=null===(n=t.detail)||void 0===n?void 0:n.error;void 0!==o&&x.logError({id:t.type,error:o,account:e})}},t.prototype.flagDeactivatedListener=function(t,e){this.isEventDeactivated(e,t)&&this.updateAndLogEventStatusOnChange(t,p.deactivated,e)},t.prototype.flagMissingListener=function(t,e){void 0===this.getListener(t)&&this.updateAndLogEventStatusOnChange(t,p.unknown,e)},t.prototype.surfaceErrorToExternalUsers=function(t,e){var n;if(void 0!==(null===(n=t.detail)||void 0===n?void 0:n.reject))try{t.detail.reject(e)}catch(t){E.error(t)}else E.error(e)},t.prototype.handleInvalidAccountError=function(t,e){var n=new Error('Invalid account ID: "'.concat(e.id,'"'));this.handleEventFailure(t,n,e)},t.prototype.isAccountValid=function(t){if("string"!=typeof t.id)return!1;return!["","undefined","true","false"].includes(t.id.trim())},t.prototype.dispatchEvent=function(t,e){var n;this.isAccountValid(e)?(this.recordErrorPassedAsEventDetailIfNoStatus(t,e),this.flagMissingListener(t,e),this.flagDeactivatedListener(t,e),this.shouldEventBeProcessed(t)&&(this.updateAndLogEventStatusOnChange(t,p.started,e),B()&&E.info("## Execute event: ".concat(t.type," with initial status ").concat(null!==(n=t.status)&&void 0!==n?n:"undefined")),this.executeListenerRace(t,e))):this.handleInvalidAccountError(t,e)},t.prototype.dispatchAccount=function(t,e){var n=this;t.queue.forEach((function(e){return n.dispatchEvent(e,t)}))},t.prototype.updateEventStatus=function(t,e){t.status=e,t.statusEvents=null!=t.statusEvents?t.statusEvents:[],t.statusEvents.push(new CustomEvent(e))},t.prototype.logEventUsage=function(t,e,n){var o,r=new CustomEvent("now").timeStamp,a=null===(o=t.statusEvents)||void 0===o?void 0:o.find((function(t){return t.type===p.started})),u=null!=a?r-a.timeStamp:void 0;x.logFeature({id:t.type,feature:e,props:i(i({},t.analytics),{timers:{sinceCreated:r-t.timeStamp,sinceStarted:u}}),account:n})},t.prototype.updateAndLogEventStatusOnChange=function(t,e,n){var o;t.status!==e&&(B()&&E.info("### Update ".concat(t.type," from ").concat(null!==(o=t.status)&&void 0!==o?o:"undefined"," to ").concat(e)),this.updateEventStatus(t,e),!0!==t.isLogDisabled&&this.logEventUsage(t,e,n))},t.prototype.getAccounts=function(){var t=this,e=new Map;return this.globalContext[this.rootName].forEach((function(n,o){return e.set(o,new D(o,t.globalContext,t.rootName))})),e},t.prototype.recordProcessedEvents=function(t){var e=null!=t.store.get(M)?t.store.get(M):[];e.push.apply(e,d([],l(t.queue.filter((function(t){return void 0!==t.status&&H.includes(t.status)}))),!1)),t.store.set(M,e)},t.prototype.cleanUpAccountQueue=function(t){var e;(e=t.queue).splice.apply(e,d([0,t.queue.length],l(t.queue.filter((function(t){return void 0===t.status||!H.includes(t.status)}))),!1))},t.prototype.archive=function(){var t=this;this.getAccounts().forEach((function(e){t.recordProcessedEvents(e),t.cleanUpAccountQueue(e)}))},t.prototype.filterExternalEvents=function(t){return null==t?void 0:t.filter((function(t){var e,o;return(null===(e=t.detail)||void 0===e?void 0:e.source)!==n.internal&&(null===(o=t.detail)||void 0===o?void 0:o.source)!==n.apstag&&t.status!==p.waiting}))},t.prototype.getNumberOfExternalEvents=function(t){var e,n=this.filterExternalEvents(t);return null!==(e=null==n?void 0:n.length)&&void 0!==e?e:0},t.prototype.updateExternalEventCount=function(t){var e=this.getNumberOfExternalEvents(t);this.incrementStoreItemCountBy(k,e)},t.prototype.throwOnInfiniteLoop=function(){var t=this,e=j;this.incrementStoreItemCountBy(e,1);var n=this.readStoreItemCount(e);if(n>1e4)throw new Error("Too many dispatches. Aborting");n%100==0&&x.logCoreFeature({id:"Core.library.Dispatcher.throwOnInfiniteLoop",account:null,feature:"recentDispatchesCount",props:{recentDispatchesCount:n}}),setTimeout((function(){t.resetStoreItemCount(e)}),100)},t.prototype.dispatch=function(t){var e,n,o,r,i,a=this,u=t.reason;try{this.throwOnInfiniteLoop(),B()&&E.info('# Dispatch from method "'.concat(u.method,'" on event "').concat(null!==(n=null===(e=u.events)||void 0===e?void 0:e[0].type)&&void 0!==n?n:"undefined",'" with source "').concat(null!==(i=null===(r=null===(o=u.events)||void 0===o?void 0:o[0].detail)||void 0===r?void 0:r.source)&&void 0!==i?i:"undefined",'"\n_________________________________________')),this.updateExternalEventCount(u.events),this.getAccounts().forEach((function(t){return a.dispatchAccount(t,u)})),this.archive()}catch(t){throw x.logCoreError({id:"Core.library.Dispatcher.dispatch",account:null,error:t}),t}},t}(),Q=function(){function t(t,e){this.globalContext=t,this.rootName=e}return t.prototype.subscribe=function(t){try{var e=new R,n=null!=e.store.get(O)?e.store.get(O):new Map;e.store.set(O,new Map(d(d([],l(n),!1),l(t),!1)))}catch(t){throw x.logCoreError({id:"Core.library.Subscriber.subscribe",account:null,error:t}),t}},t}(),V=function(){function t(t,e){this.globalContext=t,this.rootName=e}return t.prototype.populate=function(){try{var t=new R,e=!1;try{e=JSON.parse(t.read(g))}catch(t){}if(e)return;t.write(g,JSON.stringify(!0)),this.populateFromPrependStore(),this.populateFromQueryParams()}catch(t){throw x.logCoreError({id:"Core.library.Populator.populate",account:null,error:t}),t}},t.prototype.populateFromPrependStore=function(){var t=this;this.globalContext[this.rootName].forEach((function(e,n){var o,r,i=new D(n,t.globalContext,t.rootName),a=null!==(r=i.read(h,{persist:!0}))&&void 0!==r?r:"[]";i.write(h,JSON.stringify([]));try{var u=JSON.parse(a);if(0===u.length)return;(o=i.queue).push.apply(o,d([],l(u.map(W)),!1))}catch(t){console.error("Error processing prepended events",t)}}))},t.prototype.populateFromQueryParams=function(){var t,e,n=null===(e=null===(t=this.globalContext)||void 0===t?void 0:t.location)||void 0===e?void 0:e.search,o=new URLSearchParams(n),r=this.globalContext[this.rootName],i=r.get(A);J(o,"aps.trigger").forEach((function(t){i.queue.push(W(t))})),J(o,"aps.triggerFor",!0).forEach((function(t){void 0!==t.accountId&&r.has(t.accountId)&&r.get(t.accountId).queue.push(W(t))}));var a=J(o,"aps_event");r.forEach((function(t){a.forEach((function(e){t.queue.push(W(e))}))}))},t}(),J=function(t,e,n){void 0===n&&(n=!1);var o=t.getAll(e),r=[];return o.forEach((function(t){var e,o=t.split(",");n&&(e=o.shift());var i=o.shift();if(void 0!==i&&i.length>0){var a=decodeURIComponent(o.join(",")),u=void 0;if(a.length>0)try{u=JSON.parse(a)}catch(t){console.error("Error processing query param event",i,u)}r.push({eventName:i.replace(/_/g,"/"),eventDetail:u,accountId:e})}})),r},W=function(t){var e;return new CustomEvent(t.eventName,{detail:i({},null!==(e=t.eventDetail)&&void 0!==e?e:{})})},K={globalContext:window,rootName:"_aps"},X=function(){function t(t,e){void 0===t&&(t=K.globalContext),void 0===e&&(e=K.rootName),this.dispatcher=new G(t,e),this.equiper=new z(t,e,this.dispatcher),this.subscriber=new Q(t,e),this.populator=new V(t,e),this.globalContext=t,this.rootName=e}return t.prototype.subscribe=function(t){this.subscriber.subscribe(t)},t.prototype.equip=function(){this.equiper.equip()},t.prototype.dispatch=function(t){var e=t.reason;this.dispatcher.dispatch({reason:e})},t.prototype.populate=function(){this.populator.populate()},t.prototype.load=function(t){var n=t.listeners;this.equip(),this.subscribe(n),this.dispatch({reason:{method:e.direct}}),this.populate()},a([N("HASH#Core.library.UserSpace.subscribe")],t.prototype,"subscribe",null),a([N("HASH#Core.library.UserSpace.equip")],t.prototype,"equip",null),a([N("HASH#Core.library.UserSpace.dispatch")],t.prototype,"dispatch",null),a([N("HASH#Core.library.UserSpace.populate")],t.prototype,"populate",null),a([N("HASH#Core.library.UserSpace.load")],t.prototype,"load",null),t}(),Y=new Map([["_config/events/activate",function(t){var e=t.customEvent,n=t.account;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(r){return(t=null!=n.store.get(T)?n.store.get(T):new Set).add(e.detail.name),n.store.set(T,t),[2,o.completed]}))}))}],["_config/events/deactivate",function(t){var e=t.customEvent,n=t.account;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(r){return(t=null!=n.store.get(q)?n.store.get(q):new Set).add(e.detail.name),n.store.set(q,t),[2,o.completed]}))}))}]]);var Z,$,tt,et={debug_events_show:"debug/events/show",debug_prepend_add:"debug/prepend/add",debug_prepend_clear:"debug/prepend/clear",debug_prepend_remove:"debug/prepend/remove",debug_store_show:"debug/store/show",ad_debugSession_start:"ad/debugSession/start",debug_listeners_show:"debug/listeners/show"},nt=new Map([[et.debug_events_show,function(t){var e=t.account;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(n){return(t=d(d(d(d([],l((null!=e.store.get(M)?e.store.get(M):[]).map((function(t){return{type:t.type,status:"created",detail:t.detail,timestamp:t.timeStamp}}))),!1),l(e.queue.map((function(t){return{type:t.type,status:"created",detail:t.detail,timestamp:t.timeStamp}}))),!1),l((null!=e.store.get(M)?e.store.get(M):[]).map((function(t){return null!=t.statusEvents?t.statusEvents.map((function(e){return{type:t.type,status:e.type,detail:t.detail,timestamp:e.timeStamp}})):[]})).flat()),!1),l(e.queue.map((function(t){return null!=t.statusEvents?t.statusEvents.map((function(e){return{type:t.type,status:e.type,detail:t.detail,timestamp:e.timeStamp}})):[]})).flat()),!1).filter((function(t){return!t.type.startsWith("debug/")}))).sort((function(t,e){return t.timestamp-e.timestamp})),console.groupCollapsed("⌂ Account ID: ".concat(e.id)),console.table(t),console.groupEnd(),[2,o.completed]}))}))}],[et.debug_prepend_add,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r,i,a,u,s,l;return c(this,(function(c){if(void 0===(null===(s=n.detail)||void 0===s?void 0:s.eventName))throw new Error("Missing event information");return t=null!==(l=e.read(h,{persist:!0}))&&void 0!==l?l:"[]",r=JSON.parse(t),i=n.detail,a=i.eventName,u=i.eventDetail,r.unshift({eventName:a,eventDetail:u}),e.write(h,JSON.stringify(r),{persist:!0}),[2,o.completed]}))}))}],[et.debug_prepend_clear,function(t){var e=t.account;return u(void 0,void 0,void 0,(function(){return c(this,(function(t){return e.delete(h,{persist:!0}),[2,o.completed]}))}))}],[et.debug_prepend_remove,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r,i,a,u,s;return c(this,(function(c){if(void 0===(null===(u=n.detail)||void 0===u?void 0:u.eventName))throw new Error("Missing event information");return t=null!==(s=e.read(h,{persist:!0}))&&void 0!==s?s:"[]",r=JSON.parse(t),i=n.detail.eventName,a=r.filter((function(t){return t.eventName!==i})),e.write(h,JSON.stringify(a),{persist:!0}),[2,o.completed]}))}))}],[et.debug_store_show,function(t){var e=t.account;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(n){return t=d([],l(e.store.entries()),!1),console.groupCollapsed("⌂ Account ID: ".concat(e.id)),console.table(t),console.groupEnd(),[2,o.completed]}))}))}],[et.ad_debugSession_start,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){return c(this,(function(t){return function(t){return t.status!==o.waiting}(n)&&(function(t,e){var n;void 0!==(null===(n=t.detail)||void 0===n?void 0:n.minutes)&&function(t,e){var n,o=new Date;t.write(f,o.setMinutes(Number(o.getMinutes())+Number(null===(n=e.detail)||void 0===n?void 0:n.minutes)).toString(),{persist:!0})}(e,t);!function(t){var e;t.globalContext.apstagDEBUG=null!==(e=t.globalContext.apstagDEBUG)&&void 0!==e?e:{},t.globalContext.apstagDEBUG.url=function(t){var e,n,o,r,i=new URL(null!==(o=null===(n=null===(e=null==t?void 0:t.top)||void 0===e?void 0:e.location)||void 0===n?void 0:n.href)&&void 0!==o?o:null===(r=null==t?void 0:t.document)||void 0===r?void 0:r.referrer);return i.searchParams.set("amzn_debug_mode","1"),i.toString()}(t.globalContext)}(e)}(n,e),function(t){return t.queue.filter((function(t){return t.type===et.ad_debugSession_start})).length>1}(e))?[2,o.completed]:function(t){var e=t.read(f,{persist:!0});return void 0!==e&&new Date>=new Date(Number(e))}(e)?(function(t){t.delete(f,{persist:!0}),function(t){var e;null===(e=t.globalContext.apstagDEBUG)||void 0===e||delete e.url}(t)}(e),[2,o.completed]):(function(t){t.record(et.debug_events_show),t.record(et.debug_store_show)}(e),[2,o.waiting])}))}))}],[et.debug_listeners_show,function(t){return t.account,u(void 0,void 0,void 0,(function(){var t,e,n;return c(this,(function(r){return t=new R,e=t.store.get(O),n=d([],l(e.entries()),!1),console.groupCollapsed("⌂ Listeners"),console.table(n),console.groupEnd(),[2,o.completed]}))}))}]]),ot=new Map([["ad/record/delete",function(t){var e=t.account;return t.customEvent,u(void 0,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return void 0===(null===(t=e.globalContext.apstag)||void 0===t?void 0:t.dpa)?[2,o.waiting]:[4,new Promise((function(t,n){var o;try{null===(o=e.globalContext.apstag)||void 0===o||o.dpa((function(){return t()}))}catch(t){n(new Error("apstag.dpa error: ".concat(t)))}}))];case 1:return n.sent(),[2,o.completed]}}))}))}],["ad/record/renew",function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(r){switch(r.label){case 0:return void 0===(null===(t=e.globalContext.apstag)||void 0===t?void 0:t.rpa)?[2,o.waiting]:[4,new Promise((function(t,o){var r,i;if(void 0===(null===(r=n.detail)||void 0===r?void 0:r.config))throw new Error("Missing tokenConfig object");try{null===(i=e.globalContext.apstag)||void 0===i||i.rpa(n.detail.config,(function(){return t()}),n.detail.setCookie,e.id)}catch(t){o(new Error("apstag.rpa error: ".concat(t)))}}))];case 1:return r.sent(),[2,o.completed]}}))}))}],["ad/record/rr",function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r;return c(this,(function(a){if(void 0===(null===(t=e.globalContext.apstag)||void 0===t?void 0:t.rr))return[2,o.waiting];if(void 0===(null===(r=n.detail)||void 0===r?void 0:r.config))throw new Error("Missing config object");return e.globalContext.apstag.rr(i({accountID:e.id},n.detail.config)),[2,o.completed]}))}))}],["ad/record/update",function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(r){switch(r.label){case 0:return void 0===(null===(t=e.globalContext.apstag)||void 0===t?void 0:t.upa)?[2,o.waiting]:[4,new Promise((function(t,o){var r,i;if(void 0===(null===(r=n.detail)||void 0===r?void 0:r.config))throw new Error("Missing tokenConfig object");try{null===(i=e.globalContext.apstag)||void 0===i||i.upa(n.detail.config,(function(){return t()}),n.detail.setCookie,"api",e.id)}catch(t){o(new Error("apstag.upa error: ".concat(t)))}}))];case 1:return r.sent(),[2,o.completed]}}))}))}]]),rt=new Map([["_config/config/didLoad",function(t){var e=t.account;return t.customEvent,u(void 0,void 0,void 0,(function(){return c(this,(function(t){return e.write("config/loaded",!0),[2,o.completed]}))}))}],["_config/requestViewerCountry/define",function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r;return c(this,(function(i){if(void 0===(null===(r=n.detail)||void 0===r?void 0:r.code))throw new Error("Missing country code");if("string"!=typeof(t=n.detail.code)||0===t.trim().length)throw new Error('Invalid country code: "'.concat(t,'"'));return e.update(S,(function(){return t})),[2,o.completed]}))}))}]]);!function(t){t.OpenRTB3_0="OpenRTB3_0"}(Z||(Z={})),function(t){t.Display="display",t.Video="video",t.MultiFormat="multi-format"}($||($={})),function(t){t.Googletag="googletag",t.AppNexus="appnexus",t.SAS="sas"}(tt||(tt={}));var it=function(t){var e,n={id:t.slotID,spec:{placement:{tagid:null!==(e=t.slotName)&&void 0!==e?e:t.slotID}}};return void 0!==t.floor&&(n.flr=t.floor.value,n.flrcur=t.floor.currency),void 0!==t.slotParams&&(n.spec.placement.ext=t.slotParams),n.spec.placement=i(i({},n.spec.placement),at(t)),n},at=function(t){var e={};return t.mediaType===$.MultiFormat?e=ut(t.multiFormatProperties,t.companions):t.mediaType===$.Video?(e.video={},void 0!==t.sizes&&t.sizes.length>0&&(e.video={w:t.sizes[0][0],h:t.sizes[0][1]}),void 0!==t.companions&&t.companions.length>0&&(e.video.comp=t.companions.map((function(t){return{id:t}})))):t.mediaType===$.Display&&(e.display={},void 0!==t.sizes&&t.sizes.length>0&&(e.display.displayfmt=t.sizes.map((function(t){return{w:t[0],h:t[1]}})))),e},ut=function(t,e){var n,o={};if(void 0!==t&&(void 0!==t.display&&(o.display={displayfmt:void 0!==t.display.sizes?t.display.sizes.map((function(t){return{w:t[0],h:t[1]}})):void 0}),void 0!==t.video)){var r=null===(n=t.video.sizes)||void 0===n?void 0:n[0];o.video={w:void 0!==r?r[0]:void 0,h:void 0!==r?r[1]:void 0},void 0!==e&&(o.video.comp=e.map((function(t){return{id:t}})))}return o},ct=function(t,e){var n={};return Object.keys(t).forEach((function(o){"object"==typeof t[o]&&null!==t[o]&&(o===e?Object.assign(n,t[o]):Object.assign(n,ct(t[o],e)))})),n},st=function(t){var e=ct(t,"ext");return Object.entries(e).forEach((function(t){var n=l(t,2),o=n[0],r=n[1];"string"!=typeof r&&(e[o]=JSON.stringify(r))})),0!==Object.keys(e).length?e:void 0},lt=function(t){var e,n=dt(t),o={mediaType:n};return n===$.MultiFormat?o=i(i({},o),vt(t)):n===$.Display?o.sizes=pt(t.display):n===$.Video&&(o.sizes=ft(t.video),void 0!==(null===(e=t.video)||void 0===e?void 0:e.comp)&&(o.companions=ht(t.video))),o},dt=function(t){return void 0!==t.video&&void 0!==t.display?$.MultiFormat:void 0!==t.video?$.Video:$.Display},vt=function(t){var e={multiFormatProperties:{}};return void 0!==t.video&&(e.multiFormatProperties.video={sizes:ft(t.video)},void 0!==t.video.comp&&(e.companions=ht(t.video))),void 0!==t.display&&(e.multiFormatProperties.display={sizes:pt(t.display)}),e},pt=function(t){var e=[];return void 0!==t&&(void 0!==t.displayfmt&&t.displayfmt.length>0&&(e=d(d([],l(e),!1),l(t.displayfmt.map((function(t){return[t.w,t.h]}))),!1)),void 0!==t.h&&void 0!==t.w&&(e=d(d([],l(e),!1),[[t.w,t.h]],!1))),e},ft=function(t){var e=[];return void 0!==t&&void 0!==t.h&&void 0!==t.w&&(e=d(d([],l(e),!1),[[t.w,t.h]],!1)),e},ht=function(t){var e;return void 0!==(null==t?void 0:t.comp)&&t.comp.length>0&&(e=t.comp.map((function(t){return t.id}))),e},gt="ad/targeting",mt="ad/schain",yt="ad/context",wt="ad/googletagSlotAutoImport",bt=new Map([[gt,function(){var t=new Map;return t.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Map.prototype.get.apply(this,t);return Map.prototype.delete.apply(this,t),n},t}],[mt,function(){}],[yt,function(){}],[wt,function(){}]]),_t={key:"ad/slots",default:new Map},Et={key:"ad/attachTargeting",default:void 0},Ct={key:"cxm/isConfigLoadInitiated",default:!1};function St(t){var e=t.account,n=t.selectedSlots,o=t.publisherParams,r=t.timeout,a=t._endpointDomain,s=t.initConfig;return u(this,void 0,void 0,(function(){var t;return c(this,(function(u){switch(u.label){case 0:return t=function(t){return t.map((function(t){return function(t){if(void 0!==t.version&&t.version!==Z.OpenRTB3_0)throw new Error("Invalid OpenRTB version specified");var e=t.spec.placement,n=i({slotID:t.id,slotName:e.tagid},lt(e)),o=st(t);if(void 0!==o&&(n.slotParams=o),void 0!==t.flr){if(void 0!==t.flrcur&&"USD"!==t.flrcur)throw new Error('item.flrcur: only "USD" is currently supported');n.floor={value:t.flr,currency:"USD"}}return n}(t)}))}(n),[4,xt({account:e,legacySlots:t,publisherParams:o,timeout:r,_endpointDomain:a,initConfig:s})];case 1:return[2,u.sent()]}}))}))}function xt(t){var e=t.account,n=t.legacySlots,o=t.publisherParams,r=t.timeout,i=t._endpointDomain,a=t.initConfig;return u(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){if(void 0===e.globalContext.apstag)throw new Error("apstag undefined in global scope");e.globalContext.apstag.fetchBids({slots:n,params:o,timeout:null!=r?r:6e4,_endpointDomain:i},(function(e){t(e)}),{initConfig:a})}))];case 1:return[2,t.sent()]}}))}))}var Pt,It,Dt=function(t,e,n,o){var r,i,a,u=n.globalContext.document.createElement("iframe"),c=null===(r=e.get("amznsz"))||void 0===r?void 0:r.split("x"),s=e.get("amzniid"),l=t;if(!(void 0===s||void 0===l||void 0===c||c.length<2)){u.style.marginLeft="0",u.style.marginTop="0",u.style.height="".concat(c[1],"px"),u.style.width="100%",u.setAttribute("scrolling","no"),u.setAttribute("frameborder","0");var d=n.globalContext.document.createElement("div"),v=null!==(i=null==o?void 0:o.location)&&void 0!==i?i:"afterend",p=n.globalContext.document.getElementById(l);if(null!=p){p.insertAdjacentElement(v,d),d.appendChild(u);var f=null===(a=null==u?void 0:u.contentWindow)||void 0===a?void 0:a.document;void 0!==f&&(f.open(),f.write('<!DOCTYPE html><html><head><meta charset="UTF-8"><style>html{height:100%}body{height:100%;margin:0;overflow:hidden}</style></head><body><script>window.parent.apstag.renderImp(document, "'+s+'", {"inheritSize": true});<\/script></body></html>'),f.close())}}},At="ad/ASRSlot/render",Rt=new Map([[At,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r;return c(this,(function(i){if(void 0===(null===(t=n.detail)||void 0===t?void 0:t.id)||void 0===(null===(r=n.detail)||void 0===r?void 0:r.targeting))throw new Error("Missing event detail");return Dt(n.detail.id,n.detail.targeting,e),[2,o.completed]}))}))}]]);!function(t){t.equinoxWidget="amazon:93b7dd52-a8ce-11ed-afa1-0242ac120002"}(Pt||(Pt={})),function(t){t.equinoxWidget="aax-us-east.amazon-adsystem.com"}(It||(It={}));function Nt(t,e){return u(this,void 0,void 0,(function(){var n,o;return c(this,(function(r){switch(r.label){case 0:return function(t){t.forEach((function(t){if(void 0===t.deal)return t;t.deal.some((function(t){return t.id===Pt.equinoxWidget}))&&function(t){void 0!==t.spec.placement.display&&(t.spec.placement.display.displayfmt=[{w:999,h:999}])}(t)}))}(t),[4,Tt(t,e)];case 1:return r.sent(),n=function(t){var e={};return t.forEach((function(t){var n=function(t){var e,n,o,r,a,u={},c="93b7dd52-a8ce-11ed-afa1-0242ac120002";return void 0!==(null===(e=t.deal)||void 0===e?void 0:e.find((function(t){return t.id==="amazon:".concat(c)})))&&(u=i(i({},u),{program:"apscustom"})),i(i({},u),null!==(a=null===(r=null===(o=null===(n=t.spec.placement.display)||void 0===n?void 0:n.ext)||void 0===o?void 0:o.amazon)||void 0===r?void 0:r[c])&&void 0!==a?a:{})}(t);e=i(i({},e),n)})),e}(t),[4,Mt(t,n,e)];case 2:return r.sent(),o=e.read(gt),[4,qt(t,o,e)];case 3:return r.sent(),[2]}}))}))}function Ot(t){return t.some((function(t){return function(t){var e;return!0===(null===(e=t.deal)||void 0===e?void 0:e.some((function(t){return t.id===Pt.equinoxWidget})))}(t)}))}function Mt(t,e,n){return u(this,void 0,void 0,(function(){var o;return c(this,(function(r){switch(r.label){case 0:return o={itemIds:t.map((function(t){return t.id})),publisherParams:e},Ot(t)&&(o._endpointDomain=It.equinoxWidget),[4,n.record(jt.ad_targeting_fetch,o)];case 1:return r.sent(),[2]}}))}))}function Tt(t,e){return u(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,e.record(jt.ad_slot_define,{item:t})];case 1:return n.sent(),[2]}}))}))}function qt(t,e,n){return u(this,void 0,void 0,(function(){var o,r,i,a,u,l,d;return c(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,7]),o=s(t),r=o.next(),c.label=1;case 1:return r.done?[3,4]:(i=r.value,void 0===(a=e.get(i.id))?[3,3]:[4,Lt(i,a,n)]);case 2:c.sent(),c.label=3;case 3:return r=o.next(),[3,1];case 4:return[3,7];case 5:return u=c.sent(),l={error:u},[3,7];case 6:try{r&&!r.done&&(d=o.return)&&d.call(o)}finally{if(l)throw l.error}return[7];case 7:return[2]}}))}))}function Lt(t,e,n){var o;return u(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return!0!==(null===(o=t.deal)||void 0===o?void 0:o.some((function(t){return t.id===Pt.equinoxWidget})))?[3,2]:[4,n.record(At,{id:t.id,targeting:e})];case 1:return r.sent(),[3,3];case 2:throw new Error("Not implemented: The ad/slot/render event can only be used with specific deal IDs currently");case 3:return[2]}}))}))}var kt,jt={ad_schain_define:"ad/schain/define",ad_slot_define:"ad/slot/define",ad_slot_import:"ad/slot/import",ad_slot_render:"ad/slot/render",ad_targeting_fetch:"ad/targeting/fetch",ad_targeting_attach:"ad/targeting/attach",ad_signals_define:"ad/signals/define",cxm_config_load:"cxm/config/load"},Ut=new Map([[jt.ad_slot_define,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r,i,a,u,s;return c(this,(function(c){if(0===(t=d(d([],l(null!==(i=null===(r=n.detail)||void 0===r?void 0:r.item)&&void 0!==i?i:[]),!1),l(null!==(s=null===(u=null===(a=n.detail)||void 0===a?void 0:a.slots)||void 0===u?void 0:u.map(it))&&void 0!==s?s:[]),!1)).length)throw new Error("Expecting a non-empty array for 'item' (OpenRTB) or 'slots' (legacy)");return t.forEach((function(t){e.update(_t,(function(e){return e.set(t.id,t)}))})),[2,o.completed]}))}))}],[jt.ad_targeting_fetch,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r,i,a,u,d,v,p;return c(this,(function(c){switch(c.label){case 0:return void 0===e.globalContext.apstag?[2,o.waiting]:(function(t){var e=t.use(Ct);e||(t.update(Ct,(function(){return!0})),t.record(jt.cxm_config_load))}(e),function(t){(function(t){if(function(t){var e,n;try{for(var r=s(t.queue),i=r.next();!i.done;i=r.next()){var a=i.value;if(a.type===et.ad_debugSession_start&&a.status===o.waiting)return!0}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return!1}(t))return!1;var e=t.read(f,{persist:!0});if(void 0!==e)return!0;return!1})(t)&&t.record(et.ad_debugSession_start)}(e),t=function(t){return Array.from(t.use(_t).values())}(e),r=function(t,e){var n=t;void 0!==e&&e.length>0&&(n=t.filter((function(t){return e.includes(t.id)})));return n}(t,null===(u=n.detail)||void 0===u?void 0:u.itemIds),i=null===(d=n.detail)||void 0===d?void 0:d.publisherParams,[4,St({account:e,selectedSlots:r,publisherParams:i,timeout:null===(v=n.detail)||void 0===v?void 0:v.timeout,_endpointDomain:null===(p=n.detail)||void 0===p?void 0:p._endpointDomain,initConfig:{pubID:e.id,isSelfServePub:36===e.id.length,deals:!0}})]);case 1:return a=c.sent(),function(t,e){var n=function(t){return t.read(gt,{default:{generators:bt,args:[]}})}(t);(function(t,e){e.forEach((function(e){t.set(e.slotID,new Map)}))})(n,e),function(t,e){e.forEach((function(e){Object.entries(e.targeting).forEach((function(n){var o=l(n,2),r=o[0],i=o[1];Map.prototype.get.apply(t,[e.slotID]).set(r,i)}))}))}(n,e),function(t,e){t.store.set(gt,e)}(t,n)}(e,a),function(t){var e=function(e){var n=e.adServer,o=e.itemIds;t.record(jt.ad_targeting_attach,{itemIds:o,adServer:n})};t.update(Et,(function(){return e}))}(e),[2,o.completed]}}))}))}],[jt.ad_targeting_attach,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r,i,a;return c(this,(function(u){if(void 0===(t=null===(i=n.detail)||void 0===i?void 0:i.adServer))throw new Error("adServer must be defined");if(!Object.values(tt).includes(t))throw new Error("adServer: ".concat(t," isn't currently supported"));return r={pubID:e.id},e.globalContext.apstag.setDisplayBids(null===(a=n.detail)||void 0===a?void 0:a.itemIds,{initConfig:r,adServer:t}),[2,o.completed]}))}))}],[jt.ad_slot_import,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(r){if(void 0===(null===(t=n.detail)||void 0===t?void 0:t.adServer))throw new Error("adServer: a valid value must be provided");if(n.detail.adServer===tt.Googletag)return e.write(wt,!0),[2,o.completed];throw new Error("adServer: value provided isn't currently supported")}))}))}],[jt.ad_schain_define,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(r){if(void 0===(null===(t=n.detail)||void 0===t?void 0:t.schain))throw new Error("Missing schain object");return e.write(mt,n.detail.schain),[2,o.completed]}))}))}],[jt.ad_signals_define,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){return c(this,(function(t){if(void 0===n.detail||!("context"in n.detail))throw new Error("Missing detail object");return e.write(yt,n.detail.context),[2,o.completed]}))}))}],[jt.ad_slot_render,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r;return c(this,(function(i){switch(i.label){case 0:return void 0===(t=null===(r=n.detail)||void 0===r?void 0:r.item)?[3,2]:[4,Nt(t,e)];case 1:return i.sent(),[2,o.completed];case 2:throw new Error('Not implemented: The ad/slot/render event can only be used with the "item" attribute currently')}}))}))}],[jt.cxm_config_load,function(t){var e=t.account;return t.customEvent,u(void 0,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return void 0===e.globalContext.apstag?[2,o.waiting]:(t=e.id,36===e.id.length&&(t="600",n=e.id),[4,new Promise((function(o,r){if(void 0===e.globalContext.apstag)throw new Error("apstag._load3PLibraryConfig is undefined");e.globalContext.apstag._load3PLibraryConfig(e.id,{sourceID:t,publisherUUID:n},o,r)}))]);case 1:return r.sent(),[2,o.completed]}}))}))}]]);!function(t){t.equinoxWidget="amazon:93b7dd52-a8ce-11ed-afa1-0242ac120002"}(kt||(kt={}));var zt=new Map([["ad/container/didInitialize",function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r,i,a,u;return c(this,(function(c){switch(c.label){case 0:return t=null===(a=n.detail)||void 0===a?void 0:a.id,r=null===(u=n.detail)||void 0===u?void 0:u.labels,void 0!==t&&void 0!==r&&r.includes(kt.equinoxWidget)?(i=[{id:t,spec:{placement:{display:{}}},deal:[{id:kt.equinoxWidget}]}],[4,e.record(jt.ad_slot_render,{item:i})]):[3,2];case 1:c.sent(),c.label=2;case 2:return[2,o.completed]}}))}))}]]);var Ft={widget_toolbox_end:"widget/toolbox/end",widget_toolbox_open:"widget/toolbox/open",widget_toolbox_start:"widget/toolbox/start"},Bt=new Map([[Ft.widget_toolbox_end,function(t){var e=t.account;return u(void 0,void 0,void 0,(function(){return c(this,(function(t){return e.record(et.debug_prepend_remove,{eventName:Ft.widget_toolbox_start}),[2,o.completed]}))}))}],[Ft.widget_toolbox_open,function(t){var e=t.account;return t.customEvent,u(void 0,void 0,void 0,(function(){return c(this,(function(t){return function(t,e){var n=e.globalContext.document.createElement("script");n.src=t,n.async=!0,e.globalContext.document.head.appendChild(n)}("https://c.toolbox.aps.amazon-adsystem.com/toolbox.js",e),[2,o.completed]}))}))}],[Ft.widget_toolbox_start,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){return c(this,(function(t){return e.record(et.debug_prepend_add,{eventName:n.type}),e.record(Ft.widget_toolbox_open),[2,o.completed]}))}))}]]),Ht="consent/GPPData",Gt="consent/isGPPListenerRegistered",Qt={key:"consent/isTCFAPIListenerRegistered",default:!1},Vt={key:"consent/TCData",default:void 0},Jt={consent_gppapi_attemptSync:"consent/gppapi/attemptSync",consent_gppapi_didChange:"consent/gppapi/didChange",consent_gppapi_syncData:"consent/gppapi/syncData",consent_tcfapi_attemptSync:"consent/tcfapi/attemptSync",consent_tcfapi_didChange:"consent/tcfapi/didChange"},Wt=new Map([[Jt.consent_gppapi_attemptSync,function(t){var e=t.account;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return void 0===e.globalContext.__gpp||!0===e.read(Gt)?[2,o.cancelled]:[4,e.record(Jt.consent_gppapi_syncData)];case 1:return n.sent(),t=e.globalContext.__gpp("addEventListener",(function(t){"error"!==(null==t?void 0:t.eventName)&&e.record(Jt.consent_gppapi_didChange,{eventListener:t})})),e.write(Gt,"listenerRegistered"===(null==t?void 0:t.eventName)&&!0===(null==t?void 0:t.data)),[2,o.completed]}}))}))}],[Jt.consent_gppapi_didChange,function(t){var e=t.account;return t.customEvent,u(void 0,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,e.record(Jt.consent_gppapi_syncData)];case 1:return t.sent(),[2,o.completed]}}))}))}],[Jt.consent_gppapi_syncData,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r,a,u,s,d;return c(this,(function(c){return u=l(function(t){var e,n;try{var o=t.globalContext.__gpp("getGPPData");e=i(i({},o),o.pingData)}catch(t){n="E:getGPPData: ".concat(t)}return[e,n]}(e),2),t=u[0],r=u[1],"object"!=typeof t&&(s=l(function(t){var e,n,o;try{var r=t.globalContext.__gpp("ping",(function(t,e){e&&"object"==typeof t&&(n=t)}));void 0===n&&(null!==(e=null==r?void 0:r.gppString)&&void 0!==e?e:"").length>0&&(n=r)}catch(t){o="E:ping: ".concat(t)}return[n,o]}(e),2),t=s[0],a=s[1]),n.analytics={gpp:{gppLength:"string"==typeof(null==t?void 0:t.gppString)?t.gppString.length:void 0,isGPPTilde:(null!==(d=null==t?void 0:t.gppString)&&void 0!==d?d:"").includes("~"),error10:r,error:a,gppVersion:null==t?void 0:t.gppVersion,cmpId:null==t?void 0:t.cmpId}},e.write(Ht,t),[2,o.completed]}))}))}],[Jt.consent_tcfapi_attemptSync,function(t){var e=t.account;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(n){return t=e.use(Qt),void 0===e.globalContext.__tcfapi||t?[2,o.cancelled]:(e.globalContext.__tcfapi("addEventListener",2,(function(t,n){e.record(Jt.consent_tcfapi_didChange,{tcData:t,success:n})})),[2,o.completed])}))}))}],[Jt.consent_tcfapi_didChange,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r,i,a;return c(this,(function(u){return t=null===(i=n.detail)||void 0===i?void 0:i.success,e.update(Qt,(function(e){return e||!0===t})),r=null===(a=n.detail)||void 0===a?void 0:a.tcData,e.update(Vt,(function(e){return void 0!==r||!0===t?r:e})),[2,o.completed]}))}))}]]),Kt=new Map([["log/library/didUseFeature",function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r,a;return c(this,(function(u){if(void 0===(null===(a=n.detail)||void 0===a?void 0:a.log))throw new Error("Missing log object");return t=n.detail.log,r=i({},t),"object"==typeof t.analytics&&(r.eventProperties=t.analytics),x.logFeature({id:r.category,feature:r.feature,props:r.eventProperties,account:e}),n.isLogDisabled=!0,[2,o.completed]}))}))}],["log/library/didError",function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(r){if(void 0===(null===(t=n.detail)||void 0===t?void 0:t.log))throw new Error("Missing log object");return x.logError({id:n.detail.log.errorCategory,error:n.detail.log.error,account:e}),n.isLogDisabled=!0,[2,o.completed]}))}))}],["log/analytics/setSampling",function(t){t.account;var e=t.customEvent;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(n){if("number"!=typeof(null===(t=e.detail)||void 0===t?void 0:t.ratio))throw new Error("Invalid 'ratio' param passed");return x.setTahoeRatio(e.detail.ratio),[2,o.completed]}))}))}],["log/analytics/setInterval",function(t){t.account;var e=t.customEvent;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(n){if("number"!=typeof(null===(t=e.detail)||void 0===t?void 0:t.interval))throw new Error("Invalid 'interval' param passed");return x.setTahoeQueueInterval(e.detail.interval),[2,o.completed]}))}))}]]),Xt=new Map([["apstag/configuration/fetch",function(t){var e=t.account;return t.customEvent,u(void 0,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return(t=e.globalContext.document.createElement("script")).setAttribute("src","".concat("https://config.aps.amazon-adsystem.com/configs/").concat(e.id)),t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),e.globalContext.document.head.appendChild(t),[4,new Promise((function(e,n){t.addEventListener("load",(function(){e()})),t.addEventListener("error",(function(t){n(t)}))}))];case 1:return n.sent(),[2,o.completed]}}))}))}]]);function Yt(t){return u(this,void 0,void 0,(function(){var e,n,o,r,i;return c(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,crypto.subtle.importKey("jwk",{alg:"A128CTR",ext:!0,k:"ERTYQsuodPO_Um-5jFmOLg",key_ops:["encrypt"],kty:"oct"},"AES-CTR",!0,["encrypt"])];case 1:return e=a.sent(),n=(new TextEncoder).encode(t),r=Uint8Array.bind,[4,crypto.subtle.encrypt({name:"AES-CTR",counter:new Uint8Array(16),length:128},e,n)];case 2:return o=new(r.apply(Uint8Array,[void 0,a.sent()])),[2,btoa(String.fromCharCode.apply(String,d([],l(o),!1)))];case 3:return i=a.sent(),x.logError({id:"SecureSignals-encryptSignal",account:null,error:i}),[2,null];case 4:return[2]}}))}))}var Zt={google_secureSignals_set:"google/secureSignals/set",google_secureSignals_initialize:"google/secureSignals/initialize"},$t=new Map([[Zt.google_secureSignals_set,function(t){var e=t.account;return t.customEvent,u(void 0,void 0,void 0,(function(){return c(this,(function(t){return void 0===e.globalContext.googletag&&(e.globalContext.googletag={}),void 0===e.globalContext.googletag.secureSignalProviders&&(e.globalContext.googletag.secureSignalProviders=[]),e.globalContext.googletag.secureSignalProviders.push({networkCode:"amazon.com",collectorFunction:function(){return u(void 0,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,e.record(Zt.google_secureSignals_initialize)];case 1:return[2,t.sent()]}}))}))}}),[2,o.completed]}))}))}],[Zt.google_secureSignals_initialize,function(t){var e=t.account;return t.customEvent,u(void 0,void 0,void 0,(function(){var t,n,r,i,a,u,s;return c(this,(function(c){switch(c.label){case 0:return void 0===(t=null===(u=e.globalContext.apstag)||void 0===u?void 0:u._getSlotIdToNameMapping)?[2,{status:o.waiting}]:(n=t(),0===Object.keys(n).length?[2,{status:o.waiting}]:(void 0===(r=null===(s=e.globalContext.location)||void 0===s?void 0:s.href)&&(x.logError({id:"SecureSignals-googleSignalCollector",error:"window.location.href null",account:e}),r=""),i="".concat(r,";").concat(JSON.stringify(n)).substr(0,225),a={status:o.completed},[4,Yt(i)]));case 1:return[2,(a.value=c.sent(),a)]}}))}))}]]),te={key:"customPlacement/configuration",default:void 0},ee={key:"customPlacement/contextURL",default:void 0},ne={key:"customPlacement/configurationEndpoint",default:"https://aax.amazon-adsystem.com/e/placements"};function oe(t){var e=t.read(yt);return void 0!==e&&"user"in e?(e.user,function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}(e,["user"])):e}function re(t,e){try{var n=null!=e?e:function(t){var e,n;try{if(void 0!==(null===(e=t.globalContext.top)||void 0===e?void 0:e.location.href))return null===(n=t.globalContext.top)||void 0===n?void 0:n.location.href}catch(t){}try{if(t.globalContext.top!==t.globalContext.self)return t.globalContext.document.referrer}catch(t){}return}(t);if(void 0!==n)return encodeURIComponent(n)}catch(t){}return""}function ie(t){return u(this,void 0,void 0,(function(){var e,n,o,r,i;return c(this,(function(a){switch(a.label){case 0:return e={ortb2:oe(t)},n=t.use(ee),o=t.use(ne),r=re(t,n),i=encodeURIComponent(JSON.stringify(e)),[4,fetch("".concat(o,"?account=").concat(t.id,"&u=").concat(r,"&sg=").concat(i))];case 1:return[4,a.sent().json()];case 2:return[2,a.sent()]}}))}))}var ae={key:"customPlacement/defaultLocationHints",default:new Set},ue={key:"customPlacement/secondaryLocationHints",default:new Set},ce={key:"customPlacement/requestedGAMSlots",default:new Set};function se(t){return u(this,void 0,void 0,(function(){var e,n,o;return c(this,(function(r){switch(r.label){case 0:return 6e4,e={slots:[{slotID:"93b7dd52-a8ce-11ed-afa1-0242ac120002:1",sizes:[[999,999]]}],timeout:6e4,_endpointDomain:"aax-us-east.amazon-adsystem.com",params:{program:"apscustom"}},n={pubID:t.id,isSelfServePub:36===t.id.length,deals:!0},o=t.use(ee),[4,new Promise((function(r){var i;null===(i=t.globalContext.apstag)||void 0===i||i.fetchBids(e,(function(t){r(t)}),{initConfig:n,contextURL:o})}))];case 1:return[2,r.sent()]}}))}))}var le={customPlacement_configuration_fetch:"customPlacement/configuration/fetch",customPlacement_placement_enable:"customPlacement/placement/enable",customPlacement_hint_define:"customPlacement/hint/define",customPlacement_targeting_attach:"customPlacement/targeting/attach",customPlacement_bids_fetch:"customPlacement/bids/fetch"},de=new Map([[le.customPlacement_configuration_fetch,function(t){var e=t.account;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return function(t){var e=t.use(te);if(void 0!==e)return!0;return!1}(e)?[2,o.cancelled]:[4,ie(e)];case 1:return t=n.sent(),e.update(te,(function(){return t})),[4,e.record(le.customPlacement_targeting_attach)];case 2:return n.sent(),[2,o.completed]}}))}))}],[le.customPlacement_placement_enable,function(t){var e=t.account;return u(void 0,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return function(t){var e,n;null===(n=null===(e=t.globalContext.googletag)||void 0===e?void 0:e.cmd)||void 0===n||n.push((function(){var e,n;null===(n=null===(e=t.globalContext.googletag)||void 0===e?void 0:e.pubads())||void 0===n||n.addEventListener("slotRequested",(function(e){t.update(ce,(function(t){return t.add(e.slot.getSlotElementId())}))}))}))}(e),e.record(le.customPlacement_configuration_fetch),[4,e.record(le.customPlacement_bids_fetch)];case 1:if(t=r.sent(),n=function(t,e){var n=t.use(ce);return e.filter((function(t){return!n.has(t.slotID)}))}(e,t),0===n.length)throw new Error("No custom placement bids arrived in time");return[4,e.record(le.customPlacement_targeting_attach)];case 2:return r.sent(),function(t,e){var n=function(t){var e=t.use(ae),n=t.use(ue),o=d(d([],l(e),!1),l(n),!1);if(0===o.length)throw new Error("No configured hints");return o[0]}(t),o=t.globalContext.document.getElementById(n);if(null==o)throw new Error('Hint location "'.concat(n,'" not found'));e.every((function(e){var n,r=null===(n=e.targeting)||void 0===n?void 0:n.amzniid;return!(void 0!==r&&r.length>0)||(function(t,e,n){var o,r=t.globalContext.document.createElement("iframe"),i=e.size.split("x");Object.assign(r.style,{marginLeft:"0",marginTop:"0",height:"".concat(i[1],"px"),width:"100%"}),r.setAttribute("scrolling","no"),r.setAttribute("frameborder","0"),n.appendChild(r);var a=null===(o=r.contentWindow)||void 0===o?void 0:o.document;void 0!==a&&(a.open(),a.write('<!DOCTYPE html><html><head><meta charset="UTF-8"><style>html{height:100%}body{height:100%;margin:0;overflow:hidden}</style></head><body><script>window.parent.apstag.renderImp(document, "'+e.targeting.amzniid+'", {"inheritSize": true});<\/script></body></html>'),a.close())}(t,e,o),!1)}))}(e,n),[2,o.completed]}}))}))}],[le.customPlacement_hint_define,function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r,i,a,u;return c(this,(function(c){if(void 0===(null===(u=n.detail)||void 0===u?void 0:u.id))throw new Error("Hint `id` must be defined");return t=n.detail,r=t.id,i=t.isDefault,a=ae,!0!==i&&(a=ue),e.update(a,(function(t){return t.add(r)})),[2,o.completed]}))}))}],[le.customPlacement_targeting_attach,function(t){var e=t.account;return u(void 0,void 0,void 0,(function(){var t;return c(this,(function(n){return void 0!==(t=e.use(te))&&function(t){return!0===(null==t?void 0:t.aps.some((function(t){return t.active})))}(t)?(function(t,e){var n,o,r=function(t,e){if(void 0===(null==e?void 0:e.google))return[];var n=t.use(ce);return e.google.filter((function(t){return!n.has(t.div)}))}(t,e);if(0===r.length)throw new Error("No unrequested slots in custom placement configuration");null===(o=null===(n=t.globalContext.googletag)||void 0===n?void 0:n.cmd)||void 0===o||o.push((function(){!function(t,e){var n,o=null===(n=null==t?void 0:t.pubads())||void 0===n?void 0:n.getSlots();null==e||e.forEach((function(t){var e=null==o?void 0:o.find((function(e){return e.getSlotElementId()===t.div}));void 0!==e&&Object.entries(t.targeting).forEach((function(t){var n=l(t,2),o=n[0],r=n[1];e.setTargeting(o,r)}))}))}(t.globalContext.googletag,r)}))}(e,t),[2,o.completed]):[2,o.cancelled]}))}))}],[le.customPlacement_bids_fetch,function(t){var e=t.account;return u(void 0,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return void 0===(null===(n=e.globalContext.apstag)||void 0===n?void 0:n.fetchBids)?[2,o.waiting]:[4,se(e)];case 1:return t=r.sent(),[2,{status:o.completed,value:t}]}}))}))}]]),ve={key:"_monitoring/statusesByEventIdentifier",default:new Map},pe=function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r,i,a,u;return c(this,(function(c){if(void 0===(t=null===(u=n.detail)||void 0===u?void 0:u.eventIdentifier))throw new Error("Missing eventIdentifier parameter");return r=e.use(ve),i="".concat(n.type,":").concat(t),void 0!==(a=r.get(i))?[2,a]:[2,o.waiting]}))}))},fe=function(t){var e=t.account,n=t.customEvent;return u(void 0,void 0,void 0,(function(){var t,r,i,a,u,s;return c(this,(function(c){if(void 0===(t=null===(a=n.detail)||void 0===a?void 0:a.eventIdentifier))throw new Error("Missing eventIdentifier parameter");if(void 0===(r=null===(u=n.detail)||void 0===u?void 0:u.statusUpdate))throw new Error("Missing statusUpdate parameter");if(!(r in o))throw new Error("Invalid statusUpdate parameter. Expected one of ".concat(Object.values(o).join(", ")));if(void 0===(i=null===(s=n.detail)||void 0===s?void 0:s.pairedEvents)||i.length<1||i.some((function(t){return"string"!=typeof t})))throw new Error("Parameter pairedEvents must be a non-empty array of string");return i.forEach((function(n){var o="".concat(n,":").concat(t);e.update(ve,(function(t){return t.set(o,r)}))})),[2,o.completed]}))}))},he=new Map([["_monitor/testing/only",pe],["_update/testing/only",fe],["_legacy/bidRequest/monitor",pe],["_legacy/bidRequest/didComplete",fe]]);try{var ge=new Map(d(d(d(d(d(d(d(d(d(d(d(d(d(d([],l(Xt),!1),l(Wt),!1),l(Bt),!1),l(zt),!1),l(nt),!1),l(Ut),!1),l(Rt),!1),l(ot),!1),l(rt),!1),l(Y),!1),l(Kt),!1),l($t),!1),l(de),!1),l(he),!1));(new X).load({listeners:ge})}catch(t){x.logCoreError({id:"publisher",account:null,error:t}),B()&&E.error(t)}}();
/*! @amzn/apswebapstaglibrary - apstag-legacy - 23.1202.117 */
!function(t){var e={};function n(r){var o;return(e[r]||(o=e[r]={i:r,l:!1,exports:{}},t[r].blockme(                    ),o.l=!0,o)).exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",blockme()}blockme(                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      );
